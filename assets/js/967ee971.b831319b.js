"use strict";(self.webpackChunkjustcloudblog=self.webpackChunkjustcloudblog||[]).push([[9924],{3905:function(e,t,r){r.d(t,{Zo:function(){return d},kt:function(){return m}});var a=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var u=a.createContext({}),s=function(e){var t=a.useContext(u),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},d=function(e){var t=s(e.components);return a.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,u=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=s(r),m=n,k=c["".concat(u,".").concat(m)]||c[m]||p[m]||o;return r?a.createElement(k,i(i({ref:t},d),{},{components:r})):a.createElement(k,i({ref:t},d))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,i=new Array(o);i[0]=c;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var s=2;s<o;s++)i[s]=r[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}c.displayName="MDXCreateElement"},8430:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return l},contentTitle:function(){return u},metadata:function(){return s},assets:function(){return d},toc:function(){return p},default:function(){return m}});var a=r(7462),n=r(3366),o=(r(7294),r(3905)),i=["components"],l={slug:"migracja-dysku-vhd-do-azure-migration-disc-vhd-to-azure",title:"Migracja dysku .vhd do Azure \u2013 Migration disc .vhd to Azure",description:"Migracja dysku vhd z on-prem do Azure krok po kroku.",authors:["progala"],date:"2014-10-20",tags:["azure","migracja","powershell"],keywords:["azure","migracja","powershell"],hide_table_of_contents:!0},u=void 0,s={permalink:"/migracja-dysku-vhd-do-azure-migration-disc-vhd-to-azure",source:"@site/blog/2014-10-20-migracja-dysku-vhd-do-azure-migration-disc-vhd-to-azure/index.md",title:"Migracja dysku .vhd do Azure \u2013 Migration disc .vhd to Azure",description:"Migracja dysku vhd z on-prem do Azure krok po kroku.",date:"2014-10-20T00:00:00.000Z",formattedDate:"October 20, 2014",tags:[{label:"azure",permalink:"/tags/azure"},{label:"migracja",permalink:"/tags/migracja"},{label:"powershell",permalink:"/tags/powershell"}],readingTime:1.16,truncated:!0,authors:[{name:"Piotr Rogala",title:"MVP Azure & owner JustCloud.pl",url:"https://github.com/RogalaPiotr",imageURL:"https://avatars.githubusercontent.com/u/31566956?v=4",key:"progala"}],frontMatter:{slug:"migracja-dysku-vhd-do-azure-migration-disc-vhd-to-azure",title:"Migracja dysku .vhd do Azure \u2013 Migration disc .vhd to Azure",description:"Migracja dysku vhd z on-prem do Azure krok po kroku.",authors:["progala"],date:"2014-10-20",tags:["azure","migracja","powershell"],keywords:["azure","migracja","powershell"],hide_table_of_contents:!0},prevItem:{title:"Azure Storage Explorer - review",permalink:"/azure-storage-explorer-review"},nextItem:{title:"RhinoApps \u2013 Uniwersalno\u015b\u0107, skalowalno\u015b\u0107 i aplikacje \u2013 nowy wymiar us\u0142ug Cloud Computing",permalink:"/rhinoapps-pilot"}},d={authorsImageUrls:[void 0]},p=[],c={toc:p};function m(e){var t=e.components,l=(0,n.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},c,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"W tym artykule opisz\u0119 jak mo\u017cemy przemigrowa\u0107 do Azure dysk z Windows 10 TechPreview."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Przygotowujemy dysk .vhd",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Je\u015bli posiadamy dysk .vhdx mo\u017cemy u\u017cy\u0107 polecenia PS w celu przekonwertowania:")))),(0,o.kt)("p",null,'Convert-VHD \u2013Path \u201cD:\\Hyper-V\\Windows10\\Virtual Hard Disks\\Windows10.vhdx" \u2013DestinationPath \u201cD:\\Hyper-V\\Windows10\\Virtual Hard Disks\\Windows10.vhd'),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"azure-migracja-1",src:r(5424).Z,width:"604",height:"402"})),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"azure-migracja-2",src:r(9436).Z,width:"605",height:"154"})),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Wybieramy storage, na kt\xf3ry b\u0119dziemy migrowa\u0107 dysk, najbardziej nas interesuje linki blobs."),(0,o.kt)("li",{parentName:"ol"},"Odpalamy PowerShell-a dla Azure",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Je\u015bli nie masz przystawki Azure-owej mo\u017cesz pobra\u0107 j\u0105 tu: ",(0,o.kt)("a",{parentName:"li",href:"http://go.microsoft.com/?linkid=9811175"},"http://go.microsoft.com/?linkid=9811175")))),(0,o.kt)("li",{parentName:"ol"},"W konsoli wklepujemy:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'$cred = Get-Credential\nAdd-AzureAccount -Credential $cred\n$sourceVHD = \u201cD:\\Hyper-V\\Windows10\\Virtual Hard Disks\\Windows10.vhdx"\n$destinationVHD="https://test-storage.blob.core.windows.net/vhds/Windows10-Test.vhd"\nAdd-AzureVhd -LocalFilePath $sourceVHD -Destination $destinationVHD -NumberOfUploaderThreads 5\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Dla $source i $destynation zmieniamy analogicznie do naszych potrzeb")),(0,o.kt)("ol",{start:5},(0,o.kt)("li",{parentName:"ol"},"Efekt przenoszenia do Azure.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"azure-migracja-3",src:r(6935).Z,width:"604",height:"136"})),(0,o.kt)("ol",{start:6},(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Przechodzimy do Virtual Machines > Disk"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Tutaj wybieramy nasz .vhd i klikamy Create.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Wype\u0142niamy nazw\u0119 obrazu oraz wskazujemy go w naszym kontenerze z dyskami."))))),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"azure-migracja-4",src:r(152).Z,width:"605",height:"484"})),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Chc\u0105c teraz skorzysta\u0107 z naszego dysku przechodzimy do galerii z systemami New > Compute > Virtual Machine > From Gallery",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Klikaj\u0105c na My Images zobaczymy nasz przygotowany dysk.")))),(0,o.kt)("p",null,"I tak uda\u0142o nam si\u0119 przenie\u015b\u0107 wirtualk\u0119 do Azure, mo\u017ce to by\u0107 skonfigurowana gotowa do pracy b\u0105d\u017a dysk bazowy \u201etemplate\u201d kt\xf3ry mo\u017cemy wykorzystywa\u0107 przy tworzeniu innych maszyn."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Opcja \u015bci\u0105gni\u0119cia dysku .vhd z Azure:")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Odpalamy konsole PowerShell Azure",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Wklepujemy:")))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'$cred = Get-Credential\nAdd-AzureAccount -Credential $cred\n$sourceVHD = "https://storage-test.blob.core.windows.net/vhds/Windows10Test.vhd"\n$destinationVHD = "D:\\Hyper-V\\Windows10\\Virtual Hard Disks\\Windows10.vhd"\nSave-AzureVhd -Source $sourceVHD -LocalFilePath $destinationVHD -NumberOfThreads 5\n')))}m.isMDXComponent=!0},5424:function(e,t,r){t.Z=r.p+"assets/images/102014_1550_Migracjadys1-03a3c4751869e8ceff79c8799292a1b4.png"},9436:function(e,t,r){t.Z=r.p+"assets/images/102014_1550_Migracjadys2-b407990771072d04eb772c9a507df63b.png"},152:function(e,t,r){t.Z=r.p+"assets/images/102014_1550_Migracjadys4-ee3d25f72eda2cf2e01030559ad2876f.png"},6935:function(e,t,r){t.Z=r.p+"assets/images/azure10prew-2a97d5d3375fb8fda82b84c62e896290.png"}}]);