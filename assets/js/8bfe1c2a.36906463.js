"use strict";(globalThis.webpackChunkdocusaurus_site=globalThis.webpackChunkdocusaurus_site||[]).push([[101],{28453:(e,a,i)=>{i.d(a,{R:()=>t,x:()=>r});var o=i(96540);const n={},s=o.createContext(n);function t(e){const a=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function r(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:t(e.components),o.createElement(s.Provider,{value:a},e.children)}},82670:e=>{e.exports=JSON.parse('{"permalink":"/tags-in-azure","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2021-06-03-tags-in-azure/index.md","source":"@site/blog/2021-06-03-tags-in-azure/index.md","title":"Przyspieszenie pracy nad tagowaniem zasob\xf3w za pomoc\u0105 PowerShell - Tag raport Microsoft Azure","description":"Kompletny przewodnik po tagowaniu zasob\xf3w w Azure PowerShell, eksport CSV i automatyzacja dla ma\u0142ych i du\u017cych \u015brodowisk.","date":"2021-06-03T00:00:00.000Z","tags":[{"inline":true,"label":"csv","permalink":"/tags/csv"},{"inline":true,"label":"azure","permalink":"/tags/azure"},{"inline":true,"label":"tagowanie","permalink":"/tags/tagowanie"},{"inline":true,"label":"powershell","permalink":"/tags/powershell"},{"inline":true,"label":"automatyzacja","permalink":"/tags/automatyzacja"},{"inline":true,"label":"raport","permalink":"/tags/raport"},{"inline":true,"label":"tagging","permalink":"/tags/tagging"},{"inline":true,"label":"tags","permalink":"/tags/tags"},{"inline":true,"label":"zasoby","permalink":"/tags/zasoby"},{"inline":true,"label":"skrypty","permalink":"/tags/skrypty"}],"readingTime":3.18,"hasTruncateMarker":true,"authors":[{"name":"Piotr Rogala","title":"MVP Azure & owner JustCloud.pl","url":"https://github.com/RogalaPiotr","page":{"permalink":"/authors/progala"},"socials":{"x":"https://x.com/RogalaPiotr","linkedin":"https://www.linkedin.com/in/rogalapiotr/","github":"https://github.com/RogalaPiotr","newsletter":"https://subscribepage.io/wroclaw-newsletter-workshops"},"imageURL":"https://avatars.githubusercontent.com/u/31566956?v=4","key":"progala"}],"frontMatter":{"authors":["progala"],"date":"2021-06-03","description":"Kompletny przewodnik po tagowaniu zasob\xf3w w Azure PowerShell, eksport CSV i automatyzacja dla ma\u0142ych i du\u017cych \u015brodowisk.","keywords":["Azure","tagowanie","PowerShell","automatyzacja","csv","tagging","skrypty","raport","zasoby","Azure Tags"],"slug":"tags-in-azure","tags":["csv","azure","tagowanie","powershell","automatyzacja","raport","tagging","tags","zasoby","skrypty"],"title":"Przyspieszenie pracy nad tagowaniem zasob\xf3w za pomoc\u0105 PowerShell - Tag raport Microsoft Azure"},"unlisted":false,"prevItem":{"title":"Nowa ods\u0142ona bloga JustCloud","permalink":"/welcome"},"nextItem":{"title":"Wys\u0142anie \u017c\u0105dania API z PowerShell do Azure DevOps","permalink":"/wyslanie-zadania-api-z-powershell-do-azure-devops"}}')},85111:(e,a,i)=>{i.r(a),i.d(a,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>t,metadata:()=>o,toc:()=>p});var o=i(82670),n=i(74848),s=i(28453);const t={authors:["progala"],date:"2021-06-03",description:"Kompletny przewodnik po tagowaniu zasob\xf3w w Azure PowerShell, eksport CSV i automatyzacja dla ma\u0142ych i du\u017cych \u015brodowisk.",keywords:["Azure","tagowanie","PowerShell","automatyzacja","csv","tagging","skrypty","raport","zasoby","Azure Tags"],slug:"tags-in-azure",tags:["csv","azure","tagowanie","powershell","automatyzacja","raport","tagging","tags","zasoby","skrypty"],title:"Przyspieszenie pracy nad tagowaniem zasob\xf3w za pomoc\u0105 PowerShell - Tag raport Microsoft Azure"},r=void 0,l={authorsImageUrls:[void 0]},p=[];function c(e){const a={a:"a",code:"code",em:"em",img:"img",li:"li",ol:"ol",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.p,{children:"Kiedy\u015b przygotowa\u0142em ten skrypt, \u017ceby szybko m\xf3c otagowa\u0107 wiele zasob\xf3w wdro\u017conych na platformie Microsoft Azure. Jest kilka sposob\xf3w, aby to zrobi\u0107 szybko i prosto; stara\u0142em si\u0119 przygotowa\u0107 rozwi\u0105zanie uniwersalne, \u0142atwe i bezpieczne w u\u017cyciu."}),"\n",(0,n.jsx)(a.p,{children:"Dlatego postanowi\u0142em zrobi\u0107 jeden skrypt, kt\xf3ry generuje wszystkie zasoby do pliku CSV. Drugi skrypt, na podstawie pliku CSV, pobiera dane zasob\xf3w i nadpisuje je na platformie."}),"\n",(0,n.jsx)(a.p,{children:"Skrypty s\u0105 dost\u0119pne na GitHub:"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:(0,n.jsx)(a.a,{href:"https://github.com/RogalaPiotr/JustCloudPublic/tree/master/azure-tags-report",children:"https://github.com/RogalaPiotr/JustCloudPublic/tree/master/azure-tags-report"})}),"\n"]}),"\n",(0,n.jsx)(a.p,{children:"Opis skrypt\xf3w:"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"GetAllTags.ps1 \u2014 generuje dwa pliki CSV: jeden dla Resource Group, a drugi dla Resources. Jest to istotne, poniewa\u017c grupy i zasoby s\u0105 rozdzielone, co pozwala tagowa\u0107 je niezale\u017cnie, bez wyszukiwania typ\xf3w zasob\xf3w."}),"\n",(0,n.jsx)(a.li,{children:"SetTagsResourceGroups.ps1 \u2014 skrypt, kt\xf3ry pobiera dane z pliku CSV zawieraj\u0105cego spis Resource Group z tagami do wdro\u017cenia."}),"\n",(0,n.jsx)(a.li,{children:"SetTagsResources.ps1 \u2014 skrypt, kt\xf3ry pobiera dane z pliku CSV, w kt\xf3rym zapisane s\u0105 zasoby z tagami do wdro\u017cenia."}),"\n"]}),"\n",(0,n.jsx)(a.p,{children:"Taki podzia\u0142 daje nam:"}),"\n",(0,n.jsxs)(a.ol,{children:["\n",(0,n.jsx)(a.li,{children:"Zapis stanu obecnego tag\xf3w zapisanych do pliku CSV. Jest to raport tag\xf3w czyli obecny stan wdro\u017cony tag\xf3w."}),"\n",(0,n.jsx)(a.li,{children:"Podzia\u0142 na grupy i zasoby."}),"\n",(0,n.jsx)(a.li,{children:"Mo\u017cliwo\u015b\u0107 poprawiania tag\xf3w tylko na zasobach lub tylko na grupach zasob\xf3w."}),"\n"]}),"\n",(0,n.jsx)(a.p,{children:"Jak dzia\u0142aj\u0105 skrypty?"}),"\n",(0,n.jsxs)(a.ol,{children:["\n",(0,n.jsx)(a.li,{children:"GetAllTags"}),"\n"]}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"Zapis do pliku odbywa si\u0119 automatycznie w lokalizacji, w kt\xf3rej wykonujemy skrypt, lub mo\u017cna u\u017cy\u0107 opcji -path, aby wskaza\u0107 miejsce zapisu plik\xf3w."}),"\n",(0,n.jsx)(a.li,{children:"Nazwa pliku zawiera dat\u0119 \u2014 je\u015bli plik istnieje, zostanie on nadpisany."}),"\n",(0,n.jsx)(a.li,{children:"Skrypt sprawdza, czy jeste\u015b zalogowany do Azure. Podczas wykonywania skryptu mo\u017cesz poda\u0107 parametr -tenantId, aby mie\u0107 pewno\u015b\u0107, \u017ce logujesz si\u0119 do odpowiedniego Azure Directory, oraz -subId w celu wybrania subskrypcji."}),"\n"]}),"\n",(0,n.jsxs)(a.ol,{start:"2",children:["\n",(0,n.jsx)(a.li,{children:"SetTagsResourceGroups oraz SetTagsResources"}),"\n"]}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"Import danych z plik\xf3w odbywa si\u0119 automatycznie, na podstawie konwencji nazewniczej wygenerowanego wcze\u015bniej pliku. Skrypt importuje najnowszy plik CSV we wskazanym katalogu \u2014 mo\u017cna te\u017c poda\u0107 \u015bcie\u017ck\u0119 poprzez parametr -path."}),"\n",(0,n.jsx)(a.li,{children:"Tagi powinny by\u0107 oddzielone przecinkami."}),"\n",(0,n.jsxs)(a.li,{children:['Tagi zapisane w pliku CSV wyst\u0119puj\u0105 jako pary "Key',":Value",'" w osobnych kolumnach.']}),"\n",(0,n.jsx)(a.li,{children:"Skrypt pobiera wszystkie elementy z pliku CSV; nast\u0119pnie usuwa tagi w Microsoft Azure i nadpisuje je danymi z pliku CSV."}),"\n",(0,n.jsx)(a.li,{children:"Je\u015bli nie chcesz modyfikowa\u0107 danego zasobu, wystarczy go usun\u0105\u0107 z pliku CSV."}),"\n",(0,n.jsx)(a.li,{children:"Skrypt dzia\u0142a w trybie r\xf3wnoleg\u0142ym, co pozwala na szybsze wprowadzanie zmian. Throttle dla zapisu tag\xf3w wynosi 5 \u2014 jest to warto\u015b\u0107 optymalna."}),"\n",(0,n.jsx)(a.li,{children:"Skrypt sprawdza, czy jeste\u015b zalogowany do Azure \u2014 mo\u017cesz poda\u0107 parametr -tenantId."}),"\n",(0,n.jsx)(a.li,{children:'Je\u015bli chcesz wyczy\u015bci\u0107 tagi na zasobach, zostaw pust\u0105 kom\xf3rk\u0119 lub wpisz "empty".'}),"\n",(0,n.jsx)(a.li,{children:"Testowanie wprowadzania tag\xf3w mo\u017cesz wykona\u0107 poprzez umieszczenie w pliku CSV wy\u0142\u0105cznie zasob\xf3w, kt\xf3re chcesz zmieni\u0107; pozosta\u0142e zasoby nie b\u0119d\u0105 brane pod uwag\u0119 podczas wdra\u017cania."}),"\n"]}),"\n",(0,n.jsx)(a.p,{children:"Poni\u017cej przedstawiam przyk\u0142ad jak to dzia\u0142a na mojej subskrypcji."}),"\n",(0,n.jsx)(a.p,{children:"Uruchomienie skryptu:"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"GetAllTags.ps1"}),"\n"]}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.code,{children:"Komenda: ./GetAllTags.ps1 -path /tags"})}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{src:"https://lh6.googleusercontent.com/g2uknxvVr-r8zuu_JNgHwzMEWXDS_lCkJkvP0w2nsaraF1iUI-PfsBGgFDAMnSqGiPEN-oG5sg0RR5aQWAqnixT1BRO0RBcsIWEpJ48Jfztk-ioLi0NlKg-fFfHPUxjXg60DReVG",alt:"Output skryptu"})}),"\n",(0,n.jsx)(a.p,{children:"Na printscreenie mo\u017cesz zauwa\u017cy\u0107 output z informacjami jakie generowane s\u0105 przez skrypt."}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"Czy jeste\u015b zalogowany, je\u015bli nie to poprosi Ci\u0119 o zalogowanie si\u0119"}),"\n",(0,n.jsx)(a.li,{children:"Ilo\u015b\u0107\xa0znalezionych grup zasob\xf3w oraz zasob\xf3w"}),"\n",(0,n.jsx)(a.li,{children:"Informacja gdzie i jakie pliki s\u0105\xa0tworzone"}),"\n",(0,n.jsx)(a.li,{children:"Lista zasob\xf3w"}),"\n"]}),"\n",(0,n.jsx)(a.p,{children:"Pliki CSV wygl\u0105daj\u0105 nast\u0119puj\u0105co:"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"Resource Group"}),"\n"]}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{src:"https://lh3.googleusercontent.com/XiatuhcE3vx4Lr6g5rkz-JP48TjhJ-ydCdwySuAGgBccaVpVZKD9CfPF5xVpIuzU6IFM7PNj939dMpEviYAR3287SCr6F5y2cM4pu1i8500uzKNdRNSh16t8dX9GSosf7J2oDJFa",alt:"CSV Resource Group"})}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"Resources"}),"\n"]}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{src:"https://lh4.googleusercontent.com/m5u5NLpGw8DNyroSByMny-rIZsH11sZMs4tgFMixm_Lepfn0rjNf4XqLET6MvsT3YnK48PesD9GJQUkDtWJIuDKsUh7IolWD7BCDfHSQN4Ug_f6qdWpuPF2ns-8vRmnlRNtWptbp",alt:"CSV Resources"})}),"\n",(0,n.jsx)(a.p,{children:"Poni\u017cej przedstawi\u0119 edycj\u0119 tag\xf3w dla pliku z zasobami."}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.em,{children:"Uwaga! Je\u015bli chcesz zachowa\u0107 kopi\u0119 obecnego stanu, zabezpiecz wygenerowany plik lub zmie\u0144 jego nazw\u0119 na zupe\u0142nie inn\u0105."})}),"\n",(0,n.jsxs)(a.p,{children:["Poprawiony plik wygl\u0105da nast\u0119puj\u0105co. Zauwa\u017c, \u017ce wype\u0142ni\u0142em tagi dla wszystkich obiekt\xf3w oraz doda\u0142em nowy tag: Test",":Key",", aby pokaza\u0107 jak wygl\u0105da przypisywanie wielu tag\xf3w."]}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{src:"https://lh6.googleusercontent.com/q4_FhHhAden4hD-gq6IJjhVRras8g-lAgwqCo4evhui6_dSF1wjIt6rZwHV23YbOWIuvlJihRbleddX46VkkUudBByLuX_lfGlrab1_U8Ya14-pdg9Xhrqd7hdzoQqpsxwaseZle",alt:"Edycja tag\xf3w"})}),"\n",(0,n.jsx)(a.p,{children:"Wynik skryptu z wykonanymi zmianami:"}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.code,{children:"Komenda: ./SetTagsResources.ps1 -path /tags"})}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{src:"https://lh4.googleusercontent.com/49zIzivJeCzwtGRSBFcnzG4X0nr3nbtc1dxgJag7q3_tocRbvBcgu0m_DUf11179BBt1GWpHQalOmsyis3CDnEX3xCpgt-1w1Ic_-bR8KFREpnCOP-aXCxmAjefbS7mU7qJbRvkL",alt:"Wynik wykonania skryptu"})}),"\n",(0,n.jsx)(a.p,{children:"Efekt zmian w Portalu Azure:"}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{src:"https://lh4.googleusercontent.com/O0XGlppGQzJYWYNOJcfKkxTo0ZcT4Hstc46TWolZUIr4Bi80Tq8P60Z1IwlMDgU-vwQ4yLvuj1cYWb9RYy67Z4BDPvFGjx704b9ZYUVbGNb9EFUatChC8Vv3YnHQi4g_1Lr1ciL2",alt:"Efekt w Portalu Azure"})}),"\n",(0,n.jsx)(a.p,{children:"Skrypt mo\u017cna dostosowa\u0107\xa0do swoich cel\xf3w tak, aby dzia\u0142a\u0142 na przyk\u0142ad dla wielu subskrypcji. Jest wiele opcji customizacji tego skryptu, kt\xf3re celowo pomin\u0105\u0142em. Skrypty dzia\u0142aj\u0105 modu\u0142owo wi\u0119c mo\u017cna ich \u0142atwo u\u017cy\u0107 z innym skryptem, a reszta zostanie przygotowana i wdro\u017cona na podstawie wprowadzonych danych z pliku."}),"\n",(0,n.jsx)(a.p,{children:"Zapraszam do pozostawienia komentarza!"})]})}function u(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}}}]);