<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="atom.xsl"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://blog.justcloud.pl</id>
    <title>Piotr Rogala - JustCloud.pl Blog</title>
    <updated>2025-12-08T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://blog.justcloud.pl"/>
    <subtitle>Eksperckie artykuły o Microsoft Azure, DevOps, automatyzacji i transformacji chmurowej</subtitle>
    <icon>https://blog.justcloud.pl/img/favicon.ico</icon>
    <rights>Copyright © 2025 JustCloud.pl</rights>
    <entry>
        <title type="html"><![CDATA[Czytelne podsumowanie wdrożenia Terraform w GitHub Actions - Terraform Summary]]></title>
        <id>https://blog.justcloud.pl/2025/12/08/github-actions-terraform-summary</id>
        <link href="https://blog.justcloud.pl/2025/12/08/github-actions-terraform-summary"/>
        <updated>2025-12-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Dowiedz się, jak dodać czytelne podsumowanie planu Terraform do swoich workflow w GitHub Actions za pomocą wtyczki Terraform Summary Action.]]></summary>
        <content type="html"><![CDATA[<p>Jeśli korzystasz z <strong>GitHub Actions</strong> i <strong>Terraform</strong>, ta wtyczka z pewnością Ci się spodoba. W rozbudowanych środowiskach, gdzie zarządzamy wieloma repozytoriami i pipeline'ami, a wdrożenia Terraform są obszerne i często modyfikowane, kluczowa jest szybka identyfikacja zmian oraz potencjalnych błędów. Przeglądanie surowych logów z <code>terraform plan</code> bywa męczące.</p>
<p>Z pomocą przychodzi wtyczka: <a href="https://github.com/marketplace/actions/terraform-summary-report" target="_blank" rel="noopener noreferrer" class="">Terraform summary action</a>.</p>
<p>Pozwala ona na przetworzenie wyniku polecenia <code>terraform plan</code> i wyświetlenie go w formie czytelnego podsumowania bezpośrednio w widoku "Summary" uruchomionego workflow.</p>
<p>Oto jak dodać ją do swojego pipeline'u:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Terraform Plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">working-directory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> env.WORKING_DIR </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_CLIENT_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_CLIENT_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_SUBSCRIPTION_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_SUBSCRIPTION_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_TENANT_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_TENANT_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_USE_OIDC</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Dla wywołania terraform plan należy dodać: "| tee terraform_plan_output.txt"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> terraform plan </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">var</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">file="production.tfvars" </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> tee terraform_plan_output.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Po terraform plan należy dodać uruchomienie terraform summary</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Terraform Plan Summary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> sgametrio/terraform</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">summary</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">action@main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">log-file</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> env.WORKING_DIR </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/terraform_plan_output.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">title</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Terraform Plan Summary'</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="Podsumowanie zmian Terraform w GitHub Actions" src="https://blog.justcloud.pl/assets/images/2025-12-08_20-28-11-64cfdc3eba50c04087cac560f080eafc.png" width="2076" height="1588" class="img_ev3q"></p>
<p>Poniżej znajdziesz kompletny przykład workflow wdrożeniowego:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'github-actions-terraform-summary'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'vm-test-02/**'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'.github/workflows/github-actions-terraform-summary.yml'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">workflow_dispatch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">permissions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">id-token</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> write</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">contents</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">WORKING_DIR</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'./vm-test-02'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">TF_VERSION</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'1.6.0'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">terraform-plan</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Terraform Plan'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Checkout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/checkout@v4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Setup Terraform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hashicorp/setup</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">terraform@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">terraform_version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> env.TF_VERSION </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Azure Login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> azure/login@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">client-id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_CLIENT_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">tenant-id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_TENANT_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">subscription-id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_SUBSCRIPTION_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Terraform Init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">working-directory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> env.WORKING_DIR </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_CLIENT_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_CLIENT_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_SUBSCRIPTION_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_SUBSCRIPTION_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_TENANT_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_TENANT_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_USE_OIDC</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> terraform init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Terraform Validate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">working-directory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> env.WORKING_DIR </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_CLIENT_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_CLIENT_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_SUBSCRIPTION_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_SUBSCRIPTION_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_TENANT_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_TENANT_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_USE_OIDC</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> terraform validate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Terraform Plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">working-directory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> env.WORKING_DIR </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_CLIENT_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_CLIENT_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_SUBSCRIPTION_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_SUBSCRIPTION_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_TENANT_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_TENANT_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_USE_OIDC</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> terraform plan </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">var</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">file="production.tfvars" </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> tee terraform_plan_output.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Terraform Plan Summary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> sgametrio/terraform</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">summary</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">action@main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">log-file</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> env.WORKING_DIR </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/terraform_plan_output.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">title</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Terraform Plan Summary'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">terraform-apply</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Terraform Apply'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">needs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> terraform</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">if</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> github.event_name == 'workflow_dispatch'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Checkout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/checkout@v4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Setup Terraform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hashicorp/setup</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">terraform@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">terraform_version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> env.TF_VERSION </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Azure Login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> azure/login@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">client-id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_CLIENT_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">tenant-id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_TENANT_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">subscription-id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_SUBSCRIPTION_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Terraform Init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">working-directory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> env.WORKING_DIR </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_CLIENT_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_CLIENT_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_SUBSCRIPTION_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_SUBSCRIPTION_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_TENANT_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_TENANT_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_USE_OIDC</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> terraform init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Terraform Apply</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">working-directory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> env.WORKING_DIR </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_CLIENT_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_CLIENT_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_SUBSCRIPTION_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_SUBSCRIPTION_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_TENANT_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_TENANT_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ARM_USE_OIDC</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> terraform apply </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">var</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">file="production.tfvars" </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">auto</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">approve</span><br></span></code></pre></div></div>
<p>Po rozwinięciu sekcji w podsumowaniu, możemy zobaczyć szczegóły zmian bez konieczności wchodzenia w logi konkretnego kroku. W powyższym przykładzie wykorzystałem logowanie do Azure za pomocą OIDC. Jeśli chcesz dowiedzieć się, jak to skonfigurować, zajrzyj do mojego artykułu: <a href="https://blog.justcloud.pl/2025/11/20/github-actions-oidc-federation-azure" target="_blank" rel="noopener noreferrer" class="">Bezpieczne wdrażanie do Azure z GitHub Actions: Konfiguracja OIDC</a></p>
<p><img decoding="async" loading="lazy" alt="Szczegółowy widok zmian Terraform" src="https://blog.justcloud.pl/assets/images/2025-12-08_20-29-00-be5e6ff0e3670d384f9944e8b9415085.png" width="2806" height="1952" class="img_ev3q"></p>
<p>Taki widok bezpośrednio w pipeline pozwala na szybką weryfikację planowanych zmian.</p>
<p><strong>Ważna uwaga:</strong>
Wtyczka świetnie sprawdza się w większości przypadków, ale warto przetestować ją w swoim środowisku. Zauważyłem, że przy błędach krytycznych (np. <code>Error:</code> czy inne błędy providera), output może zostać źle sparsowany i pokazać 0 zmian, mimo błędu. Miej to na uwadze przy konfiguracji.</p>
<p>Jeśli interesuje Cię wdrożenie podobnych rozwiązań, daj znać w komentarzu!</p>]]></content>
        <author>
            <name>Piotr Rogala</name>
            <uri>https://github.com/RogalaPiotr</uri>
        </author>
        <category label="github" term="github"/>
        <category label="actions" term="actions"/>
        <category label="terraform" term="terraform"/>
        <category label="azure" term="azure"/>
        <category label="devops" term="devops"/>
        <category label="terraform summary" term="terraform summary"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Bezpieczne wdrażanie do Azure z GitHub Actions: Konfiguracja OIDC]]></title>
        <id>https://blog.justcloud.pl/2025/11/20/github-actions-oidc-federation-azure</id>
        <link href="https://blog.justcloud.pl/2025/11/20/github-actions-oidc-federation-azure"/>
        <updated>2025-11-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Poradnik krok po kroku: Jak skonfigurować bezpieczne połączenie GitHub Actions z Azure używając OIDC i Azure CLI. Pozbądź się haseł i kluczy!]]></summary>
        <content type="html"><![CDATA[<p>Chcesz skonfigurować bezpieczny dostęp do Microsoft Azure z poziomu GitHub Actions dla wdrożeń infrastruktury i aplikacji? Jeśli tak, to ten przewodnik jest dla Ciebie. Pokażę Ci, jak to zrobić krok po kroku, wykorzystując Azure CLI.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="dlaczego-oidc">Dlaczego OIDC?<a href="https://blog.justcloud.pl/2025/11/20/github-actions-oidc-federation-azure#dlaczego-oidc" class="hash-link" aria-label="Bezpośredni link do Dlaczego OIDC?" title="Bezpośredni link do Dlaczego OIDC?" translate="no">​</a></h2>
<p>Dlaczego to rozwiązanie jest bezpieczniejsze od tradycyjnego Service Principal z kluczem (secret)? Ponieważ <strong>nie tworzymy konta z hasłem</strong>, które trzeba rotować i chronić przed wyciekiem.</p>
<p>Mechanizm ten działa na zasadzie <strong>Workload Identity Federation</strong>. Polega on na powiązaniu obiektu Service Principal w Azure z konkretnym repozytorium GitHub. Dzięki protokołowi OIDC (OpenID Connect), GitHub wymienia swój token tożsamości na krótko żyjący token dostępu do Azure.</p>
<p>Więcej o tym mechanizmie przeczytasz w <a href="https://learn.microsoft.com/entra/workload-id/workload-identity-federation-create-trust?WT.mc_id=AZ-MVP-5002690" target="_blank" rel="noopener noreferrer" class="">dokumentacji Microsoft</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="wymagania">Wymagania<a href="https://blog.justcloud.pl/2025/11/20/github-actions-oidc-federation-azure#wymagania" class="hash-link" aria-label="Bezpośredni link do Wymagania" title="Bezpośredni link do Wymagania" translate="no">​</a></h2>
<p>Do wykonania poniższych kroków będziesz potrzebować Azure CLI.</p>
<ul>
<li class=""><strong>Co to jest Azure CLI?</strong>: <a href="https://learn.microsoft.com/cli/azure/what-is-azure-cli?view=azure-cli-latest&amp;WT.mc_id=AZ-MVP-5002690" target="_blank" rel="noopener noreferrer" class="">Wprowadzenie</a></li>
<li class=""><strong>Instalacja</strong>: <a href="https://learn.microsoft.com/cli/azure/install-azure-cli?view=azure-cli-latest&amp;WT.mc_id=AZ-MVP-5002690" target="_blank" rel="noopener noreferrer" class="">Instrukcja instalacji</a></li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="konfiguracja-krok-po-kroku">Konfiguracja krok po kroku<a href="https://blog.justcloud.pl/2025/11/20/github-actions-oidc-federation-azure#konfiguracja-krok-po-kroku" class="hash-link" aria-label="Bezpośredni link do Konfiguracja krok po kroku" title="Bezpośredni link do Konfiguracja krok po kroku" translate="no">​</a></h2>
<p>Po zalogowaniu się do Azure (<code>az login</code>), wykonaj poniższe polecenia w terminalu. Dla wygody możesz też użyć Cloud Shell dostępnego w Azure Portal.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-tworzenie-aplikacji-i-service-principal">1. Tworzenie aplikacji i Service Principal<a href="https://blog.justcloud.pl/2025/11/20/github-actions-oidc-federation-azure#1-tworzenie-aplikacji-i-service-principal" class="hash-link" aria-label="Bezpośredni link do 1. Tworzenie aplikacji i Service Principal" title="Bezpośredni link do 1. Tworzenie aplikacji i Service Principal" translate="no">​</a></h3>
<p>Najpierw utworzymy App Registration oraz Service Principal.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Tworzymy App Registration i pobieramy appId</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az ad app create --display-name "gh-action-private" --query "appId" -o tsv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># UWAGA: Skopiuj wyświetlony appId. Będzie on używany w kolejnych komendach jako [appId].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Tworzymy Service Principal dla aplikacji</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az ad sp create --id [appId]</span><br></span></code></pre></div></div>
<p>Pierwsza komenda utworzy nowy obiekt <strong>App Registration</strong> w Microsoft Entra ID.</p>
<p><img decoding="async" loading="lazy" alt="Wynik polecenia tworzenia App Registration w terminalu" src="https://blog.justcloud.pl/assets/images/2025-12-03_21-44-22-686bc7e067b6183589a9c27a47dc66dd.png" width="2264" height="1164" class="img_ev3q"></p>
<p>Druga komenda utworzy obiekt <strong>Enterprise Application</strong> (Service Principal) o tej samej nazwie.</p>
<p><img decoding="async" loading="lazy" alt="Widok Enterprise Application w portalu Azure" src="https://blog.justcloud.pl/assets/images/2025-12-07_23-36-17-33c0336f366aa178ee33b7c165976081.png" width="1412" height="946" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-nadawanie-uprawnień">2. Nadawanie uprawnień<a href="https://blog.justcloud.pl/2025/11/20/github-actions-oidc-federation-azure#2-nadawanie-uprawnie%C5%84" class="hash-link" aria-label="Bezpośredni link do 2. Nadawanie uprawnień" title="Bezpośredni link do 2. Nadawanie uprawnień" translate="no">​</a></h3>
<p>Po utworzeniu tożsamości, musimy nadać jej uprawnienia do subskrypcji. W tym przykładzie użyjemy roli <strong>Contributor</strong>.</p>
<blockquote>
<p><strong>Dobra praktyka:</strong> Jestem zwolennikiem nadawania najniższych możliwych uprawnień (Least Privilege). Jednak dla ogólnych wdrożeń infrastruktury, rola Contributor na poziomie subskrypcji jest często niezbędnym minimum.</p>
</blockquote>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Podmień [appId] na ID z poprzedniego kroku oraz wpisz swoje ID subskrypcji</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az role assignment create --assignee [appId] --role Contributor --scope /subscriptions/[TWOJE_SUBSCRIPTION_ID]</span><br></span></code></pre></div></div>
<p>Nadane uprawnienia możesz sprawdzić w portalu Azure, wchodząc w Subskrypcję -&gt; IAM -&gt; Role Assignments.</p>
<p><img decoding="async" loading="lazy" alt="Weryfikacja przypisania roli Contributor w portalu Azure" src="https://blog.justcloud.pl/assets/images/2025-12-03_21-36-39-c0be36da6463490f0e06ccb8178dc8a3.png" width="1852" height="1420" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-konfiguracja-federacji-oidc">3. Konfiguracja federacji (OIDC)<a href="https://blog.justcloud.pl/2025/11/20/github-actions-oidc-federation-azure#3-konfiguracja-federacji-oidc" class="hash-link" aria-label="Bezpośredni link do 3. Konfiguracja federacji (OIDC)" title="Bezpośredni link do 3. Konfiguracja federacji (OIDC)" translate="no">​</a></h3>
<p>Teraz najważniejszy krok – powiązanie aplikacji Azure z repozytorium GitHub.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Podmień [appId] oraz [NAZWA_TWOJEGO_REPO] (format: Użytkownik/Repozytorium)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az ad app federated-credential create --id [appId] --parameters '{"name": "gh-action-private", "issuer": "https://token.actions.githubusercontent.com", "subject": "repo:RogalaPiotr/[NAZWA_TWOJEGO_REPO]:ref:refs/heads/main", "description": "OIDC federacja dla GitHub Actions repo [NAZWA_TWOJEGO_REPO]", "audiences": ["api://AzureADTokenExchange"]}'</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="Potwierdzenie utworzenia federacji w terminalu" src="https://blog.justcloud.pl/assets/images/2025-12-03_21-41-04-d023d0eb308ff7a3d818dce562fe6c71.png" width="2934" height="830" class="img_ev3q"></p>
<p>W sekcji App Registration możesz zweryfikować poprawność utworzonej federacji:</p>
<p><img decoding="async" loading="lazy" alt="Weryfikacja federacji w portalu Azure" src="https://blog.justcloud.pl/assets/images/2025-12-03_21-47-21-49820d537722b2410b97d227547ca7ff.png" width="2732" height="1392" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-pobranie-danych-app-registration">4. Pobranie danych App Registration<a href="https://blog.justcloud.pl/2025/11/20/github-actions-oidc-federation-azure#4-pobranie-danych-app-registration" class="hash-link" aria-label="Bezpośredni link do 4. Pobranie danych App Registration" title="Bezpośredni link do 4. Pobranie danych App Registration" translate="no">​</a></h3>
<p>Aby skonfigurować GitHub Actions, potrzebujemy trzech wartości: <code>Client ID</code>, <code>Tenant ID</code> oraz <code>Subscription ID</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Pobierz Client ID (Application ID) - jeśli zgubiłeś</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az ad app show --id [appId] --query "appId" -o tsv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Pobierz Tenant ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az account show --query tenantId -o tsv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Subscription ID masz już z kroku 2.</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="5-konfiguracja-github">5. Konfiguracja GitHub<a href="https://blog.justcloud.pl/2025/11/20/github-actions-oidc-federation-azure#5-konfiguracja-github" class="hash-link" aria-label="Bezpośredni link do 5. Konfiguracja GitHub" title="Bezpośredni link do 5. Konfiguracja GitHub" translate="no">​</a></h3>
<p>Przejdź teraz do swojego repozytorium na GitHub. Wejdź w <strong>Settings</strong> -&gt; <strong>Secrets and variables</strong> -&gt; <strong>Actions</strong> i dodaj następujące sekrety (Repository secrets):</p>
<ul>
<li class=""><code>AZURE_CLIENT_ID</code> – Twój Application ID</li>
<li class=""><code>AZURE_TENANT_ID</code> – Twój Tenant ID</li>
<li class=""><code>AZURE_SUBSCRIPTION_ID</code> – ID subskrypcji, do której nadałeś uprawnienia (w naszym przypadku Contributor)</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Konfiguracja sekretów w ustawieniach repozytorium GitHub" src="https://blog.justcloud.pl/assets/images/2025-12-03_21-45-42-136d03bed420e97e7343d19a45ce2d78.png" width="2668" height="1610" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="6-testowy-pipeline">6. Testowy Pipeline<a href="https://blog.justcloud.pl/2025/11/20/github-actions-oidc-federation-azure#6-testowy-pipeline" class="hash-link" aria-label="Bezpośredni link do 6. Testowy Pipeline" title="Bezpośredni link do 6. Testowy Pipeline" translate="no">​</a></h3>
<p>Jeśli wszystko jest skonfigurowane, możemy utworzyć testowy workflow, aby sprawdzić połączenie.</p>
<p>Utwórz plik <code>.github/workflows/github-actions-test-oidc-federation.yml</code>:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'github-actions-test-oidc-federation'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'.github/workflows/github-actions-test-oidc-federation.yml'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'.github/workflows/github-actions-test-oidc-federation.yml'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">workflow_dispatch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">permissions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">id-token</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> write </span><span class="token comment" style="color:#999988;font-style:italic"># Wymagane do działania OIDC!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">contents</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">azure-login-test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Checkout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/checkout@v4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Azure Login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> azure/login@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">client-id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_CLIENT_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">tenant-id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_TENANT_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">subscription-id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.AZURE_SUBSCRIPTION_ID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Show Azure Account</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> az account show</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> List Resource Groups</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> az group list </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">output table</span><br></span></code></pre></div></div>
<p>Jeśli pipeline zakończy się sukcesem, zobaczysz listę grup zasobów w logach.</p>
<p><img decoding="async" loading="lazy" alt="Pomyślne wykonanie workflow w GitHub Actions" src="https://blog.justcloud.pl/assets/images/2025-12-07_23-22-38-16484a1d8261cfa3cabb2b945606179b.png" width="2094" height="2686" class="img_ev3q"></p>
<p>Jeśli pipeline nie działa, upewnij się, że:</p>
<ol>
<li class="">Sekrety w GitHub są poprawne.</li>
<li class="">Rola na subskrypcji została poprawnie nadana.</li>
<li class="">Subject w federacji (<code>repo:Użytkownik/Repo:ref:refs/heads/main</code>) dokładnie odpowiada Twojemu repozytorium i gałęzi.</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="przydatne-linki">Przydatne linki<a href="https://blog.justcloud.pl/2025/11/20/github-actions-oidc-federation-azure#przydatne-linki" class="hash-link" aria-label="Bezpośredni link do Przydatne linki" title="Bezpośredni link do Przydatne linki" translate="no">​</a></h2>
<ul>
<li class=""><strong>Azure:</strong> <a href="https://learn.microsoft.com/entra/workload-id/workload-identity-federation-create-trust?WT.mc_id=AZ-MVP-5002690" target="_blank" rel="noopener noreferrer" class="">Configure a federated identity credential</a></li>
<li class=""><strong>GitHub:</strong> <a href="https://docs.github.com/en/actions/concepts/security/openid-connect" target="_blank" rel="noopener noreferrer" class="">OIDC for Actions</a></li>
<li class=""><strong>GitHub Action:</strong> <a href="https://github.com/marketplace/actions/azure-login" target="_blank" rel="noopener noreferrer" class="">Azure Login</a></li>
<li class=""><strong>RBAC:</strong> <a href="https://learn.microsoft.com/azure/role-based-access-control/built-in-roles/privileged?WT.mc_id=AZ-MVP-5002690#contributor" target="_blank" rel="noopener noreferrer" class="">Built-in roles (Contributor)</a></li>
</ul>
<p>Jeśli interesuje Cię wdrożenie konkretnych usług lub masz pytania, daj znać w komentarzu!</p>]]></content>
        <author>
            <name>Piotr Rogala</name>
            <uri>https://github.com/RogalaPiotr</uri>
        </author>
        <category label="azure" term="azure"/>
        <category label="github-actions" term="github-actions"/>
        <category label="devops" term="devops"/>
        <category label="security" term="security"/>
        <category label="tutorial" term="tutorial"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Szybkie wdrożenie Azure OpenAI z Terraform i AVM]]></title>
        <id>https://blog.justcloud.pl/deployment-azure-openai-terraform-avm</id>
        <link href="https://blog.justcloud.pl/deployment-azure-openai-terraform-avm"/>
        <updated>2025-10-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Dowiedz się, jak szybko wdrożyć usługę Azure OpenAI Service przy użyciu Terraform i modułów Azure Verified Modules (AVM). Gotowy kod i instrukcja.]]></summary>
        <content type="html"><![CDATA[<p>Moduły AVM (Azure Verified Modules) oferują gotowe i sprawdzone rozwiązania do tworzenia zasobów w Azure. Poniżej pokażę, jak błyskawicznie wdrożyć usługę Azure OpenAI Service przy użyciu Terraform. Prezentowana konfiguracja korzysta z publicznego dostępu sieciowego, co jest odpowiednie do testów i nauki (w środowiskach produkcyjnych zaleca się wdrożenie przy użyciu Private Endpoints).</p>
<ul>
<li class=""><strong>Link do modułu:</strong> <a href="https://registry.terraform.io/modules/Azure/avm-res-cognitiveservices-account/azurerm/latest" target="_blank" rel="noopener noreferrer" class="">avm-res-cognitiveservices-account</a></li>
<li class=""><strong>Więcej modeli AVM:</strong> <a href="https://azure.github.io/Azure-Verified-Modules/indexes/terraform/tf-resource-modules/" target="_blank" rel="noopener noreferrer" class="">Azure Verified Modules</a></li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="jak-tego-użyć">Jak tego użyć?<a href="https://blog.justcloud.pl/deployment-azure-openai-terraform-avm#jak-tego-u%C5%BCy%C4%87" class="hash-link" aria-label="Bezpośredni link do Jak tego użyć?" title="Bezpośredni link do Jak tego użyć?" translate="no">​</a></h2>
<p>W pliku <code>main.tf</code> definiujemy grupę zasobów oraz wywołujemy moduł AVM:</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource "azurerm_resource_group" "this" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name     = var.resource_group_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  location = var.location</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = var.tags</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module "openai" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  source  = "Azure/avm-res-cognitiveservices-account/azurerm"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  version = "~&gt; 0.7"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name                = var.openai_service_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  resource_group_name = azurerm_resource_group.this.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  location            = azurerm_resource_group.this.location</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kind                = "OpenAI"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sku_name            = "S0"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cognitive_deployments = { for d in var.openai_models : d.deployment_name =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name = d.deployment_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      format  = "OpenAI"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name    = d.model_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      version = d.model_version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scale = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type     = d.sku_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      capacity = d.sku_capacity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  } }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public_network_access_enabled      = var.public_network_access == "Enabled"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  outbound_network_access_restricted = !var.outbound_network_access_enabled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = var.tags</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  depends_on = [azurerm_resource_group.this]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Pełny kod źródłowy znajdziesz w moim repozytorium GitHub: <a href="https://github.com/RogalaPiotr/JustCloudPublic/tree/master/simple-openai-terraform" target="_blank" rel="noopener noreferrer" class="">simple-openai-terraform</a>. Udostępniłem tam kompletną konfigurację gotową do przetestowania w Twoim środowisku. Wykorzystanie modułu AVM znacząco upraszcza proces wdrażania i ułatwia późniejszą rozbudowę o dodatkowe funkcje bezpieczeństwa czy nowe modele.</p>
<p>Poniżej widok Azure AI Foundry po wdrożeniu wraz z dwoma modelami:</p>
<p><img decoding="async" loading="lazy" alt="Azure AI Foundry" src="https://blog.justcloud.pl/assets/images/2025-11-20_22-15-22-80c75e4d3125eec6e7d06b4fa7c10cdd.png" width="3196" height="1208" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="weryfikacja-dostępnych-modeli">Weryfikacja dostępnych modeli<a href="https://blog.justcloud.pl/deployment-azure-openai-terraform-avm#weryfikacja-dost%C4%99pnych-modeli" class="hash-link" aria-label="Bezpośredni link do Weryfikacja dostępnych modeli" title="Bezpośredni link do Weryfikacja dostępnych modeli" translate="no">​</a></h2>
<p>Dostępność modeli w danym regionie warto zweryfikować przy użyciu Azure CLI. Poniższa komenda wyświetli listę modeli dla wdrożonego zasobu:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">az cognitiveservices account list-models \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --resource-group rg-openai-simple-dev \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --name oai-simple-dev \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --output table</span><br></span></code></pre></div></div>
<p>Komenda zwraca czytelną tabelę z informacjami. Jest to bardzo przydatne, ponieważ dostępność wersji modeli różni się w zależności od regionu Azure. Możesz to również sprawdzić w <a href="https://learn.microsoft.com/azure/ai-foundry/foundry-models/concepts/models-sold-directly-by-azure?view=foundry-classic&amp;WT.mc_id=AZ-MVP-5002690" target="_blank" rel="noopener noreferrer" class="">oficjalnej dokumentacji</a>.</p>
<p><img decoding="async" loading="lazy" alt="Lista modeli w CLI" src="https://blog.justcloud.pl/assets/images/2025-11-20_22-13-27-4a273456b7f2298ad4d140df36635c3f.png" width="1804" height="1054" class="img_ev3q"></p>
<p>Jeśli interesuje Cię wdrożenie prywatnej i bezpiecznej instancji OpenAI, daj znać w komentarzu!</p>]]></content>
        <author>
            <name>Piotr Rogala</name>
            <uri>https://github.com/RogalaPiotr</uri>
        </author>
        <category label="Azure" term="Azure"/>
        <category label="Terraform" term="Terraform"/>
        <category label="OpenAI" term="OpenAI"/>
        <category label="AVM" term="AVM"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Co oznaczają mnożniki 1x, 0.33x, 0x w GitHub Copilot?]]></title>
        <id>https://blog.justcloud.pl/github-copilot-mnozniki-wyjasnienie</id>
        <link href="https://blog.justcloud.pl/github-copilot-mnozniki-wyjasnienie"/>
        <updated>2025-09-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Dowiedz się, co oznaczają mnożniki 1x, 0.33x, 0x w GitHub Copilot. Zrozum, jak działają kredyty i które modele są darmowe, aby efektywnie zarządzać kosztami.]]></summary>
        <content type="html"><![CDATA[<p>Zastanawiałeś się, co oznaczają mnożniki <code>1x</code>, <code>0.33x</code>, <code>0x</code> widoczne przy modelach GitHub Copilot w Visual Studio Code? Wyjaśnijmy, co się za nimi kryje.</p>
<p><img decoding="async" loading="lazy" alt="Zrzut ekranu przedstawiający listę modeli w GitHub Copilot" src="https://blog.justcloud.pl/assets/images/Greenshot%202025-10-23%2020.24.19-1f654020e72965c3709bcf108df9a696.png" width="451" height="464" class="img_ev3q"></p>
<p>Mnożniki te określają „koszt” użycia danego modelu, który jest rozliczany z puli dostępnych kredytów na Twoim koncie GitHub Copilot. Kredyty to jednostki, które zużywasz, wysyłając zapytania do różnych modeli AI.</p>
<p>Jeśli korzystasz z planu, który ma ograniczoną liczbę kredytów, wybór modelu ma kluczowe znaczenie.</p>
<ul>
<li class="">Modele z mnożnikiem <code>0x</code> są <strong>darmowe</strong> i nie zużywają Twoich kredytów. Pamiętaj jednak, że mogą oferować odpowiedzi niższej jakości w porównaniu do płatnych modeli.</li>
<li class="">Modele z wyższym mnożnikiem, np. <code>1x</code> czy <code>0.33x</code>, zużywają kredyty proporcjonalnie do podanej wartości, ale zazwyczaj dostarczają bardziej zaawansowane i precyzyjne odpowiedzi.</li>
</ul>
<p>Wybierając model, decydujesz, czy wolisz oszczędzać kredyty, czy uzyskać jak najlepszą pomoc od AI.</p>
<p>Nie wiesz, gdzie sprawdzić, ile zapytań (requestów) Ci jeszcze zostało? Poniżej zrzut ekranu z podpowiedzią.</p>
<p><img decoding="async" loading="lazy" alt="Zrzut ekranu przedstawiający GitHub Copilot requests" src="https://blog.justcloud.pl/assets/images/Greenshot%202025-10-23%2020.24.07-2c951402f91bd9117e759aa35427999c.png" width="446" height="468" class="img_ev3q"></p>
<p>Mam nadzieję, że teraz wszystko jest jasne. Daj znać, czy się przydało! 💪</p>]]></content>
        <author>
            <name>Piotr Rogala</name>
            <uri>https://github.com/RogalaPiotr</uri>
        </author>
        <category label="GitHub Copilot" term="GitHub Copilot"/>
        <category label="VS Code" term="VS Code"/>
        <category label="AI" term="AI"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Push protection w GitHub przed opublikowaniem haseł]]></title>
        <id>https://blog.justcloud.pl/github push protection leak credentials</id>
        <link href="https://blog.justcloud.pl/github push protection leak credentials"/>
        <updated>2023-09-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[GitHub push protection chroni przed przypadkowym ujawnieniem haseł, kluczy API i tokenów. Zwiększ bezpieczeństwo repozytorium — sprawdź jak!]]></summary>
        <content type="html"><![CDATA[<p>GitHub, jako wiodąca platforma zarządzania kodem, stale wprowadza nowe funkcje, by zapewnić bezpieczne środowisko dla repozytoriów organizacyjnych i projektów prywatnych. Jednym z najnowszych ulepszeń jest funkcja "Ochrona przed przesyłaniem do repozytoriów i organizacji" ("Push protection for repositories and organizations"), która przynosi liczne korzyści dla programistów, inżynierów chmury oraz zespołów DevOps.</p>
<p>W tym artykule szczegółowo omówimy, jak ta innowacyjna funkcja wpływa na Twoje repozytorium na GitHubie i jak możesz czerpać z niej korzyści.</p>
<p>Czym jest "<strong>Push protection for repositories and organizations</strong>"?</p>
<p>"Ochrona przed przesyłaniem do repozytoriów i organizacji" to narzędzie, które zapewnia zabezpieczenie przed nieautoryzowanymi modyfikacjami Twojego repozytorium na GitHubie. Rozwiązanie działa zarówno na poziomie organizacji, chroniąc wszystkie repozytoria w jej strukturach, jak i na poziomie indywidualnym. Ochrona ta identyfikuje potencjalnie wrażliwe dane, takie jak klucze API, hasła czy tokeny dostępowe, które mogą być nieświadomie przesyłane do repozytoriów.</p>
<p>Co ta funkcja zmienia w Twoim repozytorium?</p>
<ol>
<li class=""><strong>Wykrywanie i blokowanie przesyłania poufnych danych:</strong> GitHub automatycznie wykrywa poufne dane w przesyłanych plikach, takie jak hasła, klucze API czy tokeny dostępowe. Przesyłanie takich danych do repozytorium jest powszechnym błędem, który może skutkować naruszeniem bezpieczeństwa. Funkcja "Ochrona przed przesyłaniem" skutecznie blokuje takie próby, redukując potencjalne zagrożenia.</li>
<li class=""><strong>Powiadamianie o potencjalnych naruszeniach:</strong> W przypadku wykrycia próby przesyłania poufnych danych, GitHub informuje odpowiednich właścicieli repozytorium lub zespoły bezpieczeństwa o zdarzeniu. Pomaga to w szybkim wykrywaniu i reagowaniu na potencjalne zagrożenia.</li>
<li class=""><strong>Personalizacja ochrony na różnych poziomach:</strong> Dzięki tej funkcji użytkownicy mogą dostosować poziom ochrony zarówno na poziomie pojedynczego repozytorium, jak i organizacji. Można zdecydować, czy włączyć niestandardowe reguły ochrony oraz które typy wrażliwych danych zablokować. Daje to pełną kontrolę nad bezpieczeństwem projektów.</li>
</ol>
<p>Jak skorzystać z "<strong>Push protection for repositories and organizations</strong>"?</p>
<p>Aby włączyć funkcję "Ochrona przed przesyłaniem" dla swojego profilu na GitHubie, wykonaj poniższe kroki:</p>
<ol>
<li class="">Przejdź do ustawień swojego profilu na GitHubie.</li>
<li class="">Wybierz zakładkę "Code security and analysis".</li>
<li class="">W sekcji "Push protection for yourself" wybierz opcję "Enable"</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Zrzut ekranu przedstawiający konfigurację ochrony push w GitHubie" src="https://blog.justcloud.pl/assets/images/2023-09-04_13-43-26-ebd5707f6de2a93b68a3d8e9c9e29094.png" width="4136" height="2520" class="img_ev3q"></p>
<aside><p><strong>💡 Dodatkowo, tę funkcję można skonfigurować w podobny sposób dla całej organizacji.</strong></p></aside>
<p>Natomiast jeśli chcesz skonfigurować tę funkcję na poziomie repozytorium, wykonaj następujące kroki:</p>
<ol>
<li class="">Przejdź do ustawień swojego repozytorium na GitHubie.</li>
<li class="">Wybierz zakładkę "Security" (Bezpieczeństwo).</li>
<li class="">W sekcji "Push protection" (Ochrona przed przesyłaniem) skonfiguruj preferowane ustawienia ochrony. Możesz zdecydować, które typy wrażliwych danych zablokować oraz czy chcesz włączyć powiadomienia o naruszeniach dla właściciela repozytorium lub zespołów bezpieczeństwa.</li>
<li class="">Zapisz zmiany.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Zrzut ekranu przedstawiający ustawienia ochrony push w repozytorium GitHub" src="https://blog.justcloud.pl/assets/images/2023-09-04_13-53-10-7caa548baf020c2192bcc88d0b0e689e.png" width="3230" height="3060" class="img_ev3q"></p>
<p>Link do pełnej dokumentacji:</p>
<ul>
<li class=""><a href="https://docs.github.com/en/enterprise-cloud@latest/code-security/secret-scanning/push-protection-for-repositories-and-organizations" target="_blank" rel="noopener noreferrer" class="">Link do dokumentacji GitHub</a></li>
</ul>
<p>Jeśli masz jakieś pytania, zachęcam do zadawania ich w komentarzach 🙂.</p>]]></content>
        <author>
            <name>Piotr Rogala</name>
            <uri>https://github.com/RogalaPiotr</uri>
        </author>
        <category label="GitHub" term="GitHub"/>
        <category label="push protection" term="push protection"/>
        <category label="bezpieczeństwo" term="bezpieczeństwo"/>
        <category label="repozytorium" term="repozytorium"/>
        <category label="ochrona danych" term="ochrona danych"/>
        <category label="DevOps" term="DevOps"/>
        <category label="chmura" term="chmura"/>
        <category label="klucze API" term="klucze API"/>
        <category label="hasła" term="hasła"/>
        <category label="tokeny dostępowe" term="tokeny dostępowe"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Jak wdrożyć Azure Pipeline agenta?]]></title>
        <id>https://blog.justcloud.pl/how to deploy azure pipelines agent</id>
        <link href="https://blog.justcloud.pl/how to deploy azure pipelines agent"/>
        <updated>2022-01-31T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Praktyczny przewodnik - jak wdrożyć własnego Azure Pipelines agenta na serwerze lub VM krok po kroku, ze skryptami, konfiguracją i wskazówkami bezpieczeństwa.]]></summary>
        <content type="html"><![CDATA[<p>Azure DevOps pozwala na wdrażanie rozwiązań za pośrednictwem agentów tzw. <a href="https://docs.microsoft.com/azure/devops/pipelines/agents/agents?view=azure-devops&amp;tabs=browser&amp;WT.mc_id=AZ-MVP-5002690#microsoft-hosted-agents" target="_blank" rel="noopener noreferrer" class="">"Microsoft-hosted"</a> przez 1800 minut (30 godzin) miesięcznie. Po przekroczeniu tego czasu nie możemy wykonywać deploymentów.</p>
<p>Można jednak dokupić nielimitowany dostęp do agenta za $40 miesięcznie lub korzystać ze swojego serwera, np. laptopa, instalując agenta — ta opcja wdrażania jest znana w dokumentacji jako <a href="https://docs.microsoft.com/azure/devops/pipelines/agents/agents?view=azure-devops&amp;tabs=browser&amp;WT.mc_id=AZ-MVP-5002690#install" target="_blank" rel="noopener noreferrer" class="">"Self-Hosted"</a>. Dodam tylko, że wykorzystywanie własnego laptopa do wdrażania nie jest rozwiązaniem produkcyjnym 🙃.</p>
<p>Strona z cenami Azure DevOps: (<a href="https://azure.microsoft.com/pricing/details/devops/azure-devops-services/?WT.mc_id=AZ-MVP-5002690" target="_blank" rel="noopener noreferrer" class="">https://azure.microsoft.com/pricing/details/devops/azure-devops-services/?WT.mc_id=AZ-MVP-5002690</a>)</p>
<p>Bardzo często słyszę pytanie: po co mi własny serwer do wdrażania?</p>
<!--$?--><template id="B:0"></template><!--/$-->
<p>Klasyczna odpowiedź: to zależy... Przy pracy nad pracą dyplomową lub projektem PoC dla znajomego można postawić agenta na swoim laptopie. Jeśli pracujecie w grupie kilku osób, najlepiej byłoby skorzystać z własnego serwera. Jeśli jesteście firmą dostarczającą rozwiązania, zdecydowanie warto rozważyć własny serwer lub zakup agentów "Microsoft-hosted" za $40, jeśli czas wdrażania przekracza 1800 minut miesięcznie. Jest jeszcze jedna sytuacja, kiedy warto wybrać własny serwer z agentami: wiele firm korzysta z prywatnych, kontrolowanych wewnętrznych sieci z ograniczonym dostępem z zewnątrz. Wdrożenie własnego serwera w takiej sieci pozwoli na łatwą komunikację z wdrożonymi rozwiązaniami na platformie Microsoft Azure oraz zwiększy bezpieczeństwo procesowanych danych. Pamiętajmy, że agent <a href="https://docs.microsoft.com/azure/devops/pipelines/agents/agents?view=azure-devops&amp;tabs=browser&amp;WT.mc_id=AZ-MVP-5002690#microsoft-hosted-agents" target="_blank" rel="noopener noreferrer" class="">"Microsoft-hosted"</a> to agent "publiczny", odizolowany od waszej sieci. <a href="https://docs.microsoft.com/azure/devops/pipelines/agents/agents?view=azure-devops&amp;tabs=browser&amp;WT.mc_id=AZ-MVP-5002690#install" target="_blank" rel="noopener noreferrer" class="">"Self-Hosted"</a> może zostać wdrożony jako agent odizolowany, ale można go również zintegrować z własną siecią.</p>
<p>Poniżej odsyłam was do dokumentacji, w której można dowiedzieć się więcej o możliwościach oferowanych przez Microsoft w zakresie agentów Azure Pipelines.</p>
<p><a href="https://docs.microsoft.com/azure/devops/pipelines/agents/agents?view=azure-devops&amp;tabs=browser&amp;WT.mc_id=AZ-MVP-5002690" target="_blank" rel="noopener noreferrer" class="">MS Docs - Azure Pipelines agents</a></p>
<p><img decoding="async" loading="lazy" src="https://docs.microsoft.com/en-us/azure/devops/pipelines/agents/media/agent-connections-devops.png?view=azure-devops" alt="Communication to deploy to target servers" class="img_ev3q"></p>
<p>Przechodzimy zatem do wdrożenia własnego serwera z agentem.</p>
<p>Przygotowałem ilustracje związane z całym projektem dla wdrożenia Azure Pipelines agent w oparciu o ten post oraz potrzebne materiały do jego wdrożenia.</p>
<p><img decoding="async" loading="lazy" alt="steps" src="https://blog.justcloud.pl/assets/images/image1-3a6b83b3327d3fd6856c50caffe8972a.jpg" width="2384" height="1677" class="img_ev3q"></p>
<ol>
<li class="">Linki - za pomocą tych linków macie dostęp do mojego przykładowego wdrożenia<!-- -->
<ol>
<li class="">Azure Repos: (<a href="https://dev.azure.com/justcloudpublic/_git/How%20to%20deploy%20ADO%20agent?path=/vm-azure-devops-self-hosted-agents" target="_blank" rel="noopener noreferrer" class="">https://dev.azure.com/justcloudpublic/_git/How%20to%20deploy%20ADO%20agent?path=/vm-azure-devops-self-hosted-agents</a>)</li>
<li class="">Azure Pipeline: (<a href="https://dev.azure.com/justcloudpublic/How%20to%20deploy%20ADO%20agent/_build?definitionId=2" target="_blank" rel="noopener noreferrer" class="">https://dev.azure.com/justcloudpublic/How%20to%20deploy%20ADO%20agent/_build?definitionId=2</a>)</li>
</ol>
</li>
</ol>
<p><a href="https://dev.azure.com/justcloudpublic/How%20to%20deploy%20ADO%20agent/_build/latest?definitionId=2&amp;branchName=main" target="_blank" rel="noopener noreferrer" class=""><img decoding="async" loading="lazy" src="https://dev.azure.com/justcloudpublic/How%20to%20deploy%20ADO%20agent/_apis/build/status/vm-azure-devops-self-hosted-agents?branchName=main" alt="Build Status" class="img_ev3q"></a></p>
<ol start="2">
<li class="">
<p>Skrypty</p>
<ol>
<li class="">Parametry</li>
<li class=""><a href="https://dev.azure.com/justcloudpublic/_git/How%20to%20deploy%20ADO%20agent?path=/vm-azure-devops-self-hosted-agents/scripts/azuredeploy.param.json&amp;version=GBmain&amp;_a=contents" target="_blank" rel="noopener noreferrer" class="">azuredeploy.param.json</a> - te parametry możesz przerobić lub zmienić tak, aby odpowiadały potrzebom wdrożenia. Ważne: te dane testowe są nadpisywane podczas deploymentu — sprawdź to w pliku: <a href="https://dev.azure.com/justcloudpublic/_git/How%20to%20deploy%20ADO%20agent?path=/vm-azure-devops-self-hosted-agents/pipelines/vm-azure-devops-self-hosted-agents-ci.yml&amp;version=GBmain&amp;_a=contents" target="_blank" rel="noopener noreferrer" class="">vm-azure-devops-self-hosted-agents-ci.yml</a> "overrideParameters".</li>
</ol>
</li>
<li class="">
<p>Opis zmiennych</p>
<ol>
<li class="">adminUsername [nazwa użytkownika]</li>
<li class="">adminPassword [hasło użytkownika]</li>
<li class="">dnsLabelPrefix (domyślnie ustawiany: generowany na podstawie ResourceGroup.Id) [publiczny DNS do połączenia RDP]</li>
<li class="">vmName [nazwa maszyny wirtualnej]</li>
<li class="">AccessIPNSG [IP, które zostanie dodane do reguły NSG dla dostępu RDP]</li>
<li class="">tag [domyślnie ustawiony: "Project: AzureDevOpsAgent"]</li>
<li class="">DiskForVM [StorageAccount lub Managed - wybór dysku dla wdrożenia maszyny wirtualnej]</li>
</ol>
</li>
</ol>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token property" style="color:#36acaa">"parameters"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"adminUsername"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"test-user"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"adminPassword"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"test-P@ssw0rd12345"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"vmName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ado-agents"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"AccessIPNSG"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"192.168.1.1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"tag"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"AzureDevOpsAgent"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"DiskForVM"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"StorageAccount"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<ol start="4">
<li class=""><a href="https://dev.azure.com/justcloudpublic/_git/How%20to%20deploy%20ADO%20agent?path=/vm-azure-devops-self-hosted-agents/scripts/createresourcegroup-adoagent.param.json&amp;version=GBmain&amp;_a=contents" target="_blank" rel="noopener noreferrer" class="">createresourcegroup-adoagent.param.json</a> - parametry definiujące grupę zasobów.</li>
</ol>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token property" style="color:#36acaa">"parameters"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"ResourceGroupLocation"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"westeurope"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"ResourceGroupName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"vm-azure-devops-self-hosted-agents"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"tag"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"key1"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Project"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"value1"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"AzureDevOpsAgent"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<ol start="5">
<li class="">
<p><a href="https://dev.azure.com/justcloudpublic/_git/How%20to%20deploy%20ADO%20agent?path=/vm-azure-devops-self-hosted-agents/scripts/script-post-configuration.ps1&amp;version=GBmain&amp;_a=contents" target="_blank" rel="noopener noreferrer" class="">script-post-configuration.ps1</a> - skrypt odpowiada za instalację agenta oraz przygotowanie potrzebnych paczek. Jeśli potrzebujesz doinstalować dodatkowe paczki, dodaj je w sekcji: # Install Packages - najprościej jest skorzystać z paczek choco: (<a href="https://docs.chocolatey.org/en-us/choco/commands/list" target="_blank" rel="noopener noreferrer" class="">https://docs.chocolatey.org/en-us/choco/commands/list</a>)</p>
</li>
<li class="">
<p>Opis zmiennych</p>
<ol>
<li class="">urlProjectADO [URL do projektu ADO]</li>
<li class="">auth (domyślnie ustawione: PAT) [metoda uwierzytelniania dla projektu ADO]</li>
<li class="">token [token bezpieczeństwa dla projektu ADO]</li>
<li class="">pool (domyślnie ustawione: default) [nazwa puli dla agenta w ADO]</li>
<li class="">agentname [domyślnie taka sama jak nazwa maszyny wirtualnej]</li>
<li class="">numberagents [domyślnie 1 - można wdrożyć od 1 do 20 agentów na jednym serwerze]</li>
<li class="">instalAddtionalPackages [domyślnie $true; instaluje wszystko, co potrzebne do prostego wdrożenia w Azure; jeśli potrzeba .NET itp., należy dodać ręcznie]</li>
</ol>
</li>
</ol>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">param(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Parameter(Mandatory = $true)][string] $urlProjectADO,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Parameter(Mandatory = $false)][string] $auth = "pat",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Parameter(Mandatory = $true)][string] $token,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Parameter(Mandatory = $false)][string] $pool,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Parameter(Mandatory = $false)][string] $agentname,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Parameter(Mandatory = $false)][ValidateRange(1, 20)][int] $numberagents = 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Parameter(Mandatory = $false)][bool] $instalAddtionalPackages = $true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">begin {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">process {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (!(Test-Path "c:\temp")) { $null = mkdir "c:\temp" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $log | % {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Install Additional Packages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if ($instalAddtionalPackages) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    # Install Packages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    [Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Install-PackageProvider -Name "Nuget" -Force</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    # FIX: WARNING: Not setting tab completion: Profile file does not exist at 'C:\Users\USER\Documents\WindowsPowerShell\Microsoft.PowerShellISE_profile.ps1'.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if (!(Test-Path -Path $PROFILE)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        New-Item -ItemType File -Path $PROFILE -Force</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    choco feature enable -n allowGlobalConfirmation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    choco install -y powershell-core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Start-Sleep 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    choco install -y azure-cli</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Start-Sleep 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    choco install -y az.powershell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Start-Sleep 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    choco install -y azcopy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Start-Sleep 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    choco install -y iiscrypto</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Start-Sleep 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    #Install AzureRM in Powershell 5.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe -Command "Install-Module -Name AzureRM -AllowClobber -Force -Confirm:`$false"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    # END Install Packages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                catch {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    throw $_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    break</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Get latest version install agent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            $getLatestVersion = Invoke-WebRequest https://api.github.com/repos/Microsoft/azure-pipelines-agent/releases/latest -UseBasicParsing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            $tag = ($getLatestVersion | ConvertFrom-Json)[0].tag_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            $tag = $tag.Substring(1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            $downloadInstallURL = "https://vstsagentpackage.azureedge.net/agent/$tag/vsts-agent-win-x64-$tag.zip"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Creating Pool in Azure DevOps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            $encodedPat = [System.Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes( ":$token"))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            $body = "{name:`"$pool`", autoProvision: `"true`"}"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (!($pool -match "default" -or $pool -match "Azure Pipelines" -or $((Invoke-WebRequest -Method GET -Uri "$urlProjectADO/_apis/distributedtask/pools?api-version=5.1" -UseBasicParsing -Headers @{Authorization = "Basic $encodedPat" }).content | ? { $_ -like "*$pool*" }))) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                $tmp = $(Invoke-WebRequest -Method POST -Uri "$urlProjectADO/_apis/distributedtask/pools?api-version=5.0-preview.1" -UseBasicParsing -Headers @{Authorization = "Basic $encodedPat" } -Body $body -ContentType "application/json") 2&gt;$null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Install agents</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            $filename = $urlProjectADO.Split('/')[-1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (!(Test-Path "c:\temp\$filename")) { Invoke-WebRequest -Uri $downloadInstallURL -OutFile "c:\temp\$filename" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for ($i = 1; $i -le $numberagents; $i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (!(Test-Path "c:\agent-$i")) { mkdir "c:\agent-$i" }else { rm c:\agent-$i -recurse -force; mkdir "c:\agent-$i" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Add-Type -AssemblyName System.IO.Compression.FileSystem ; [System.IO.Compression.ZipFile]::ExtractToDirectory("c:\temp\$filename", "c:\agent-$i")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ."c:\agent-$i\config.cmd" --unattended --url $urlProjectADO --auth $auth --token $token --pool $pool --agent "$agentname-$i" --runAsService</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } | Out-File "c:\temp\ADOagent-$((Get-Date).ToString("s").Replace(":","-")).log"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Remove-Item -Recurse -Force c:\temp -Exclude *.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    catch {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        throw $_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        break</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Write-Verbose "Successfully installed Azure DevOps Job Agents"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<ol start="7">
<li class="">Pipelines<!-- -->
<ol>
<li class=""><a href="https://dev.azure.com/justcloudpublic/_git/How%20to%20deploy%20ADO%20agent?path=/vm-azure-devops-self-hosted-agents/pipelines/vm-azure-devops-self-hosted-agents-ci.yml&amp;version=GBmain&amp;_a=contents" target="_blank" rel="noopener noreferrer" class="">vm-azure-devops-self-hosted-agents-ci.yml</a> - w tym pliku zdefiniuj dokładnie dane potrzebne do instalacji agentów — adres Twojego projektu ADO, nazwę puli oraz liczbę agentów. Grupa oznacza grupę Library w Azure DevOps, w której bezpiecznie przekazujemy poufne dane.</li>
</ol>
</li>
</ol>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">variables</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SPNName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Subscription-JustCloudPublic'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> location</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'westeurope'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> urlProjectADO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'https://justcloudpublic.visualstudio.com'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Default'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> numberagents</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'justcloudpublickeyvault'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<ol start="8">
<li class="">
<p>Wymagania - co potrzebujesz wiedzieć, zanim zaczniesz wdrażać:</p>
<ol>
<li class="">Subskrypcja Azure</li>
<li class="">PAT — Personal Access Token — (<a href="https://docs.microsoft.com/azure/devops/organizations/accounts/use-personal-access-tokens-to-authenticate?view=azure-devops&amp;tabs=Windows&amp;WT.mc_id=AZ-MVP-5002690#create-a-pat" target="_blank" rel="noopener noreferrer" class="">https://docs.microsoft.com/azure/devops/organizations/accounts/use-personal-access-tokens-to-authenticate?view=azure-devops&amp;tabs=Windows&amp;WT.mc_id=AZ-MVP-5002690#create-a-pat</a>)</li>
<li class="">Key Vault — (<a href="https://docs.microsoft.com/azure/devops/pipelines/release/azure-key-vault?view=azure-devops&amp;WT.mc_id=AZ-MVP-5002690" target="_blank" rel="noopener noreferrer" class="">https://docs.microsoft.com/azure/devops/pipelines/release/azure-key-vault?view=azure-devops&amp;WT.mc_id=AZ-MVP-5002690</a>)</li>
</ol>
</li>
</ol>
<p>Po wdrożeniu:</p>
<ol>
<li class="">Azure DevOps agents
<img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/2022-02-26_20-11-11-8336992a7ceb667eb0794480828457e2.jpg" width="1920" height="553" class="img_ev3q"></li>
<li class="">Azure Portal
<img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/2022-02-27_21-35-04-e358992489d465be62c5d0c4e66934de.jpg" width="2240" height="1394" class="img_ev3q"></li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="instruktaż-video">Instruktaż video<a href="https://blog.justcloud.pl/how%20to%20deploy%20azure%20pipelines%20agent#instrukta%C5%BC-video" class="hash-link" aria-label="Bezpośredni link do Instruktaż video" title="Bezpośredni link do Instruktaż video" translate="no">​</a></h2>
<!--$?--><template id="B:1"></template><!--/$-->
<p>Jeśli masz jakieś pytania, zapraszam do komentowania 🙂.</p>
<p>Artykuł dostępny również na Medium i LinkedIn:</p>
<ul>
<li class="">(EN) <a href="https://piotr-rogala.medium.com/7223953d2e1f" target="_blank" rel="noopener noreferrer" class="">https://piotr-rogala.medium.com/7223953d2e1f</a></li>
<li class="">(PL) <a href="https://www.linkedin.com/pulse/jak-wdro%25C5%25BCy%25C4%2587-azure-pipelines-agenta-piotr-rogala/" target="_blank" rel="noopener noreferrer" class="">https://www.linkedin.com/pulse/jak-wdro%25C5%25BCy%25C4%2587-azure-pipelines-agenta-piotr-rogala/</a></li>
</ul>]]></content>
        <author>
            <name>Piotr Rogala</name>
            <uri>https://github.com/RogalaPiotr</uri>
        </author>
        <category label="deploy" term="deploy"/>
        <category label="Azure" term="Azure"/>
        <category label="DevOps" term="DevOps"/>
        <category label="agent" term="agent"/>
        <category label="pipelines" term="pipelines"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Nowa odsłona bloga JustCloud]]></title>
        <id>https://blog.justcloud.pl/welcome</id>
        <link href="https://blog.justcloud.pl/welcome"/>
        <updated>2022-01-22T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Start nowego bloga o Microsoft Azure i chmurze. Dowiedz się o planach na 2022 rok, nowych aktywnościach w IT community i śledź rozwój JustCloud.]]></summary>
        <content type="html"><![CDATA[<p>Witaj na nowej odsłonie mojego bloga! Będę tu publikować artykuły poświęcone tematyce Microsoft Azure i szeroko pojętym technologiom chmurowym (Cloud) ☁️.</p>
<p>Mam nadzieję, że 2022 rok przyniesie wiele pozytywnych zmian i ciekawych projektów, którymi będę się tu dzielił. Zapraszam do regularnych odwiedzin i kontaktu.</p>
<p>Na start kilka ważnych linków:</p>
<ul>
<li class=""><a href="https://web.justcloud.pl/" target="_blank" rel="noopener noreferrer" class="">JustCloud ☁️ Page</a></li>
<li class=""><a href="https://blog.justcloud.pl/" target="_blank" rel="noopener noreferrer" class="">JustCloud ☁️ Blog</a></li>
</ul>
<p>W najbliższym czasie planuję również uzupełnić bloga o starsze wpisy.</p>
<p>Dziękuję i do zobaczenia w kolejnych postach!</p>
<p><img decoding="async" loading="lazy" src="https://images.unsplash.com/photo-1472898965229-f9b06b9c9bbe?ixlib=rb-1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=2070&amp;q=80" alt="Zdjęcie powitalne przedstawiające chmury" class="img_ev3q"></p>]]></content>
        <author>
            <name>Piotr Rogala</name>
            <uri>https://github.com/RogalaPiotr</uri>
        </author>
        <category label="JustCloud" term="JustCloud"/>
        <category label="Blog" term="Blog"/>
        <category label="Microsoft Azure" term="Microsoft Azure"/>
        <category label="Cloud" term="Cloud"/>
        <category label="IT Community" term="IT Community"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Przyspieszenie pracy nad tagowaniem zasobów za pomocą PowerShell - Tag raport Microsoft Azure]]></title>
        <id>https://blog.justcloud.pl/tags-in-azure</id>
        <link href="https://blog.justcloud.pl/tags-in-azure"/>
        <updated>2021-06-03T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Kompletny przewodnik po tagowaniu zasobów w Azure PowerShell, eksport CSV i automatyzacja dla małych i dużych środowisk.]]></summary>
        <content type="html"><![CDATA[<p>Kiedyś przygotowałem ten skrypt, żeby szybko móc otagować wiele zasobów wdrożonych na platformie Microsoft Azure. Jest kilka sposobów, aby to zrobić szybko i prosto; starałem się przygotować rozwiązanie uniwersalne, łatwe i bezpieczne w użyciu.</p>
<p>Dlatego postanowiłem zrobić jeden skrypt, który generuje wszystkie zasoby do pliku CSV. Drugi skrypt, na podstawie pliku CSV, pobiera dane zasobów i nadpisuje je na platformie.</p>
<p>Skrypty są dostępne na GitHub:</p>
<ul>
<li class=""><a href="https://github.com/RogalaPiotr/JustCloudPublic/tree/master/azure-tags-report" target="_blank" rel="noopener noreferrer" class="">https://github.com/RogalaPiotr/JustCloudPublic/tree/master/azure-tags-report</a></li>
</ul>
<p>Opis skryptów:</p>
<ul>
<li class="">GetAllTags.ps1 — generuje dwa pliki CSV: jeden dla Resource Group, a drugi dla Resources. Jest to istotne, ponieważ grupy i zasoby są rozdzielone, co pozwala tagować je niezależnie, bez wyszukiwania typów zasobów.</li>
<li class="">SetTagsResourceGroups.ps1 — skrypt, który pobiera dane z pliku CSV zawierającego spis Resource Group z tagami do wdrożenia.</li>
<li class="">SetTagsResources.ps1 — skrypt, który pobiera dane z pliku CSV, w którym zapisane są zasoby z tagami do wdrożenia.</li>
</ul>
<p>Taki podział daje nam:</p>
<ol>
<li class="">Zapis stanu obecnego tagów zapisanych do pliku CSV. Jest to raport tagów czyli obecny stan wdrożony tagów.</li>
<li class="">Podział na grupy i zasoby.</li>
<li class="">Możliwość poprawiania tagów tylko na zasobach lub tylko na grupach zasobów.</li>
</ol>
<p>Jak działają skrypty?</p>
<ol>
<li class="">GetAllTags</li>
</ol>
<ul>
<li class="">Zapis do pliku odbywa się automatycznie w lokalizacji, w której wykonujemy skrypt, lub można użyć opcji -path, aby wskazać miejsce zapisu plików.</li>
<li class="">Nazwa pliku zawiera datę — jeśli plik istnieje, zostanie on nadpisany.</li>
<li class="">Skrypt sprawdza, czy jesteś zalogowany do Azure. Podczas wykonywania skryptu możesz podać parametr -tenantId, aby mieć pewność, że logujesz się do odpowiedniego Azure Directory, oraz -subId w celu wybrania subskrypcji.</li>
</ul>
<ol start="2">
<li class="">SetTagsResourceGroups oraz SetTagsResources</li>
</ol>
<ul>
<li class="">Import danych z plików odbywa się automatycznie, na podstawie konwencji nazewniczej wygenerowanego wcześniej pliku. Skrypt importuje najnowszy plik CSV we wskazanym katalogu — można też podać ścieżkę poprzez parametr -path.</li>
<li class="">Tagi powinny być oddzielone przecinkami.</li>
<li class="">Tagi zapisane w pliku CSV występują jako pary "Key<!-- -->:Value<!-- -->" w osobnych kolumnach.</li>
<li class="">Skrypt pobiera wszystkie elementy z pliku CSV; następnie usuwa tagi w Microsoft Azure i nadpisuje je danymi z pliku CSV.</li>
<li class="">Jeśli nie chcesz modyfikować danego zasobu, wystarczy go usunąć z pliku CSV.</li>
<li class="">Skrypt działa w trybie równoległym, co pozwala na szybsze wprowadzanie zmian. Throttle dla zapisu tagów wynosi 5 — jest to wartość optymalna.</li>
<li class="">Skrypt sprawdza, czy jesteś zalogowany do Azure — możesz podać parametr -tenantId.</li>
<li class="">Jeśli chcesz wyczyścić tagi na zasobach, zostaw pustą komórkę lub wpisz "empty".</li>
<li class="">Testowanie wprowadzania tagów możesz wykonać poprzez umieszczenie w pliku CSV wyłącznie zasobów, które chcesz zmienić; pozostałe zasoby nie będą brane pod uwagę podczas wdrażania.</li>
</ul>
<p>Poniżej przedstawiam przykład jak to działa na mojej subskrypcji.</p>
<p>Uruchomienie skryptu:</p>
<ul>
<li class="">GetAllTags.ps1</li>
</ul>
<p><code>Komenda: ./GetAllTags.ps1 -path /tags</code></p>
<p><img decoding="async" loading="lazy" src="https://lh6.googleusercontent.com/g2uknxvVr-r8zuu_JNgHwzMEWXDS_lCkJkvP0w2nsaraF1iUI-PfsBGgFDAMnSqGiPEN-oG5sg0RR5aQWAqnixT1BRO0RBcsIWEpJ48Jfztk-ioLi0NlKg-fFfHPUxjXg60DReVG" alt="Output skryptu" class="img_ev3q"></p>
<p>Na printscreenie możesz zauważyć output z informacjami jakie generowane są przez skrypt.</p>
<ul>
<li class="">Czy jesteś zalogowany, jeśli nie to poprosi Cię o zalogowanie się</li>
<li class="">Ilość&nbsp;znalezionych grup zasobów oraz zasobów</li>
<li class="">Informacja gdzie i jakie pliki są&nbsp;tworzone</li>
<li class="">Lista zasobów</li>
</ul>
<p>Pliki CSV wyglądają następująco:</p>
<ul>
<li class="">Resource Group</li>
</ul>
<p><img decoding="async" loading="lazy" src="https://lh3.googleusercontent.com/XiatuhcE3vx4Lr6g5rkz-JP48TjhJ-ydCdwySuAGgBccaVpVZKD9CfPF5xVpIuzU6IFM7PNj939dMpEviYAR3287SCr6F5y2cM4pu1i8500uzKNdRNSh16t8dX9GSosf7J2oDJFa" alt="CSV Resource Group" class="img_ev3q"></p>
<ul>
<li class="">Resources</li>
</ul>
<p><img decoding="async" loading="lazy" src="https://lh4.googleusercontent.com/m5u5NLpGw8DNyroSByMny-rIZsH11sZMs4tgFMixm_Lepfn0rjNf4XqLET6MvsT3YnK48PesD9GJQUkDtWJIuDKsUh7IolWD7BCDfHSQN4Ug_f6qdWpuPF2ns-8vRmnlRNtWptbp" alt="CSV Resources" class="img_ev3q"></p>
<p>Poniżej przedstawię edycję tagów dla pliku z zasobami.</p>
<p><em>Uwaga! Jeśli chcesz zachować kopię obecnego stanu, zabezpiecz wygenerowany plik lub zmień jego nazwę na zupełnie inną.</em></p>
<p>Poprawiony plik wygląda następująco. Zauważ, że wypełniłem tagi dla wszystkich obiektów oraz dodałem nowy tag: Test<!-- -->:Key<!-- -->, aby pokazać jak wygląda przypisywanie wielu tagów.</p>
<p><img decoding="async" loading="lazy" src="https://lh6.googleusercontent.com/q4_FhHhAden4hD-gq6IJjhVRras8g-lAgwqCo4evhui6_dSF1wjIt6rZwHV23YbOWIuvlJihRbleddX46VkkUudBByLuX_lfGlrab1_U8Ya14-pdg9Xhrqd7hdzoQqpsxwaseZle" alt="Edycja tagów" class="img_ev3q"></p>
<p>Wynik skryptu z wykonanymi zmianami:</p>
<p><code>Komenda: ./SetTagsResources.ps1 -path /tags</code></p>
<p><img decoding="async" loading="lazy" src="https://lh4.googleusercontent.com/49zIzivJeCzwtGRSBFcnzG4X0nr3nbtc1dxgJag7q3_tocRbvBcgu0m_DUf11179BBt1GWpHQalOmsyis3CDnEX3xCpgt-1w1Ic_-bR8KFREpnCOP-aXCxmAjefbS7mU7qJbRvkL" alt="Wynik wykonania skryptu" class="img_ev3q"></p>
<p>Efekt zmian w Portalu Azure:</p>
<p><img decoding="async" loading="lazy" src="https://lh4.googleusercontent.com/O0XGlppGQzJYWYNOJcfKkxTo0ZcT4Hstc46TWolZUIr4Bi80Tq8P60Z1IwlMDgU-vwQ4yLvuj1cYWb9RYy67Z4BDPvFGjx704b9ZYUVbGNb9EFUatChC8Vv3YnHQi4g_1Lr1ciL2" alt="Efekt w Portalu Azure" class="img_ev3q"></p>
<p>Skrypt można dostosować&nbsp;do swoich celów tak, aby działał na przykład dla wielu subskrypcji. Jest wiele opcji customizacji tego skryptu, które celowo pominąłem. Skrypty działają modułowo więc można ich łatwo użyć z innym skryptem, a reszta zostanie przygotowana i wdrożona na podstawie wprowadzonych danych z pliku.</p>
<p>Zapraszam do pozostawienia komentarza!</p>]]></content>
        <author>
            <name>Piotr Rogala</name>
            <uri>https://github.com/RogalaPiotr</uri>
        </author>
        <category label="csv" term="csv"/>
        <category label="azure" term="azure"/>
        <category label="tagowanie" term="tagowanie"/>
        <category label="powershell" term="powershell"/>
        <category label="automatyzacja" term="automatyzacja"/>
        <category label="raport" term="raport"/>
        <category label="tagging" term="tagging"/>
        <category label="tags" term="tags"/>
        <category label="zasoby" term="zasoby"/>
        <category label="skrypty" term="skrypty"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Wysłanie żądania API z PowerShell do Azure DevOps]]></title>
        <id>https://blog.justcloud.pl/wyslanie-zadania-api-z-powershell-do-azure-devops</id>
        <link href="https://blog.justcloud.pl/wyslanie-zadania-api-z-powershell-do-azure-devops"/>
        <updated>2020-04-13T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Jak wysyłać żądania API z PowerShell do Azure DevOps — przykłady, skrypty i wskazówki do automatyzacji z użyciem Invoke-WebRequest.]]></summary>
        <content type="html"><![CDATA[<p>Często stajemy przed wyzwaniem zintegrowania ze sobą wielu narzędzi. Jeżeli stosujemy PowerShell w celu automatyzacji swojej infrastruktury bądź budowy prostych skryptów może nam się przydać zastosowanie użycia wywołania żądania API za pomocą PowerShell.</p>
<p>Poniższy przykład zaprezentuje użycie wysłania żądania za pomocą API do Azure DevOps w celu dodania puli agentowej.</p>
<p>Referencje API do Azure DevOps są dostępne tutaj:</p>
<ul>
<li class=""><a href="https://docs.microsoft.com/en-us/rest/api/azure/devops/distributedtask/pools/add?view=azure-devops-rest-5.1" target="_blank" rel="noopener noreferrer" class="">https://docs.microsoft.com/en-us/rest/api/azure/devops/distributedtask/pools/add?view=azure-devops-rest-5.1</a></li>
</ul>
<p>Poniższy przykładowy skrypt możemy rozbudować dla innych operacji stosując odpowiedni uri dla potrzebnej operacji z powyższego linku.</p>
<p>Na początku definiujemy zmienne:</p>
<ul>
<li class="">$urlvsts - URL do naszego projektu Azure DevOps</li>
<li class="">$token - PAT token (Instrukcja jak wygenerować token: <a href="https://docs.microsoft.com/en-us/azure/devops/organizations/accounts/use-personal-access-tokens-to-authenticate?view=azure-devops&amp;tabs=preview-page" target="_blank" rel="noopener noreferrer" class="">https://docs.microsoft.com/en-us/azure/devops/organizations/accounts/use-personal-access-tokens-to-authenticate?view=azure-devops&amp;tabs=preview-page</a>)</li>
<li class="">$pool - nazwa puli, którą chcemy utworzyć</li>
<li class="">$encodedPat - przekonwertowanie tokenu na SecureString</li>
<li class="">$body - informacje do przekazania w wysyłanym żądaniu</li>
</ul>
<div class="language-ps1 codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ps1 codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$urlvsts = 'https://dev.azure.com/PROJECT-NAME'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$token = 'YOUR-PAT-TOKEN'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$pool = 'YOUR-POOL-NAME'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$encodedPat = [System.Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes( ":$token"))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$body = "{name:`"$pool`", autoProvision: `"true`"}"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>Komenda <code>Invoke-WebRequest</code> wykonuje wysłania żądania podając wcześniej zdefiniowane zmienne oraz zawiera Uri, czyli miejsce, w które zapuka żądanie, aby ustawić nową pulę w Azure DevOps.</p>
<div class="language-ps1 codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ps1 codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Invoke-WebRequest `</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Method POST `</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Uri "$urlvsts/_apis/distributedtask/pools?api-version=5.0-  preview.1" `</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -UseBasicParsing `</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Headers @{Authorization = "Basic $encodedPat"} `</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Body $body `</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -ContentType "application/json"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>Screens:</p>
<p>Code:</p>
<p><img decoding="async" loading="lazy" alt="Kod przykładowy" src="https://blog.justcloud.pl/assets/images/2020-04-13_14h12_09-74a67a70a3044a95c8342ca461fd26c3.png" width="1013" height="314" class="img_ev3q"></p>
<p>Output:</p>
<p><img decoding="async" loading="lazy" alt="Output przykładowy" src="https://blog.justcloud.pl/assets/images/2020-04-13_14h12_53-b564469a0b3f4a59f61d76185b092578.png" width="2009" height="523" class="img_ev3q"></p>
<p>Azure DevOps:</p>
<p><img decoding="async" loading="lazy" alt="Widok w Azure DevOps" src="https://blog.justcloud.pl/assets/images/2020-04-13_14h14_02-1024x604-e6cc533454530d607213bf2bb5b3ea5c.png" width="1024" height="604" class="img_ev3q"></p>
<p>W prosty sposób możemy teraz zautomatyzować operacje w Azure DevOps bez uruchamiania portalu. Niestety referencje API dla Azure DevOps nie pozwalają na wszystko co możemy wyklikać w portalu, ale na pewno pomoże to w osiągnięciu celu. Jeśli masz ciekawe przypadki użycia wspomnianego API lub zastanawiasz się, gdzie można tego użyć zapraszam do komentowania.</p>
<p>Użycie skryptu możecie również sprawdzić w deploymencie puli agentów dla Azure DevOps tutaj: <a href="https://github.com/RogalaPiotr/JustCloudPublic/blob/master/simple-vm-with-installation-vsts-agent/vstsagent.ps1" target="_blank" rel="noopener noreferrer" class="">https://github.com/RogalaPiotr/JustCloudPublic/blob/master/simple-vm-with-installation-vsts-agent/vstsagent.ps1</a></p>
<p>Artykuł dostępny również na Medium i LinkedIN:</p>
<ul>
<li class="">(EN) <a href="https://medium.com/@piotr.rogala/api-request-to-azure-devops-from-powershell-2e2f525dbd7a" target="_blank" rel="noopener noreferrer" class="">https://medium.com/@piotr.rogala/api-request-to-azure-devops-from-powershell-2e2f525dbd7a</a></li>
<li class="">(PL) <a href="https://www.linkedin.com/pulse/wys%C5%82anie-%C5%BC%C4%85dania-api-z-powershell-do-azure-devops-piotr-rogala" target="_blank" rel="noopener noreferrer" class="">https://www.linkedin.com/pulse/wys%C5%82anie-%C5%BC%C4%85dania-api-z-powershell-do-azure-devops-piotr-rogala</a></li>
</ul>]]></content>
        <author>
            <name>Piotr Rogala</name>
            <uri>https://github.com/RogalaPiotr</uri>
        </author>
        <category label="api" term="api"/>
        <category label="automation" term="automation"/>
        <category label="azure" term="azure"/>
        <category label="azure devops" term="azure devops"/>
        <category label="powershell" term="powershell"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[IaC control via PowerShell module for ARM templates]]></title>
        <id>https://blog.justcloud.pl/iac-control-via-powershell-module-for-arm-templates</id>
        <link href="https://blog.justcloud.pl/iac-control-via-powershell-module-for-arm-templates"/>
        <updated>2019-09-15T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Walidacja szablonów ARM przy użyciu modułu PowerShell — sprawdź poprawność szablonu i przewidywane zmiany przed wdrożeniem w Azure.]]></summary>
        <content type="html"><![CDATA[<p>Debug natywnych szablonów ARM jest ciężkim procesem dla wielu osób. Utrzymanie infrastruktury jako kod również nie jest prostą sprawą, dlatego często używa się Terraforma dla wdrożeń w Microsoft Azure.</p>
<p>Szablony ARM nie posiadają pliku stanu jak to jest w Terraform dlatego często spotykam się z opinią, że, ARM'y są beznadziejnie. Po wdrożeniu trudno jest utrzymać stały rozwój infrastruktury z tego samego szablonu oraz często problemem jest przewidywalność co się stanie z obiektami, które już masz. Nie będę się rozwodził co lepsze co gorsze, ponieważ wiele zależy od naszej wiedzy, podejścia, problemu lub zlecenia, które wykonujemy. Jako Inżynier nie przywiązuje się do rozwiązań i uważam, że do każdego problemu należy podchodzić indywidualnie. Moim zdaniem najlepsze rozwiązania to rozwiązania natywne nie wymagające tworzenia koła na nowo. Stąd zachęcam do pisania szablonów ARM dla Azure.</p>
<p>Jako pomoc w tworzeniu infrastruktury jako kod (IaC) w Microsoft Azure polecam zapoznać się z modułem PowerShell: <strong>ARMHelper</strong></p>
<p><a href="https://www.powershellgallery.com/packages/ARMHelper/0.6.2" target="_blank" rel="noopener noreferrer" class="">https://www.powershellgallery.com/packages/ARMHelper/0.6.2</a></p>
<p>Za pomocą komendy: Test-ARMExistingResource możemy zbudować polecenie, które sprawdzi nam wskazany szablon w kontekście z deploy'owanych zasobów w Azure i wyświetli co się stanie. Przykład poniżej przedstawia stworzoną resource groupe bez zasobów:</p>
<p>Użyłem szablonu z mojego repo: <a href="https://github.com/RogalaPiotr/JustCloudPublic/tree/master/simple-vm-shutdown-on-time" target="_blank" rel="noopener noreferrer" class="">https://github.com/RogalaPiotr/JustCloudPublic/tree/master/simple-vm-shutdown-on-time</a><br>
<!-- -->Wykonuje kolejno komendy:</p>
<p>Tworzenie nowej resource grupy:</p>
<p><code>New-AzResourceGroup -Name 'simple-vm-shutdown-on-time' -Location westeurope</code></p>
<p>Sprawdzenie co wyświetli polecenie Test-ARMExistingResource:</p>
<p><code>Test-ARMExistingResource -ResourceGroupName 'simple-vm-shutdown-on-time' -TemplateFile .\azuredeploy.json -TemplateParameterFile .\azuredeploy.parameters.json -Verbose</code></p>
<p><img decoding="async" loading="lazy" alt="Wynik Test-ARMExistingResource — brak zasobów" src="https://blog.justcloud.pl/assets/images/2019-09-15_12h46_05-8727ff774509b20d633ad59e6525eba9.png" width="1732" height="565" class="img_ev3q"></p>
<p>Wynikiem jest informacja co zostanie utworzone. Super sprawa, to teraz zrobię deployment szablonu i sprawdzimy ponownie.</p>
<p><code>New-AzResourceGroupDeployment -ResourceGroupName 'simple-vm-shutdown-on-time' -TemplateFile .\azuredeploy.json -TemplateParameterFile .\azuredeploy.parameters.json -Verbose</code></p>
<p>Niestety miałem problem z modułem Shutdown i szablon wdrożył się niepoprawnie, dlatego sprawdziłem co wyświetli Test-ARMExistResource.</p>
<p><code>Test-ARMExistingResource -ResourceGroupName 'simple-vm-shutdown-on-time' -TemplateFile .\azuredeploy.json -TemplateParameterFile .\azuredeploy.parameters.json -Verbose</code></p>
<p><img decoding="async" loading="lazy" alt="Wynik Test-ARMExistingResource — problemy modułu Shutdown" src="https://blog.justcloud.pl/assets/images/2019-09-15_13h01_42-e2df42c028dec7e6b2a418ca36325840.png" width="1738" height="457" class="img_ev3q"></p>
<p>Jak widać polecenie poprawnie zwróciło co jest do poprawienia i co zostanie zmienione(inkrementalnie).</p>
<p>Ostatni test to z argumentem "-Mode Complete" czyli wykonanie szablonu, który dostosuje wszystkie zasoby niezależnie od tego co jest stworzone w resource groupie do mojego szablonu.</p>
<p><code>Test-ARMExistingResource -ResourceGroupName 'simple-vm-shutdown-on-time' -TemplateFile .\azuredeploy.json -TemplateParameterFile .\azuredeploy.parameters.json -Verbose -Mode Complete</code></p>
<p><img decoding="async" loading="lazy" alt="Wynik Test-ARMExistingResource — tryb Complete" src="https://blog.justcloud.pl/assets/images/2019-09-15_13h02_32-cbf72f27f5da36e8dfc3c71bbaebd55f.png" width="1824" height="587" class="img_ev3q"></p>
<p>Teraz można być pewniejszym co się stanie z wdrożeniem po małych zmianach w szablonie.</p>
<p>Mam nadzieje że przyda Ci się ta wiedza 😊</p>]]></content>
        <author>
            <name>Piotr Rogala</name>
            <uri>https://github.com/RogalaPiotr</uri>
        </author>
        <category label="arm" term="arm"/>
        <category label="azure" term="azure"/>
        <category label="iac" term="iac"/>
        <category label="module" term="module"/>
        <category label="powershell" term="powershell"/>
        <category label="templates" term="templates"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Skąd uczyć się o Microsoft Azure?]]></title>
        <id>https://blog.justcloud.pl/skad-uczyc-sie-o-microsoft-azure</id>
        <link href="https://blog.justcloud.pl/skad-uczyc-sie-o-microsoft-azure"/>
        <updated>2018-11-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Gdzie uczyć się Microsoft Azure — lista kursów, wideo, blogów i materiałów praktycznych. Polecane darmowe i płatne źródła oraz zasoby do certyfikacji.]]></summary>
        <content type="html"><![CDATA[<p>Po ostatniej prezentacji przyszła mi do głowy myśl, by utworzyć miejsce, skąd można uczyć się chmury Microsoft Azure. Postanowiłem więc zebrać interesujące linki w jednym miejscu — znajdziecie tu rekomendacje moje oraz innych ekspertów.</p>
<p>Większość poniższych linków jest darmowa i takie właśnie będę starał się udostępniać. Jeśli chciałbyś dodać ciekawe miejsce, które polecasz, dodaj je w komentarzu — pomoże to w udoskonaleniu listy.</p>
<p>Jeśli wiesz, czego konkretnie szukasz, możesz użyć wyszukiwarki, aby skoncentrować się na danym problemie:</p>
<p>Jeśli wiesz czego konkretnie szukasz możesz użyć wyszukiwarki aby skoncentrować się na danym problemie:</p>
<!--$?--><template id="B:0"></template><!--/$-->
<p>A, tak na poważnie możesz zaczerpnąć wiedzy w poniższych miejscach.</p>
<p>Grupa Microsoft Azure User Group Poland na Facebooku:&nbsp;<a href="https://www.facebook.com/groups/azureugpl/" target="_blank" rel="noopener noreferrer" class="">https://www.facebook.com/groups/azureugpl/</a></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="video">Video<a href="https://blog.justcloud.pl/skad-uczyc-sie-o-microsoft-azure#video" class="hash-link" aria-label="Bezpośredni link do Video" title="Bezpośredni link do Video" translate="no">​</a></h2>
<ul>
<li class="">Azure Developer:&nbsp;<a href="https://docs.microsoft.com/pl-pl/learn/browse/?roles=developer&amp;products=azure" target="_blank" rel="noopener noreferrer" class="">https://docs.microsoft.com/pl-pl/learn/browse/?roles=developer&amp;products=azure</a></li>
<li class="">Azure Administrator:&nbsp;<a href="https://docs.microsoft.com/pl-pl/learn/browse/?roles=administrator&amp;products=azure" target="_blank" rel="noopener noreferrer" class="">https://docs.microsoft.com/pl-pl/learn/browse/?roles=administrator&amp;products=azure</a></li>
<li class="">Azure Solution Architect:&nbsp;<a href="https://docs.microsoft.com/pl-pl/learn/browse/?roles=solution-architect&amp;products=azure" target="_blank" rel="noopener noreferrer" class="">https://docs.microsoft.com/pl-pl/learn/browse/?roles=solution-architect&amp;products=azure</a></li>
<li class="">Azure Friday:&nbsp;<a href="https://channel9.msdn.com/Shows/Azure-Friday" target="_blank" rel="noopener noreferrer" class="">https://channel9.msdn.com/Shows/Azure-Friday</a></li>
<li class="">Microsoft Self-paced Labs:&nbsp;<a href="https://www.microsoft.com/handsonlabs/selfpacedlabs" target="_blank" rel="noopener noreferrer" class="">https://www.microsoft.com/handsonlabs/selfpacedlabs</a></li>
<li class="">Microsoft Virtual Academy:&nbsp;<a href="https://mva.microsoft.com/search/SearchResults.aspx#!q=azure&amp;orderby=publishedtime&amp;lang=1033" target="_blank" rel="noopener noreferrer" class="">https://mva.microsoft.com/search/SearchResults.aspx#!q=azure&amp;orderby=publishedtime&amp;lang=1033</a></li>
<li class="">Azure Tips and Tricks:&nbsp;<a href="https://www.michaelcrump.net/azure-tips-and-tricks-complete-list/" target="_blank" rel="noopener noreferrer" class="">https://www.michaelcrump.net/azure-tips-and-tricks-complete-list/</a></li>
<li class="">Pluralsight:&nbsp;<a href="https://www.pluralsight.com/search?q=azure" target="_blank" rel="noopener noreferrer" class="">https://www.pluralsight.com/search?q=azure</a></li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="blogipolskich-ekspertów">Blogi&nbsp;Polskich ekspertów<a href="https://blog.justcloud.pl/skad-uczyc-sie-o-microsoft-azure#blogipolskich-ekspert%C3%B3w" class="hash-link" aria-label="Bezpośredni link do Blogi&nbsp;Polskich ekspertów" title="Bezpośredni link do Blogi&nbsp;Polskich ekspertów" translate="no">​</a></h2>
<ul>
<li class="">Michał Furmankiewicz: <a href="http://cloudarchitects.pl/" target="_blank" rel="noopener noreferrer" class="">http://cloudarchitects.pl/</a></li>
<li class="">Michał Smereczyński: <a href="https://lnx.azurewebsites.net/" target="_blank" rel="noopener noreferrer" class="">https://lnx.azurewebsites.net/</a></li>
<li class="">Emil Wasilewski:&nbsp;<a href="http://zapytajemila.pl/" target="_blank" rel="noopener noreferrer" class="">http://zapytajemila.pl/</a></li>
<li class="">Łukasz Kałużny:&nbsp;<a href="https://kaluzny.io/" target="_blank" rel="noopener noreferrer" class="">https://kaluzny.io/</a></li>
<li class="">Sebastian Fyda:&nbsp;<a href="http://blog.spiderweb.pl/" target="_blank" rel="noopener noreferrer" class="">http://blog.spiderweb.pl/</a></li>
<li class="">Piotr Rogala:&nbsp;<a href="https://justcloud.azurewebsites.net/blog/" target="_blank" rel="noopener noreferrer" class="">https://justcloud.azurewebsites.net/blog/</a></li>
<li class="">Szymon Pulka (DEV):&nbsp;<a href="https://devincloud.pl/" target="_blank" rel="noopener noreferrer" class="">https://devincloud.pl/</a></li>
<li class="">Mateusz Dudek (DEV):&nbsp;<a href="https://mateuszdudek.pl/blog/" target="_blank" rel="noopener noreferrer" class="">https://mateuszdudek.pl/blog/</a></li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="książki">Książki<a href="https://blog.justcloud.pl/skad-uczyc-sie-o-microsoft-azure#ksi%C4%85%C5%BCki" class="hash-link" aria-label="Bezpośredni link do Książki" title="Bezpośredni link do Książki" translate="no">​</a></h2>
<ul>
<li class="">
<p>Free eBooks from Microsoft Press</p>
<ul>
<li class="">Microsoft Azure Essentials: Fundamentals of Azure, Second Edition</li>
<li class="">Introduction to Windows Containers</li>
<li class="">Microsoft Azure Essentials Migrating SQL Server Databases to Azure</li>
<li class="">Microsoft Azure Essentials: Azure Web Apps for Developers</li>
</ul>
</li>
<li class="">
<p>The Developer’s Guide to Microsoft Azure:&nbsp;<a href="https://azure.microsoft.com/en-us/blog/free-ebook-the-developer-s-guide-to-microsoft-azure-now-available/" target="_blank" rel="noopener noreferrer" class="">https://azure.microsoft.com/en-us/blog/free-ebook-the-developer-s-guide-to-microsoft-azure-now-available/</a></p>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="certyfikaty">Certyfikaty<a href="https://blog.justcloud.pl/skad-uczyc-sie-o-microsoft-azure#certyfikaty" class="hash-link" aria-label="Bezpośredni link do Certyfikaty" title="Bezpośredni link do Certyfikaty" translate="no">​</a></h2>
<ul>
<li class="">Lista możliwych certyfikatów do zrobienia dot. Azure:&nbsp;<a href="https://www.microsoft.com/en-us/learning/azure-exams.aspx" target="_blank" rel="noopener noreferrer" class="">https://www.microsoft.com/en-us/learning/azure-exams.aspx</a></li>
</ul>]]></content>
        <author>
            <name>Piotr Rogala</name>
            <uri>https://github.com/RogalaPiotr</uri>
        </author>
        <category label="azure" term="azure"/>
        <category label="kursy" term="kursy"/>
        <category label="nauka" term="nauka"/>
        <category label="certyfikaty" term="certyfikaty"/>
        <category label="devops" term="devops"/>
        <category label="microsoft-azure" term="microsoft-azure"/>
        <category label="szkolenia" term="szkolenia"/>
        <category label="blogi" term="blogi"/>
        <category label="resources" term="resources"/>
        <category label="kurs" term="kurs"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Auto deployment VM with VSTS agent for pool]]></title>
        <id>https://blog.justcloud.pl/auto-deployment-vm-with-vsts-agent-for-pool</id>
        <link href="https://blog.justcloud.pl/auto-deployment-vm-with-vsts-agent-for-pool"/>
        <updated>2018-05-27T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Szablon ARM automatyzuje stworzenie maszyny w Azure i instalację agenta Azure DevOps (VSTS). Szybki deployment, konfiguracja agenta i integracja z pulą. Łatwo.]]></summary>
        <content type="html"><![CDATA[<p>Wszyscy którzy robią depyolemnty z VSTS spotykają się z sytuacją, kiedy standardowe 240min się kończy i trzeba stworzyć sobie taką maszynę. Sam robiłem taką maszynę parę razy i kiedy znów pojawiła się ta konieczność postanowiłem stworzyć automatyczny deployment który nam stworzy z JSON'a cała maszynkę i podepnie ją do Agent pool w VSTS.</p>
<p>Miałem parę pomysłów, aby zrobić bardzo uniwersalny template który nie tylko przyda się wam, ale również mi w przyszłości do budowania innych szablonów. Także w skrócie opiszę ciekawostki które zastosowałem szablonie, który znajdziecie na moim GitHubie.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="github-httpsgithubcomrogalapiotrjustcloudpublictreemastersimple-vm-with-installation-vsts-agent"><strong>GitHub</strong> <a href="https://github.com/RogalaPiotr/JustCloudPublic/tree/master/simple-vm-with-installation-vsts-agent" target="_blank" rel="noopener noreferrer" class="">https://github.com/RogalaPiotr/JustCloudPublic/tree/master/simple-vm-with-installation-vsts-agent</a><a href="https://blog.justcloud.pl/auto-deployment-vm-with-vsts-agent-for-pool#github-httpsgithubcomrogalapiotrjustcloudpublictreemastersimple-vm-with-installation-vsts-agent" class="hash-link" aria-label="Bezpośredni link do github-httpsgithubcomrogalapiotrjustcloudpublictreemastersimple-vm-with-installation-vsts-agent" title="Bezpośredni link do github-httpsgithubcomrogalapiotrjustcloudpublictreemastersimple-vm-with-installation-vsts-agent" translate="no">​</a></h5>
<p>Założenie dotyczące szablonu: chciałbym dodać informację, gdzie ważnym jest zwrócenie uwagi, że maszyna ma być odizolowana od naszej sieci wewnętrznej, dlatego szablon jest infrastruktura stand alone, aby było bezpiecznie i w razie czego można ją usuną lub powołać więcej agentów do deploymentów.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="opis-szablonu">Opis szablonu<a href="https://blog.justcloud.pl/auto-deployment-vm-with-vsts-agent-for-pool#opis-szablonu" class="hash-link" aria-label="Bezpośredni link do Opis szablonu" title="Bezpośredni link do Opis szablonu" translate="no">​</a></h2>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="sekcja-parameters">Sekcja Parameters<a href="https://blog.justcloud.pl/auto-deployment-vm-with-vsts-agent-for-pool#sekcja-parameters" class="hash-link" aria-label="Bezpośredni link do Sekcja Parameters" title="Bezpośredni link do Sekcja Parameters" translate="no">​</a></h2>
<p>w tej sekcji podajemy dane które przydadzą nam się do deplymentu i automatycznego podłączenia do VSTS'a.</p>
<ul>
<li class="">
<p><strong>adminUsername</strong>, <strong>adminPassword</strong> - lokalny użytkownik i hasło,</p>
</li>
<li class="">
<p><strong>dnsLabelPrefix</strong> - zostanie automatycznie wygenerowany podczas deployment’u, więc nie ma konieczności go zmieniać,</p>
</li>
<li class="">
<p><strong>vmName</strong> - nazwa naszej maszyny oraz na podstawie tej nazwy zostaną nazwane wszystkie nasze resource jest: VNET, NSG, Storage...</p>
</li>
<li class="">
<p><strong>urlvsts</strong> - adres do naszego projektu VSTS, np. <a href="https://project1.visualstudio.com/" target="_blank" rel="noopener noreferrer" class="">https://project1.visualstudio.com</a></p>
</li>
<li class="">
<p><strong>auth</strong> - rodzaj poświadczenia - wybrany domyślnie PAT,</p>
</li>
<li class="">
<p><strong>token</strong> - token security który umożliwi nam podłączenie się do projektu. Więcej informacji jak stworzyć Security Token poniżej:</p>
<ul>
<li class=""><a href="https://docs.microsoft.com/en-us/vsts/build-release/actions/agents/v2-windows?view=vsts" target="_blank" rel="noopener noreferrer" class="">Dokumentacja agenta VSTS</a></li>
</ul>
</li>
<li class="">
<p><strong>pool</strong> - nazwa puli, do której zostanie dodana maszyna w VSTS'ie - ustawiony jest na default</p>
</li>
<li class="">
<p><strong>AccessIPNSG</strong> - adres, który tutaj podacie zostanie dodany do NSG i tylko z tego adresu dostaniecie się po RDP do maszyny,</p>
</li>
<li class="">
<p><strong>Tag</strong> - tagi mogą ulec waszej modyfikacji ustawione są na Project: VSTSAgent.</p>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="sekcja-variables">Sekcja Variables<a href="https://blog.justcloud.pl/auto-deployment-vm-with-vsts-agent-for-pool#sekcja-variables" class="hash-link" aria-label="Bezpośredni link do Sekcja Variables" title="Bezpośredni link do Sekcja Variables" translate="no">​</a></h2>
<ul>
<li class="">
<p><strong>vmsize</strong> - ustawiony na "Standard_B1s". To tani rozmiar wystarczający na maszynę deploymentową. Sprawdź, czy możesz deployować tę maszynę w swojej subskrypcji; w przeciwnym razie zgłoś request do supportu Microsoft.</p>
</li>
<li class="">
<p><strong>urldonwloadagent</strong> - link do pobrania paczki agenta VSTS. W razie zmiany wersji zaktualizuj link.</p>
</li>
<li class="">
<p><strong>filescriptURI</strong> - skrypt automatyzujący pobranie i instalację agenta: <a href="https://raw.githubusercontent.com/RogalaPiotr/JustCloudPublic/master/simple-vm-with-installation-vsts-agent/vstsagent.ps1" target="_blank" rel="noopener noreferrer" class="">vstsagent.ps1 na GitHubie</a></p>
</li>
<li class="">
<p><strong>filescriptURISplit</strong> - funkcja, która rozbija powyższy URL na części według znaku "/" i tworzy tablicę.</p>
<ul>
<li class="">więcej informacji: <a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-template-functions" target="_blank" rel="noopener noreferrer" class="">Funkcje ARM Templates</a></li>
</ul>
</li>
<li class="">
<p><strong>filescriptName</strong> - nazwa skryptu używanego w CustomScriptExtension uzyskiwana z powyższego split.</p>
</li>
<li class="">
<p><strong>agentname</strong> - nazwa agenta dodawanego do puli; domyślnie oparta na nazwie maszyny.</p>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="sekcja-resources">Sekcja Resources<a href="https://blog.justcloud.pl/auto-deployment-vm-with-vsts-agent-for-pool#sekcja-resources" class="hash-link" aria-label="Bezpośredni link do Sekcja Resources" title="Bezpośredni link do Sekcja Resources" translate="no">​</a></h2>
<ul>
<li class="">
<p><strong>type: Microsoft.Network/networkSecurityGroups</strong> - NSG z dostępem RDP tylko z adresu IP, który podamy w parametrze AccessIPNSG.</p>
</li>
<li class="">
<p><strong>type: Microsoft.Network/publicIPAddresses</strong> - publiczny adres dla VM, umożliwiający połączenie z zewnątrz.</p>
</li>
<li class="">
<p><strong>type: Microsoft.Network/virtualNetworks</strong> - VNet.</p>
</li>
<li class="">
<p><strong>type: Microsoft.Compute/virtualMachines</strong> - tworzenie maszyny wirtualnej z Windows i Managed Disk.</p>
<ul>
<li class=""><strong>type: Microsoft.Compute/virtualMachines/extensions</strong> - instalacja agenta VSTS oparta na skrypcie z GitHuba (vstsagent.ps1); pełna komenda znajduje się w polu "commandToExecute".</li>
</ul>
</li>
<li class="">
<p><strong>type: Microsoft.DevTestLab/schedules</strong> - dzięki temu nasza maszynie będzie wyłączana codziennie o 18:00 zona: W. Europe Standard Time - ten feature działa tylko kiedy maszyna jest włączona pozwoli to nam zapomnieć o wyłączaniu, a mimo wszystko nie będziemy tracić pieniędzy za jej bezczynność.</p>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="sekcja-outputs"><strong>Sekcja Outputs</strong><a href="https://blog.justcloud.pl/auto-deployment-vm-with-vsts-agent-for-pool#sekcja-outputs" class="hash-link" aria-label="Bezpośredni link do sekcja-outputs" title="Bezpośredni link do sekcja-outputs" translate="no">​</a></h2>
<ul>
<li class=""><strong>PublicDNS</strong> - po wykonaniu deployment’u wyświetli nam publiczny adres DNS dla VM,</li>
<li class=""><strong>Hostname</strong> - wyświetli nazwę maszyny, którą wprowadziliśmy w parametrach,</li>
<li class=""><strong>VSTSAgentName</strong> - wyświetli nazwę agenta jaka będzie widoczna w VSTS,</li>
<li class=""><strong>VSTSProjectName</strong> - wyświetli nazwę projektu VSTS jaki został wprowadzony,</li>
<li class=""><strong>ScriptURI</strong> - wyświetli źródło z jakiego został pobrany skrypt do instalacji Agenta,</li>
<li class=""><strong>AccessRDPFrom</strong> - wyświetli adres IP który został dodany do NSG, aby miał dostęp do RDP</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="szablon">Szablon<a href="https://blog.justcloud.pl/auto-deployment-vm-with-vsts-agent-for-pool#szablon" class="hash-link" aria-label="Bezpośredni link do Szablon" title="Bezpośredni link do Szablon" translate="no">​</a></h2>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"$schema"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"contentVersion"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"1.0.0.0"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"parameters"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"adminUsername"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"metadata"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"description"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Username for the Virtual Machine."</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"adminPassword"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"securestring"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"metadata"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"description"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Password for the Virtual Machine."</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"dnsLabelPrefix"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"defaultValue"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[concat('x', uniqueString(resourceGroup().id))]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"metadata"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"description"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Unique DNS Name for the Public IP used to access the Virtual Machine."</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"vmName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"metadata"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"description"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Unique DNS Name for the Public IP used to access the Virtual Machine."</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"urlvsts"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"metadata"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"description"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"URL for your VSTS Project ex. https://project1.visualstudio.com."</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"auth"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"defaultValue"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"pat"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"metadata"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"description"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Unique DNS Name for the Public IP used to access the Virtual Machine."</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"token"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"securestring"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"metadata"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"description"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Security token for VSTS project."</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"pool"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"metadata"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"description"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Pool name in VSTS - Default is a main."</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"AccessIPNSG"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"metadata"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"description"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Your public IP it will added for NSG for connection via RDP."</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"numberagents"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"int"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"metadata"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"description"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Numbers of agents for installation"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"tag"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"metadata"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"description"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Tag Values"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"variables"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"storageAccountName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[concat('stor', uniquestring(resourceGroup().id))]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"windowsOSVersion"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2019-Datacenter"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"vmsize"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Standard_B2ms"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"publicIPAddressName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[concat(parameters('vmName'), '-pip')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"virtualNetworkName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[concat(parameters('vmName'), '-vnet')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"NSGname"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[concat(parameters('vmName'), '-nsg')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"nicName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[concat(parameters('vmName'), '-nic')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"subnetName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[concat(parameters('vmName'), '-subnet')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"addressPrefix"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"10.0.0.0/16"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"subnetPrefix"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"10.0.0.0/24"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"subnetRef"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[resourceId('Microsoft.Network/virtualNetworks/subnets', variables('virtualNetworkName'), variables('subnetName'))]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"urldonwloadagent"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"https://vstsagentpackage.azureedge.net/agent/2.155.1/vsts-agent-win-x64-2.155.1.zip"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"filescriptURI"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"https://raw.githubusercontent.com/RogalaPiotr/JustCloudPublic/master/simple-vm-with-installation-vsts-agent/vstsagent.ps1"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"filescriptURISplit"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[split(variables('filescriptURI'), '/')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"filescriptName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[last(variables('filescriptURISplit'))]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"agentname"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[parameters('vmName')]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"resources"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Microsoft.Storage/storageAccounts"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[variables('storageAccountName')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"apiVersion"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2015-06-15"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"location"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[resourceGroup().location]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"tags"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"Project"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[parameters('tag')]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"properties"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"accountType"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Standard_LRS"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Microsoft.Network/networkSecurityGroups"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[variables('NSGName')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"location"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[resourceGroup().location]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"tags"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"Project"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[parameters('tag')]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"apiVersion"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2018-03-01"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"properties"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"securityRules"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"RDP"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"properties"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"description"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Allow IP for RDP"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"protocol"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"TCP"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"sourcePortRange"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"*"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"destinationPortRange"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"3389"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"sourceAddressPrefix"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[parameters('AccessIPNSG')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"destinationAddressPrefix"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"*"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"access"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Allow"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"priority"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"direction"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Inbound"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"apiVersion"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2016-03-30"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Microsoft.Network/publicIPAddresses"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[variables('publicIPAddressName')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"location"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[resourceGroup().location]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"tags"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"Project"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[parameters('tag')]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"properties"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"publicIPAllocationMethod"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Dynamic"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"dnsSettings"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"domainNameLabel"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[parameters('dnsLabelPrefix')]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"apiVersion"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2016-03-30"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Microsoft.Network/virtualNetworks"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[variables('virtualNetworkName')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"dependsOn"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"[resourceId('Microsoft.Network/networkSecurityGroups/', variables('NSGName'))]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"location"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[resourceGroup().location]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"tags"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"Project"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[parameters('tag')]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"properties"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"addressSpace"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"addressPrefixes"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">"[variables('addressPrefix')]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"subnets"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[variables('subnetName')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"properties"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"addressPrefix"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[variables('subnetPrefix')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"networkSecurityGroup"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[resourceId('Microsoft.Network/networkSecurityGroups',variables('NSGName'))]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"apiVersion"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2016-03-30"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Microsoft.Network/networkInterfaces"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[variables('nicName')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"location"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[resourceGroup().location]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"tags"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"Project"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[parameters('tag')]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"dependsOn"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"[resourceId('Microsoft.Network/publicIPAddresses/', variables('publicIPAddressName'))]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"[resourceId('Microsoft.Network/virtualNetworks/', variables('virtualNetworkName'))]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"properties"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"ipConfigurations"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ipconfig1"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"properties"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"privateIPAllocationMethod"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Dynamic"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"publicIPAddress"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[resourceId('Microsoft.Network/publicIPAddresses',variables('publicIPAddressName'))]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"subnet"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[variables('subnetRef')]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"apiVersion"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2016-04-30-preview"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Microsoft.Compute/virtualMachines"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[parameters('vmName')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"location"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[resourceGroup().location]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"tags"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"Project"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[parameters('tag')]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"dependsOn"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"[resourceId('Microsoft.Network/networkInterfaces/', variables('nicName'))]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"[concat('Microsoft.Storage/storageAccounts/', variables('storageAccountName'))]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"properties"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"licenseType"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Windows_Server"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"hardwareProfile"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"vmSize"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[variables('vmsize')]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"osProfile"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"computerName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[parameters('vmName')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"adminUsername"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[parameters('adminUsername')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"adminPassword"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[parameters('adminPassword')]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"storageProfile"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"imageReference"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"publisher"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"MicrosoftWindowsServer"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"offer"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"WindowsServer"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"sku"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[variables('windowsOSVersion')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"latest"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"osDisk"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[concat(parameters('vmName'),'-os')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"vhd"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"uri"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[concat('http://',variables('storageAccountName'),'.blob.core.windows.net/vhds/',parameters('vmName'),'-vm-os.vhd')]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"caching"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ReadWrite"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"createOption"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"FromImage"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"networkProfile"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"networkInterfaces"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[resourceId('Microsoft.Network/networkInterfaces',variables('nicName'))]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"resources"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[concat(parameters('vmName'),'/AzureDevOpsAgentInstall')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Microsoft.Compute/virtualMachines/extensions"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"location"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[resourceGroup().location]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"tags"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"Project"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[parameters('tag')]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"dependsOn"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">"[concat('Microsoft.Compute/virtualMachines/', parameters('vmName'))]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"apiVersion"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2015-06-15"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"properties"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"publisher"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Microsoft.Compute"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"CustomScriptExtension"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"typeHandlerVersion"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"1.9"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"autoUpgradeMinorVersion"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"settings"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"fileUris"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">"[variables('filescriptURI')]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"protectedSettings"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"commandToExecute"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[concat('powershell -ExecutionPolicy Unrestricted -File ',variables('filescriptName'),' -url ',variables('urldonwloadagent'),' -urlvsts ',parameters('urlvsts'),' -auth ',parameters('auth'),' -token ',parameters('token'),' -pool ',parameters('pool'),' -agentname ',variables('agentname'), ' -numberagents ',parameters('numberagents'))]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"apiVersion"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2016-05-15"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Microsoft.DevTestLab/schedules"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[concat('shutdown-computevm-', parameters('vmName'))]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"location"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[resourceGroup().location]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"tags"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"Project"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[parameters('tag')]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"dependsOn"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"[resourceId('Microsoft.Compute/virtualMachines/', parameters('vmName'))]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"properties"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"status"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Enabled"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"timeZoneId"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"W. Europe Standard Time"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"taskType"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"ComputeVmShutdownTask"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"notificationSettings"</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"status"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Disabled"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"timeInMinutes"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"webhookUrl"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"targetResourceId"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"[resourceId('Microsoft.Compute/virtualMachines', parameters('vmName'))]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"dailyRecurrence"</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"time"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"1800"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"outputs"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"PublicDNS"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[reference(variables('publicIPAddressName')).dnsSettings.fqdn]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"HostName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[parameters('vmName')]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"VSTSAgentName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[variables('agentname')]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"VSTSProjectName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[parameters('urlvsts')]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"ScritpURI"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[variables('filescriptURI')]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"AccessRDPFrom"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"value"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[parameters('accessIPNSG')]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="przykład">Przykład<a href="https://blog.justcloud.pl/auto-deployment-vm-with-vsts-agent-for-pool#przyk%C5%82ad" class="hash-link" aria-label="Bezpośredni link do Przykład" title="Bezpośredni link do Przykład" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="aby-wykonać-deployment-należy-utworzyć-resource-groupę">Aby wykonać deployment należy utworzyć Resource Groupę<a href="https://blog.justcloud.pl/auto-deployment-vm-with-vsts-agent-for-pool#aby-wykona%C4%87-deployment-nale%C5%BCy-utworzy%C4%87-resource-group%C4%99" class="hash-link" aria-label="Bezpośredni link do Aby wykonać deployment należy utworzyć Resource Groupę" title="Bezpośredni link do Aby wykonać deployment należy utworzyć Resource Groupę" translate="no">​</a></h3>
<p><code>New-AzureRMResourceGroup -Name VSTS -Location westeurope</code></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="wykonanie-deploymentu">Wykonanie deploymentu<a href="https://blog.justcloud.pl/auto-deployment-vm-with-vsts-agent-for-pool#wykonanie-deploymentu" class="hash-link" aria-label="Bezpośredni link do Wykonanie deploymentu" title="Bezpośredni link do Wykonanie deploymentu" translate="no">​</a></h3>
<p><code>New-AzureRMResourceGroupDeployment -ResourceGroupName VSTS -TemplateURI "https://raw.githubusercontent.com/RogalaPiotr/JustCloudPublic/master/simple-vm-with-installation-vsts-agent/azuredeploy.json" -Verbose</code></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="efekt-w-portalu-po-deploymencie">Efekt w portalu po deploymencie<a href="https://blog.justcloud.pl/auto-deployment-vm-with-vsts-agent-for-pool#efekt-w-portalu-po-deploymencie" class="hash-link" aria-label="Bezpośredni link do Efekt w portalu po deploymencie" title="Bezpośredni link do Efekt w portalu po deploymencie" translate="no">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Zrzut ekranu - efekt w portalu" src="https://blog.justcloud.pl/assets/images/Clipboard21-8d851887072ff59a7d848fb97d94ba0e.jpg" width="1360" height="637" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="widok-puli-agentów-w-vsts">Widok puli agentów w VSTS<a href="https://blog.justcloud.pl/auto-deployment-vm-with-vsts-agent-for-pool#widok-puli-agent%C3%B3w-w-vsts" class="hash-link" aria-label="Bezpośredni link do Widok puli agentów w VSTS" title="Bezpośredni link do Widok puli agentów w VSTS" translate="no">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Zrzut ekranu - pula agentów" src="https://blog.justcloud.pl/assets/images/Clipboard22-1b82d9e149275cd7f3aa92dc67e94dc2.jpg" width="925" height="335" class="img_ev3q"></p>
<p>Maszyna jest gotowa do deploymentów, jeśli potrzebujesz więcej maszyn możesz bez oporu deployować większą ilość 😊</p>
<p>Czas deplymentu to: 15 minutes 46 seconds.</p>]]></content>
        <author>
            <name>Piotr Rogala</name>
            <uri>https://github.com/RogalaPiotr</uri>
        </author>
        <category label="arm" term="arm"/>
        <category label="automation" term="automation"/>
        <category label="azure" term="azure"/>
        <category label="deployment" term="deployment"/>
        <category label="json" term="json"/>
        <category label="microsoft" term="microsoft"/>
        <category label="vsts" term="vsts"/>
        <category label="ado" term="ado"/>
        <category label="vm" term="vm"/>
        <category label="template" term="template"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Google Cloud Platform deployment VM z Ubuntu]]></title>
        <id>https://blog.justcloud.pl/google-cloud-platform-deployment-vm-z-ubuntu</id>
        <link href="https://blog.justcloud.pl/google-cloud-platform-deployment-vm-z-ubuntu"/>
        <updated>2017-10-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Pierwszy deployment w Google Cloud Platform nie musi być trudny. Zapraszam to sprawdzenia rozwiązań dostępnyw GCP, a zaczniemy od wdrożenia wirtualnej maszyny za pomocą szablonu.]]></summary>
        <content type="html"><![CDATA[<p>Zastanawialiście się jak działają szablony w Google Cloud Platform? Miałem jakiś czas temu możliwość dowiedzieć się jak to działa, dlatego postanowiłem zrobić mały wpis na ten temat.</p>
<p>Czym jest GCP (Google Cloud Platform)? Jeśli wiesz czym jest Azure i Amazon Web Services (AWS) to GCP jest kolejnym dostawcą z podobnymi rozwiązaniami. Od ponad roku GCP jest prężnie rozwijane w stronę rynku wirtualnych maszyn i web serwisów wychodząc na przeciw AWS'owi i Azure'owi powstał portal analogicznie podobny do zarządzania własnymi projektami można to odwzorować tak jakby do subskrypcji w Azure.</p>
<p>Portal: <a href="https://console.cloud.google.com/" target="_blank" rel="noopener noreferrer" class="">https://console.cloud.google.com</a></p>
<p><a href="https://blog.justcloud.pl/assets/files/capture_010_08102017_140927-9dda36b0a5f67893ca2a13bfbdcaba6a.jpg" target="_blank" class=""><img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/capture_010_08102017_140927-9dda36b0a5f67893ca2a13bfbdcaba6a.jpg" width="1904" height="946" class="img_ev3q"></a></p>
<p>Google udostępnia własne CLI do zarządzania projektami:&nbsp;<a href="https://cloud.google.com/sdk/" target="_blank" rel="noopener noreferrer" class="">https://cloud.google.com/sdk/</a> po instalacji SDK możemy używać komend np. do deploymentu. Deploment wirtualnej maszyny różni się znacząco od tych których używamy w Azure i AWS, mają one rozszerzenia. jinja lub. yaml gdzie możemy wspomagać nasz deployment plikami python'owymi .py. Daje to nam duże możliwości konstruowania skomplikowanych delpoymentów.</p>
<p>Zajrzyjmy do przygotowanego przeze mnie deploymentu VM z systemem ubuntu:&nbsp;<a href="https://github.com/RogalaPiotr/JustCloudPublic/blob/master/gcloud-simple-ubuntu" target="_blank" rel="noopener noreferrer" class="">https://github.com/RogalaPiotr/JustCloudPublic/blob/master/gcloud-simple-ubuntu</a></p>
<p>W poniższym kodzie należy zaktualizować go o wartości nazwy projektu podmieniając "wartość your-project-name", plik vm .yaml:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> compute.v1.instance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> simple</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ubuntu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">properties</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">zone</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> europe</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">west1</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">machineType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> projects/your</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">project</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name/zones/europe</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">west1</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">c/machineTypes/f1</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">micro</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">disks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">deviceName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PERSISTENT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">boot</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">autoDelete</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">initializeParams</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">sourceImage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> projects/your</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">project</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name/global/images/ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">1604</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xenial</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">v20170815a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">diskType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> projects/your</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">project</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name/zones/europe</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">west1</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">c/diskTypes/pd</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">standard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networkInterfaces</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">network</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> projects/your</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">project</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name/global/networks/default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">accessConfigs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> External NAT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ONE_TO_ONE_NAT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>Na pierwszy rzut oka plik nie jest skomplikowany, ponieważ plik .yaml jest tylko skrótem definicji które są wysyłane dalej do schematu gdzie pod spodem ma dużo więcej funkcji, których nie musimy definiować.</p>
<p>Po zalogowaniu się z cmd do GCP możemy wywołać powyższy deployment używając polecenia:</p>
<p><code>gcloud deployment-manager deployments create simple-ubuntu --config vm.yaml</code></p>
<p>Po wykonaniu tego polecenia rozpocznie się deployment a następnie zostanie uruchomiona maszyna z systemem ubuntu. Zapraszam do testowania i zadawani pytań.</p>
<p><img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/capture_012_08102017_145512-3b50e7a61b62877d75884b25d100dce0.jpg" width="1279" height="587" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/capture_013_08102017_145520-92105ab0554ba04be699dfa98d5ccd44.jpg" width="896" height="228" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/capture_014_08102017_145606-7a18296796b1ffe41fcde1edeeeb44c3.jpg" width="1018" height="600" class="img_ev3q"></p>]]></content>
        <author>
            <name>Piotr Rogala</name>
            <uri>https://github.com/RogalaPiotr</uri>
        </author>
        <category label="gcloud" term="gcloud"/>
        <category label="gcp" term="gcp"/>
        <category label="google cloud-platform" term="google cloud-platform"/>
        <category label="ubuntu" term="ubuntu"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Delete VM and create again based on .vhd]]></title>
        <id>https://blog.justcloud.pl/delete-vm-and-create-again-based-on-vhd</id>
        <link href="https://blog.justcloud.pl/delete-vm-and-create-again-based-on-vhd"/>
        <updated>2017-09-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Rekreowanie maszyny z istniejącego dysku może być konieczne kiedy mamy migrację lub problemy z maszyną. Ten artykuł opisuje jak sprawnie przejść przed ten proces.]]></summary>
        <content type="html"><![CDATA[<p>W tej części tytuł jest angielski, ponieważ nie stosuje spolszczeń dla technicznego języka. Ten post jest spowodowany tym co Microsoft niestety przestał wspierać w Azure a mianowicie breaklease dla blobów podpiętych do wirtualnej maszyny.</p>
<p>Było mi to potrzebne do jednego zadania, dlatego byłem zmuszony zrobić coś innego. Mianowicie potrzebne mi było usunięcie maszyny i stworzenie jej bazując na istniejących vhd'kach w innym kontenerze dodatkowo moje założenie wymagało powershell'a. W skrócie odtworzenie maszyny z jakiegoś stanu, który jest przechowywany jako kopia dysków wirtualnej maszyny. Myślę, że są osoby, którym się to przyda.</p>
<p>Krótki opis:</p>
<ol>
<li class="">Podajemy nazwę maszyny lub listę maszyn z naszej subskrypcji.</li>
<li class="">Na podstawie nazwy maszyny znajdujemy resource groupe.</li>
<li class="">Wyłączamy maszynę.</li>
<li class="">Na podstawie RG i nazwy VM sprawdzamy jakie dyski są podpięte do maszyny.</li>
<li class="">Znajdujemy sobie context dla dysków.</li>
<li class="">Mając wszystkie dane przechodzimy do usuwania maszyny.</li>
<li class="">Usuwany obecny vhd z OS.</li>
<li class="">Kopiujemy w jego miejsce wcześniej skopiowany vhd z kontenera "images".</li>
<li class="">Przeprowadzamy dalej tą samą operacje dla wszystkich podpiętych dysków data.</li>
<li class="">Na podstawie wszystkich zebranych wcześniej danych tworzymy wirtualną maszynę.</li>
</ol>
<p>Puenta jest taka. Jeśli okaże się, że któregoś razu Microsoft Support powie wam, że trzeba usunąć maszynę i stworzyć ją ponownie dzięki temu skryptowi możecie to zrobić zaledwie w 5 minut i potwierdzić, czy to pomogło czy diagnoza Supportu była niewłaściwa. Zdarza się, że MS sugeruje usunięcie maszyny i stworzenie jej ponownie i mając np. 5 maszyn wiecie, że nie jest to zabawa na 5 minut. Ale teraz wykorzystując ten skrypt możecie to zrobić. Wcześniejszym etapem będzie poprawienie skryptu, aby nie usuwać dysków vhd tylko użyć obecnych. Natomiast jeśli chcecie zrobić sobie kopie bezpieczeństwa dysków vhd to będzie należeć przeprowadzić procedurę wyłączenia maszyn skopiowania vhd'ków np. do kontenera "images" i puścić poniższy skrypt.</p>
<p>Skrpyt w bardziej czytelnej formie na github:&nbsp;<a href="https://github.com/RogalaPiotr/JustCloudPublic/tree/master/recreate-vm-from-vhd" target="_blank" rel="noopener noreferrer" class="">https://github.com/RogalaPiotr/JustCloudPublic/tree/master/recreate-vm-from-vhd</a></p>
<div class="language-ps1 codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ps1 codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$vms = @("SimpleWindowsVM")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$sourcecontainerimage = "images"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function recreatevms {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    foreach ($vm in $vms) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Write-Host "VM name: "$vm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $vmrg = Get-AzureRmResource | Where-Object {$_.Name -like $vm}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Write-Host "VM Resource Group: "$vmrg.ResourceGroupName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $vmsize = (Get-AzureRmVM -ResourceGroupName $vmrg.ResourceGroupName -VMName $vm).HardwareProfile.VmSize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Write-Host "VM size: "$vmsize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $nicvm = Get-AzureRmNetworkInterface -ResourceGroupName $vmrg.ResourceGroupName | Where-Object {$_.VirtualMachine.Id -like "*$vm*"}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Write-Host "VM NIC name: "$nicvm.Name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $vmstatus = Get-AzureRmVM -ResourceGroupName $vmrg.ResourceGroupName -Name $vm -Status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Write-Host "VM status is: "$vmstatus.Statuses.DisplayStatus[1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if($vmstatus.Statuses.DisplayStatus -like "*running*"){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Write-Host "VM stopping: "$vm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            $tmp = Stop-AzureRmVM -ResourceGroupName $vmrg.ResourceGroupName -Name $vm -Force</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $vmdiskos = ((Get-AzureRmVM -ResourceGroupName $vmrg.ResourceGroupName -Name $vm).StorageProfile).OsDisk 3&gt; $null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $vmdisksdata = ((Get-AzureRmVM -ResourceGroupName $vmrg.ResourceGroupName -Name $vm).StorageProfile).DataDisks 3&gt; $null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Write-Host "Get VM disk os: "$vmdiskos.Name </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Write-Host "Get VM disk data: "$vmdisksdata.Name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Write-Host "Get VM disk data count: "$vmdisksdata.Count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $storagediskosname = ($vmdiskos.Vhd.Uri.Split("/")[2]).Replace(".blob.core.windows.net","")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $containerdiskos = ($vmdiskos.Vhd.Uri.Split("/")[3])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $vmdiskosname = ($vmdiskos.Vhd.Uri.Split("/")[4])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $storageaccountos = Get-AzureRmResource | Where-Object {$_.Name -like "$storagediskosname"}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $storageaccountkeyos = (Get-AzureRmStorageAccountKey -Name $storageaccountos.Name -ResourceGroupName $storageaccountos.ResourceGroupName).Value[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $storagecontext = New-AzureStorageContext -StorageAccountName $storageaccountos.Name -StorageAccountKey $storageaccountkeyos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $container = Get-AzureStorageContainer -Name $containerdiskos -context $storagecontext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $containerdiskosimage = $vmdiskos.Vhd.Uri -replace("vhds",$sourcecontainerimage)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Remove-AzureRmVM -Name $vm -ResourceGroupName $vmrg.ResourceGroupName -Force</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Write-Host "Removing VM: "$vm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Remove-AzureStorageBlob -Blob $vmdiskosname -Container vhds -Context $storagecontext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Write-Host "Removing VM os disk uri: "$vmdiskos.Vhd.Uri</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $tmp = Start-AzureStorageBlobCopy -srcUri $containerdiskosimage -SrcContext $storagecontext -DestContainer $containerdiskos -DestBlob $vmdiskosname -DestContext $storagecontext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Write-Host  "Copying new os disk uri: "$containerdiskosimage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (![string]::IsNullOrEmpty($vmdisksdata)){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            foreach ($vmdiskdata in $vmdisksdata){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                $storagediskdataname = ($vmdiskdata.Vhd.Uri.Split("/")[2]).Replace(".blob.core.windows.net","")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                $containerdiskdata = ($vmdiskdata.Vhd.Uri.Split("/")[3])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                $vmdiskdataname = ($vmdiskdata.Vhd.Uri.Split("/")[4])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                $storageaccountdata = Get-AzureRmResource | Where-Object {$_.Name -like "$storagediskdataname"}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                $storageaccountkeydata = (Get-AzureRmStorageAccountKey -Name $storageaccountdata.Name -ResourceGroupName $storageaccountdata.ResourceGroupName).Value[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                $storagecontext = New-AzureStorageContext -StorageAccountName $storageaccountdata.Name -StorageAccountKey $storageaccountkeydata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                $container = Get-AzureStorageContainer -Name $containerdiskdata -context $storagecontext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                $containerdiskdataimage = $vmdiskdata.Vhd.Uri -replace("vhds",$sourcecontainerimage)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Remove-AzureStorageBlob -Blob $vmdiskdataname -Container vhds -Context $storagecontext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Write-Host "Removing VM data disk uri: "$vmdiskdata.Vhd.Uri</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                $tmp = Start-AzureStorageBlobCopy -srcUri $containerdiskdataimage -SrcContext $storagecontext -DestContainer $containerdiskdata -DestBlob $vmdiskdataname -DestContext $storagecontext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Write-Host  "Copying new os disk uri: "$containerdiskdataimage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Write-Host "Creating VM"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $vmConfig = New-AzureRmVMConfig -VMName $vm -VMSize $vmsize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $vmConfig = Set-AzureRmVMOSDisk -VM $vmConfig -Name $vmdiskos.Name -VhdUri $vmdiskos.Vhd.Uri -CreateOption Attach -Windows</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if ($vmdisksdata.count -ge 0){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            $i = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            foreach ($vmdiskdatavm in $vmdisksdata){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                $vmConfig = Add-AzureRmVMDataDisk -VM $vmConfig -VhdUri $vmdiskdatavm.Vhd.Uri -CreateOption Attach -Lun $i -Name $vmdiskdatavm.Name -Caching ReadWrite</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                $i++</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $vmConfig = Add-AzureRmVMNetworkInterface -VM $vmConfig -Id $nicvm.Id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $vmConfig = Set-AzureRmVMBootDiagnostics -VM $vmConfig -Disable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $vm = New-AzureRmVM -VM $vmConfig -Location $vmrg.Location -ResourceGroupName $vmrg.ResourceGroupName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">############################################################################################################</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Recreate VM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">############################################################################################################</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">recreatevms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>]]></content>
        <author>
            <name>Piotr Rogala</name>
            <uri>https://github.com/RogalaPiotr</uri>
        </author>
        <category label="azure" term="azure"/>
        <category label="blob" term="blob"/>
        <category label="devops" term="devops"/>
        <category label="powershell" term="powershell"/>
        <category label="storage" term="storage"/>
        <category label="vm" term="vm"/>
        <category label="migracja" term="migracja"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Deployment maszyny z funkcją Auto-Shutdown  za pomocą szablonu arm]]></title>
        <id>https://blog.justcloud.pl/deployment-maszyny-z-funkcja-auto-shutdown-za-pomoca-szablonu-arm</id>
        <link href="https://blog.justcloud.pl/deployment-maszyny-z-funkcja-auto-shutdown-za-pomoca-szablonu-arm"/>
        <updated>2017-09-03T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Jak wyłączyć maszynę automatycznie o danej godzinie? Zapomocą tego skryptu zrobisz to!]]></summary>
        <content type="html"><![CDATA[<p>Szablony ARM mają nam pomać w pracy dlatego kiedy testuję wiele szablonów zdarza mi się, że zapominam o resource'ach, które utworzyłem w Azure co powoduje, że marnuję pieniądzę na subskrypcji. Powodem są zazwyczaj późne godziny pracy i przemęczenie, a później te z deploy'owane wirtualki działają przez parę dni nic nie robiąc.</p>
<p>Dlatego postanowiłem sobie pomóc i do każego deploy'mentu dodaję wpis który wyłączy wirtualkę o jakiejś godzinie. Poniższy przykład zaprezentuje deplyment Windows'a 2016 z manage disk'iem i "Microsoft.DevTestLab/schedules".</p>
<p>W poprzendich moich postach możesz przeczytać jak zalogować się do Azure za pomocą PowerShell i CLI oraz jak używać do deploymentów Visual Studio Code i Visual Studio.</p>
<p><strong>Przydatne linki:</strong></p>
<ul>
<li class="">Wygodny profil logowania:&nbsp;<a href="https://justcloud.azurewebsites.net/blog/profil-logowania-do-azure/" target="_blank" rel="noopener noreferrer" class="">https://justcloud.azurewebsites.net/blog/profil-logowania-do-azure/</a></li>
<li class="">Logowanie za pomacą CLI:&nbsp;<a href="https://justcloud.azurewebsites.net/blog/azure-cli-logowanie/" target="_blank" rel="noopener noreferrer" class="">https://justcloud.azurewebsites.net/blog/azure-cli-logowanie/</a></li>
<li class="">Visual Studio Code:&nbsp;<a href="https://justcloud.azurewebsites.net/blog/visual-studio-code-i-git-zamiast-powershell-ise/" target="_blank" rel="noopener noreferrer" class="">https://justcloud.azurewebsites.net/blog/visual-studio-code-i-git-zamiast-powershell-ise/</a></li>
<li class="">Visual Studio:&nbsp;<a href="https://justcloud.azurewebsites.net/blog/tworzenie-szablonu-arm-visual-studio-2017/" target="_blank" rel="noopener noreferrer" class="">https://justcloud.azurewebsites.net/blog/tworzenie-szablonu-arm-visual-studio-2017/</a></li>
</ul>
<p><strong>Źródła:</strong></p>
<ul>
<li class="">Dokumentacja: <a href="https://docs.microsoft.com/en-us/azure/templates/microsoft.devtestlab/schedules" target="_blank" rel="noopener noreferrer" class="">https://docs.microsoft.com/en-us/azure/templates/microsoft.devtestlab/schedules</a></li>
<li class="">Zones: <a href="https://msdn.microsoft.com/en-us/library/gg154758.aspx" target="_blank" rel="noopener noreferrer" class="">https://msdn.microsoft.com/en-us/library/gg154758.aspx</a></li>
</ul>
<p><strong>Kod:</strong></p>
<ul>
<li class="">Szablon dostępny jest na moim github'ie: <a href="https://github.com/RogalaPiotr/JustCloudPublic/blob/master/simple-vm-shutdown-on-time/azuredeploy.json" target="_blank" rel="noopener noreferrer" class="">https://github.com/RogalaPiotr/JustCloudPublic/blob/master/simple-vm-shutdown-on-time/azuredeploy.json</a></li>
</ul>
<p>Szablon jest bezobsługowy dlatego wystarczy wywołać go komendą:</p>
<div class="language-csv codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csv codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">New-AzureRMResourceGroupDeployment -ResourceGroupName XXX -TemplateURI "https://raw.githubusercontent.com/RogalaPiotr/JustCloudPublic/master/simple-vm-shutdown-on-time/azuredeploy.json" -adminUsername XXX -adminPassword XXX -vmName XXX</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>Poniżej mamy zaprezentowaną sekcję parameters. W niej możemy zdefiniować nazwę VM'ki jaka ma powstać oraz nazwę użytkownika i hasło. Aby ułatwić sobię pracę to dla DNS'u wykorzystałem funkcję unicqueString, aby generować sobię unikatową nazwę dla powstającego serwera.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"parameters"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"adminUsername"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"metadata"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"description"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Username for the Virtual Machine."</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"adminPassword"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"securestring"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"metadata"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"description"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Password for the Virtual Machine."</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"dnsLabelPrefix"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"defaultValue"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[concat('x', uniqueString(resourceGroup().id))]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"metadata"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"description"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Unique DNS Name for the Public IP used to access the Virtual Machine."</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"vmName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"metadata"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"description"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Unique DNS Name for the Public IP used to access the Virtual Machine."</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>Sekcja variables. W tej sekcji zefiniowane zostały wszystkie istotne wartości dla deploy'mentu. Wielkość maszyny, wersje Windows'a, adresacje itp. możesz modyfikować tutaj.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"variables"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"windowsOSVersion"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2016-Datacenter"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"vmsize"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Standard_A1"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"publicIPAddressName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[concat(parameters('vmName'), '-pip')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"virtualNetworkName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[concat(parameters('vmName'), '-vnet')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"nicName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[concat(parameters('vmName'), '-nic')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"subnetName"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[concat(parameters('vmName'), '-subnet')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"diskname"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[concat(parameters('vmName'), '-disk')]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"addressPrefix"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"10.0.0.0/16"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"subnetPrefix"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"10.0.0.0/24"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"subnetRef"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[resourceId('Microsoft.Network/virtualNetworks/subnets', variables('virtualNetworkName'), variables('subnetName'))]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>Najważniejsza sekcja odpowidająca za wyłączenie maszyny to "type":"Microsoft.DevTestLab/schedules" w niej definiujemy strefę czasową według której powinien być wyłączony serwer oraz godzinę.</p>
<p>Link do wszystkich stref znajdziesz na górze posta.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"apiVersion"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2016-05-15"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Microsoft.DevTestLab/schedules"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[concat('shutdown-computevm-', parameters('vmName'))]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"location"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[resourceGroup().location]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"dependsOn"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"[resourceId('Microsoft.Compute/virtualMachines/', parameters('vmName'))]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"properties"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"status"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Enabled"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"timeZoneId"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"W. Europe Standard Time"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"taskType"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"ComputeVmShutdownTask"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"notificationSettings"</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"status"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Disabled"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"timeInMinutes"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">35</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"targetResourceId"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"[resourceId('Microsoft.Compute/virtualMachines', parameters('vmName'))]"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"dailyRecurrence"</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"time"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"1800"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>Efekt widoczny w portalu:</p>
<p><img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/capture_001_03092017_160447-fa5d61f71417740d1bb82288fdba9b2b.jpg" width="840" height="265" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/capture_002_03092017_160519-6298ce6a37f3940b351c6041824928a4.jpg" width="1060" height="503" class="img_ev3q"></p>
<p>Mam nadzięję, że się przyda :)</p>]]></content>
        <author>
            <name>Piotr Rogala</name>
            <uri>https://github.com/RogalaPiotr</uri>
        </author>
        <category label="arm" term="arm"/>
        <category label="auto-shutdown" term="auto-shutdown"/>
        <category label="azure-resource-manager" term="azure-resource-manager"/>
        <category label="deplyment" term="deplyment"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Profil logowania do Azure]]></title>
        <id>https://blog.justcloud.pl/profil-logowania-do-azure</id>
        <link href="https://blog.justcloud.pl/profil-logowania-do-azure"/>
        <updated>2017-08-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Pracujesz dużo w konsoli PowerShell? Nie chcesz logować się co chwilę? Wykorzystaj plik z kontekstem, który ułatwi Ci pracę z konsolą!]]></summary>
        <content type="html"><![CDATA[<p>Spotkałem się ostatnio z bardzo ciekawym feature'm związanym z zapisaniem swojego profilu logowania do Azure. W skrócie opisując jeśli używasz często PowerShella, a dodatkowo masz MFA zapewne wiesz jak denerwujące jest ciągłe pytanie o login i hasło.</p>
<p>Kiedyś pojawiła się opcja związana z zapisaniem credential'i do pliku a następnie za pomocą skryptu można było sobie zautomatyzować proces logowania. Aczkolwiek przestało to działać po wprowadzeniu ARM'a itd. Aby nie rozwodzić się nad tym przedstawię Ci jak możemy sobie ułatwić życie i pracę ze skryptami, ale o tym później. Na początku proszę Cię o wykonanie aktualizacji PowerShell Azure ponieważ poniższe polecenia są dostępne od wersji 3.8.0 oraz 4.2.0 w celu aktualizacji możesz użyć Web Installer'a z linku poniżej.</p>
<p><strong>Dokumentacja:</strong> Add-AzureRmAccount: <a href="https://docs.microsoft.com/en-us/powershell/module/azurerm.profile/add-azurermaccount?view=azurermps-3.8.0" target="_blank" rel="noopener noreferrer" class="">https://docs.microsoft.com/en-us/powershell/module/azurerm.profile/add-azurermaccount?view=azurermps-3.8.0</a> Save-AzureRmContext: <a href="https://docs.microsoft.com/en-us/powershell/module/azurerm.profile/save-azurermcontext?view=azurermps-3.8.0" target="_blank" rel="noopener noreferrer" class="">https://docs.microsoft.com/en-us/powershell/module/azurerm.profile/save-azurermcontext?view=azurermps-3.8.0</a> Import-AzureRmContext: <a href="https://docs.microsoft.com/en-us/powershell/module/azurerm.profile/import-azurermcontext?view=azurermps-4.2.0" target="_blank" rel="noopener noreferrer" class="">https://docs.microsoft.com/en-us/powershell/module/azurerm.profile/import-azurermcontext?view=azurermps-4.2.0</a> WebInstaller: <a href="https://www.microsoft.com/web/downloads/platform.aspx" target="_blank" rel="noopener noreferrer" class="">https://www.microsoft.com/web/downloads/platform.aspx</a></p>
<p>W moim przypadku mamy dwie subskrypcje i zapisując swój profil mogę zdefiniować jaka ma zostać wybrana subskrypcja w momencie kiedy będę go importował w dalszej części. Na początku pobiore ID Subskrypcji w klasyczny sposób: otwieram okno PowerShella loguję się używając <em>Login-AzureRmAccount</em>, a następnie wpisuję <em>Get-AzureRmSubscrpytion</em> i dostaje taki wynik:</p>
<p><img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/loginazure1-3fe0cd6c04d1e158f1d20aa6e266b459.jpg" width="459" height="244" class="img_ev3q"></p>
<p>Następnie mogę przejść do wykonania polecenia, które mnie zaloguje, a później umożliwi mi zapisanie profilu:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Add-AzureRmAccount -SubscriptionId "yyyy-yyyy-yyyy-yyyy"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>Wynik:</p>
<p><img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/loginazure2-e20fe9f949caa707b688f621aa0d8566.jpg" width="650" height="190" class="img_ev3q"></p>
<p>Następne polecenie - zapisanie profilu:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Save-AzureRmContext -Path C:\\temp\\progala-mas.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/loginazure3-c56c6350ce0457b03971d805cacb03bf.jpg" width="1133" height="294" class="img_ev3q"></p>
<p>W tym momencie zapisałem swój profil z odwołaniem do wcześniej wskazanej subskrypcji. Jako hint mogę powiedzieć, że możemy użyć funkcji 2w1 jak poniżej:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Save-AzureRmContext -Profile (Add-AzureRmAccount -SubscriptionId "yyyy-yyyy-yyyy-yyyy") -Path C:\\temp\\progala-mas.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>Żeby móc zaimportować zapisany profil wystarczy użyć polecenia:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Import-AzureRmContext -Path C:\\temp\\progala-mas.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/loginazure4-71ea87c67de8a8095dbb574859bddca1.jpg" width="530" height="195" class="img_ev3q"></p>
<p>W taki sposób możemy swój profil wywołać gdy korzystamy z róznych skryptów itp. Może to być dla kogoś mało atrakcyjne aczkolwiek mogę zdradzić do czego bardzo ta wiedza się przydaje. Mając zagnieżdżone skrypty PowerShellow’e, które wykonuję jako Job'y mają one to do siebie, że wywołane skrypty w tle mają problem z przejęciem sesji z poprzedniego okna gdyż sesja nie jest dziedziczona. Gdy użyjemy polecenia Import-AzureRmContex mamy "gwarancję", że wywołane okno w tle będzie mogło swobodnie korzystać z sesji Azure'owej.</p>]]></content>
        <author>
            <name>Piotr Rogala</name>
            <uri>https://github.com/RogalaPiotr</uri>
        </author>
        <category label="azure" term="azure"/>
        <category label="azurermaccount" term="azurermaccount"/>
        <category label="azurermcontext" term="azurermcontext"/>
        <category label="import-azurermcontext" term="import-azurermcontext"/>
        <category label="powershell" term="powershell"/>
        <category label="subscryption" term="subscryption"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Visual Studio Code i Git zamiast PowerShell ISE - UPDATED]]></title>
        <id>https://blog.justcloud.pl/visual-studio-code-i-git-zamiast-powershell-ise</id>
        <link href="https://blog.justcloud.pl/visual-studio-code-i-git-zamiast-powershell-ise"/>
        <updated>2017-08-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Wykorzystaj w pełni Visual Studio Code oraz GIT! W tym artykule dowiesz się jak skonfigurować swoje środowisko do pracy.]]></summary>
        <content type="html"><![CDATA[<p>Większość z was zapewne widziała już Visual Studio Code taki Visual Studio w wersji "light". Program jest dostępny na platformy Windows, Linux, Mac można powiedzieć, że to dosyć dziwne i takie nie Microsoft'owe a zarazem jest bardzo poważny krok w stronę DevOps'ów.</p>
<p>Jeśli używałeś wcześniej różnych edytorów tekstowych to pewnie miałeś bądź nadal używasz programu Sublime Text. Myślę, że jak użyje określenia odpowiednik to zapewne już wiesz o czym tutaj piszę.</p>
<p>Czym jest Visual Studio Code? Jest to edytor tekstowy z możliwością zainstalowania różnych modułów. Z defaultu program ma kontrolę wersji (wymagana instalacja Git'a) i debug. Ponoć w niedalekiej przyszłości VSC ma zastąpić PowerShell ISE dlatego przejdźmy do konfiguracji, aby móc z niego korzystać.</p>
<p>Do ściągnięcia z:&nbsp;<a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer" class="">https://code.visualstudio.com/</a></p>
<p>Instruktarz video:&nbsp;<a href="https://channel9.msdn.com/Blogs/MVP-Azure/Transitioning-from-PowerShell-ISE-to-VS-Code" target="_blank" rel="noopener noreferrer" class="">https://channel9.msdn.com/Blogs/MVP-Azure/Transitioning-from-PowerShell-ISE-to-VS-Code</a></p>
<p>Instalacja bardzo prosta: "next/next/next"</p>
<p>Aby korzystać z comand line'u PowerShella należy doinstalować moduł:&nbsp;<a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.PowerShell" target="_blank" rel="noopener noreferrer" class="">https://marketplace.visualstudio.com/items?itemName=ms-vscode.PowerShell</a></p>
<p>W VSC naciskamy Ctrl +P i wklejamy:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ext install PowerShell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/capture_016_02082017_195824-317b225cdbb911d0cf729293749fa4b8.jpg" width="1147" height="709" class="img_ev3q"></p>
<p>Restartujemy VSC i klikamy New file, żeby nasz plik był używany jako skrypt PowerShell’owy możemy go zapisać jako .ps1 lub wybrać w dolny prawym rogu "Plain Text" i wpisać powershell. Dopiero teraz możemy używać obszaru roboczego jak w dotychczasowym PowerShell ISE i działają skróty F5 i F8 do wykonywania poleceń. Jeśli jakimś cudem nie widzisz okna Terminal możesz je włączyć View &gt; Integrated Terminal.</p>
<p><img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/capture_015_02082017_195549-6aa01bac3eae55f7cfe4261a801cf30e.jpg" width="841" height="582" class="img_ev3q"></p>
<p>Przykład z "Get-Service" + F8</p>
<p><img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/capture_017_02082017_200027-0090502f04a1663589750a94f687bd42.jpg" width="1048" height="708" class="img_ev3q"></p>
<p>Chcesz używać Git'a? Poniżej przedstawię jedną z szybkich opcji jak sobie poradzić z używaniem Git'a z poziomu Visual Studio Code - tutaj tylko dodam, że nie jest to jedyna opcja i zależy to oczywiście od umiejętności pracy z Git'em. Aby szybko sobie skonfigurować środowisko do pracy z Git'em ściągamy instalkę z: <a href="https://git-scm.com/downloads" target="_blank" rel="noopener noreferrer" class="">https://git-scm.com/downloads</a></p>
<p>Instalację przeprowadzamy z default'owymi ustawieniami. Następnie restartujemy VSC i klikamy File &gt; Open Folder - teraz otwórz lokalizacje, gdzie będziesz chciał sklonować swoje repozytorium. W moim przykładzie utworzyłem sobie folder Git w Documents (C:\Users\Admin\Documents\Git). Przechodzimy do okna Terminala, jeśli nie jest on u Ciebie widoczny to możesz wybrać View &gt; Integrated Terminal, aby go wyświetlić. W polu terminala wpisujemy:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone link_do_projektu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/capture_002_18022018_231506-bebf2131707a9dce12103985d3079cbd.jpg" width="716" height="153" class="img_ev3q"></p>
<p>Jeśli nie wiesz, gdzie jest ten link, poniższy screen powinien to wyjaśnić. Na stronie&nbsp;<a href="https://your-project-name.visualstudio.com/" target="_blank" rel="noopener noreferrer" class="">https://your-project-name.visualstudio.com</a> jest możliwość sprawdzenia dokładnie adresu repozytorium klikając po prawej stronie na górze "Clone"</p>
<p><img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/capture_001_18022018_231008-0522ff828b920bfa41d599483e3a8bb9.jpg" width="434" height="466" class="img_ev3q"></p>
<p>Po kliknięciu enter wyskoczy okno do zalogowania się a później rozpocznie się klonowania do wskazanej lokalizacji. Po zakończeniu klonowania nasza konfiguracja dobiegła końca. Teraz możemy wrzucić do folderu jakiś skrypt a następnie zauważymy go w VSC na ikonie gałęzi w celu wysłania go do naszego repozytorium jak na poniższym screenie. Jeśli mamy plik, który został utworzony lub z edytowany należy go za commitowac dodając opis zmiany i kliknąć ptaszek. Po zatwierdzeniu na dole należy zrobić synchronizacje. Trzeba pamiętać, aby zawsze przed commitem wykonać synchronizacje, aby mieć pewność że pracujemy zawsze na najnowszych plikach z repozytorium.</p>
<p><img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/capture_010_01082017_205024-86512d1ade1c7598e6d3f4bf21377af0.jpg" width="444" height="310" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAzAL8DASIAAhEBAxEB/8QAHAAAAgIDAQEAAAAAAAAAAAAAAAYBBQMEBwII/8QAQhAAAQIEAwQGBwQJBAMAAAAAAQIDAAQFEQYSIRMxQVEHFBdVYaQiMoGRodLTFUJx0RYjJDNSVHKSlDRDRJOxwfH/xAAaAQABBQEAAAAAAAAAAAAAAAAAAQIDBAUG/8QANxEAAQMCAgYHBgYDAAAAAAAAAQACAwQRBRITFCExUdEGFVRhcZGSIjJBUmKBFmNyobHhQpPB/9oADAMBAAIRAxEAPwDjA0FhuvePUefaIPaIdlSZkRIiPaIn2iDKlzKuc/eKjzHp0jaL1G+BhAdfbbzAZ1BN+VzCEWFynMBkcGN3nYvMQdx14RfPy9LlVJbf0XlvqVa+OkYwaNuuNf64o64HN9ljiPBdOejT4H5JKmFrhvBfYj7WXS8KzAZk6VMKPotlCiBvIFo7SrFOF8QMty9UCUlPqiYTaxPIx8xS+IkSkullmaytIFgnZk218RG3L4hcmDkanWiT91WRJ+IjLDponOsw5TxC3n4XSzxtaamMObweF9QMMYOobTLwXKld87d1Z1X4WhW6RcTS9dRLolEOpDClFRcTlvcRxV2tVGSaBdnGmkEaFRbivcxg4bpVP3B32bFveBCSPmkGVjLA77BMhwWlgkEslVGSN13hVOPF5q+ofwthJhdhhnZunTr6n5pzO6si59IfARr3o3Me9caME5jYGujd5LHqsCE0rnirhsfzP6VNBccSE+Ji5vRuY964M1GH3re1cTa3+W7yVb8ON7XD/s/pU1j62VWW1gQLXvAkaAAiw8D7ofZ2UmJyQYZmWg5LpaDzaQEg5NwOmvGMM5LzTtOTRGghIDqMqTbQ3tqeO+AVgzBrmOFzbaEP6NvET5Ip4n5AXENfc2G82skgWvwSTwUb6fnBYgWN/aLQzqw0yVzbUlUy/OSdlOM7PKBrrY8bRd4kozNXqTSETuxm0yaXG2dl6KgE3N1cDF3KuczNXPf/ALEWhpkMJmck1OofmUrSyXTdgbPQagKvf4R6l8KMuNU7a1MtvTySppsM31HAm8Fkl2pV5+O+IUnMDyJ1POGn9FEvMrVIVBMw428GHUlvKlCvx4x7qODn5SVddl3nHHGlhCkOICAq/EG5uILIu1XXUJQ7pZn+2J+z5b+VZ/ti4o9FqVW2gpsmuY2RRtMlgEA7rkmN1/CuIGmJh1+kTQZYKtqdPQA32F93iI7ginb72UeS4AOqXbWk2+6Weoyt7dWZv/TB1CV/lmefqwxS+GqvNSIm5aQcelAjaKyLRqkb/Rvf4QN4arL8imdYp76pRYzBaShIUN1wCbmEcaUcP2QHVDrWLv3S0aZJZtZRnUX9WPLlNlG2y4mUZSQCUkJ1Bh2ruC6nS5mUZQy8/wBZQjLcJBLhFygAE7uJinq9Aq0g3lm5B1srbWoXWlQypSVKNwbCw4XivO+ldC8ttuPDgr2HaxrkNyfebx4hL0tJS0ygqfYbcWDYFQubRl+y5G3+jl/ai8ZKckiWzqsGyspBJ42HC8bBuE2VobfCIMCgjdQROIF7cFq9NZpW49VAOPvce4LSNMkQcvU2Bx/dxP2ZImw6pL77W3RfYcpa63WpWntKKC+uxVa5CQLk+6Hg1DCFLqiaK1RpaZl0L2czPTayCCN5TYGLU7oo3ZQzMe4BYUDpXguMmUeJXKRTafa/U2LXy7uMejSpK+knL34+heHXHcvh+Wm5D9GJjaS2xyLUCoknMT6xGsZsH02g1mak6W5JTHXlsrcenA+oJQsXKTktYjdvhuki0YkybPAJzzNnyB5P3SEmlyBOklL8tW4lVJkR/wANjl6sX7dMC6HUp/bKzyj6GkItcEKWUk356RnwhS2KxV1In1rEkyw4+8UGyilAuU34XiYmANLiBs7lBmnLgMx296V/syR0/Y2P7YkUyQvrJsWtfROsPNQo1KnaDI1elJVTJdyaMm+madK0gg6Kzb7c4rMU0Vmh1QysvOszqAN6E5Sg8lCGQvglNso8k+Vs8YLi42HeqVACVNlBsptGRKgNyeQjSJP2qVWAVmze2143Qq3MeIjewfRkV/HMlTHFltt9SsxRvslsqNvEgfGMzpBHHEyndYWErf8Aq6/oRJJI6vaSbmml+P6VWtNMtPOutIQ245o4b+koHnGQCz4e/wB8AtBzknl7uEdoD2DpaSepxw3eqtO9WRIrbu+7fTNm4i1zeEDH+GDhmsNsNKV1OZb2jG09ZA4oUeNt14uU9TBM/Jktw2BcvPBPCzPnvx2pWXZTgcsSu2RKuITxHgI8ZU5miEjM1o2f4RyEONKpdGlsPU2oVlh+adqM1sW0NPFoNJBylWm/WKfFdLFDxDPU9Dm0DKgW1n1ilQuBfjFiN0D35A0eQVdxna3OXHzVSyBLrcLA2alK2iraZjzjB1KVS8XlSzZeV6Slg6m/jDp0dURmo1h+cn2s9NpzKpqYBR64SPUA3cPbEdIlCRRq23MSLZap1QaTMy33cgULlJ8fCG6SDT6DKL+AT9HPotNmNvErToVRYlcMYjlXHw1NTRl9kjXM6Ek5vDlDVI4lkRi6WmZqpXlWqKJYOLuQHSDmTbmdI5qSnLbaNf8Aan84LpJOZxk33jaJ/OCSlhkJJdtKGSzssA3curYUrGGKTKyK2pumSyzLLRNlxkqmS4QdM1tE/hC+mepk5hNDGIpqmvzEpLnqIlysTTKuDahbKoc9YSgtNrKcbVy/Wp0+MRnTawca3De4k6898Q6hD8Xfwpdan2WZuXTZDENHl8SUuqrqEsptUiiUcTkUVy7gQQVKBFin8Ipq1WFmSMs5VqLNyIbmlJap8qWcq1MrSlStOOb3wl5kne40Ta1y6k/+48PuBTLgLrZGUmwdTvt+PwiGehhETyHfA8OCuYdUzmriBb/k3+Qten/uiRvzH/xG0nThp4C8aUm+hpohSrG990ZxNsjcog8CAdIhwXEaOKhiY+VoIG4kLf6X9H8VqcbqZoaWRzS7YQxxB8CAr7CTqGsS05brrrbYcCNq05s1Ivpv5Q9VzAdOnptt7DNTkW5RRVtVzEwVLz5jmsDvjk5m2Te6t5v6pjz1iWNr5Tbmm8TT1lG94fHUNB/UOaxoej+MNYWPopCD9DuSfcf1WRclKVRaO51iVpaVIL9rFTh9a3hGVh+Rl8PS8lRq5SJF6Yb/AG52YLgeUb+oCE2CY5+mbYSbhSr87GJM61a2YkciDCaxQiMMFQ3fc+0OaDgWNF+Y0Um63uO5JxlHqMjBVUkZiffE446ghhpoELUgkgoPFPMnWNfBVSlZKruJqjmykZmXcl3Xk65QoaEwqCcbBHpaDcLbonrjY3KN+Gm6JdboCHNM7dv1N5qIdHcZBBFFJs+h/JOdZm5CQwlK0OQqDNQWqb65MTDIIQgX9EC+t4rsXzrM9iObmZR0PMqtZadx0G6F4TrYFgbC9xodDxMR1tr+PQabjCQVWHxG+nb6hzUkuA45I0s1OSx+h3JZ9dSYssDVdihY+p9Rm8xl2SoLKRqApopuB4Xv7IphNtD759xjA24lVSC0qCU3vcm1tPGM/HKylqxBFFIHEyN3EHZtHwXTdEcIxHDtemqoHsbq8oBc0gX9k2uRv2Fd/ew9Izyl144obVVVPB1idCglKEDcjJ/TeOfdJ2JWMRVxCpRe2lZNotIeAyl0k3UoDhqNByhPOzvopkfg4n84krF9FtWG79anT46xp01EyJ+dz723LiJ53ysyNYRfaU5Ut6kz2GaNKVCps06ap0wVkOpJDrSlZiE2B14RS4uqjVaxLPT7KShhyyW76eigWHvtFMFpBNltC5vo6n84gqQb3W0bm5/WJ1PvizHTxRvzh39Ku50z25C1d9wJTadJdHL7Dcyy9Mz0q4pwIWkKUpSSAkAkWPDXS8ZMdUum1nBcpKrnZeVmJNtnZrccSchsEkKAPLT8Y+fVBlWYq2RKvWO1Tr8d3hEANpczgslZ3kuJN/jFDq46bSmTbvWjrxEWiEexdx7Fej/uDzsx9SDsV6P+4POzH1IIIw87uK6OwR2K9H/cHnZj6kHYr0f9wedmPqQQQZ3cUWCjsV6P+4POzH1InsV6P+4POzH1IIIZpH8SiwVl2YYQ7o8y988HZhhDujzL3zwQRV1WH5B5BanXeJdof63c0dmGEO6PMvfPB2YYQ7o8y988EESarB8g8gjrvEu0P9buaOzDCHdHmXvng7MMId0eZe+eCCDVYPkHkEdd4l2h/rdzR2YYQ7o8y988R2Y4Q7o8y988EER6rD8g8gjrvEu0P9buanswwh3R5l754OzDCHdHmXvnggiTVYPkHkEdd4l2h/rdzR2YYQ7o8y988YpnopwZMsqaeo2ZtVrjrTw434LgghW00LSHNYAR3BNkxevkaWPneQdhBc6xHA7VpdivR/3B52Y+pB2K9H/cHnZj6kEEWc7uKzbBHYr0f9wedmPqRHYtgDuDzsx9SCCI9I/iUWCnsXwB3Cf82Y+pB2L4A7hP+bMfUggg0j+JTbBf/9k=" width="191" height="51" class="img_ev3q"></p>]]></content>
        <author>
            <name>Piotr Rogala</name>
            <uri>https://github.com/RogalaPiotr</uri>
        </author>
        <category label="microsoft" term="microsoft"/>
        <category label="powershell" term="powershell"/>
        <category label="powershell-ise" term="powershell-ise"/>
        <category label="sublime" term="sublime"/>
        <category label="visual-studio" term="visual-studio"/>
        <category label="visual-studio-code" term="visual-studio-code"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Grupa specjalistów CloudPoland na Slack'u]]></title>
        <id>https://blog.justcloud.pl/grupa-specjalistow-cloudpoland-na-slacku</id>
        <link href="https://blog.justcloud.pl/grupa-specjalistow-cloudpoland-na-slacku"/>
        <updated>2017-07-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Grupa specjalistów CloudPoland na Slack'u]]></summary>
        <content type="html"><![CDATA[<p>Chciałem zaprosić wszystkich miłośników chmur, devops, automatyzacji dołączenia do grupy CloudPoland na #slacku. Grupa została stworzona z myślą o wszystkich tych, którzy chcą się udzielać i pomagać sobie w różnych problemach.</p>
<p>Grupa dotyczy wielu dostawców chmur przez co jest to kanał ogólny o chmurach gdzie mamy podział na grupy #aws, #azure, #gcp dzięki czemu możemy porozmawiać z wieloma specjalistami na różne tematy. Zachęcam do korzystania, wymiany wiedzy, dzielenia się problemami i nowościami technicznymi.</p>
<p>Dlaczego #slack? Ponieważ jest to neutralne miejsce gdzie nie trzeba mieć kont typu Facebook, Gmail, aby się zalogować ponad to jest aplikacja mobilna, która ułatwia komunikację z różnych urządzeń. Często dostaję pytania takie jak: Po co slack jeśli jest grupa na Facebook’u? Spotykam się osobiście z wieloma specjalistami IT, którzy naturalnie nie mają konta na Facebook’u co za czym idzie, że oni automatycznie z tego nie korzystają. Natomiast fajnie byłoby zwiększać zasięg naszej działalności ponieważ mamy naprawdę wielu doskonałych specjalistów w różnych dziedzinach IT, ale brakuje nam kanału komunikacyjnego. Czasami bywa też tak, że ludzie nie chcą się udzielać na Facebook’u ponieważ jest to widziane przez wielką rzeszę innych odbiorców nie będących w temacie.</p>
<p>Na grupie znajdziesz takie działy jak:</p>
<ul>
<li class="">cloud-aws</li>
<li class="">cloud-azure</li>
<li class="">cloud-gcp</li>
<li class="">cloud-onpromise</li>
<li class="">devops</li>
<li class="">events</li>
<li class="">job-offers</li>
</ul>
<p>Grupy z dopiskiem cloud dotyczą stricte konkretnych dostawców jak: AWS (Amazon Web Services), Azure (Microsoft Azure), GCP (Google Cloud Platform), On Promise (Wasze prywatne chmury). DevOps ma na celu wymiany wiedzy na tematy devops’owe linux/windows, Events dzielania się informacjami na temat Meet-upów czy konferencji oraz Job Offers czyli aktualne oferty pracy.</p>
<p>Adres do zaproszenia na grupę CloudPoland na slack’u:</p>
<p><strong>Adres do zaproszenia na grupę CloudPoland na slack'u:</strong></p>
<p><a href="https://cloudpoland.azurewebsites.net/" target="_blank" rel="noopener noreferrer" class="">https://cloudpoland.azurewebsites.net</a></p>
<p><strong>Adres grupy na slack'u:</strong></p>
<p><a href="https://cloudpoland.slack.com/" target="_blank" rel="noopener noreferrer" class="">https://cloudpoland.slack.com</a></p>
<p><a href="https://cloudpoland.azurewebsites.net/" target="_blank" rel="noopener noreferrer" class=""><img decoding="async" loading="lazy" src="https://cdn.worldvectorlogo.com/logos/slack.svg" alt="Image result for slack logo" class="img_ev3q"></a></p>]]></content>
        <author>
            <name>Piotr Rogala</name>
            <uri>https://github.com/RogalaPiotr</uri>
        </author>
        <category label="channel" term="channel"/>
        <category label="cloud" term="cloud"/>
        <category label="cloudpoland" term="cloudpoland"/>
        <category label="slack" term="slack"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Tworzenie szablonu ARM - Visual Studio 2017]]></title>
        <id>https://blog.justcloud.pl/tworzenie-szablonu-arm-visual-studio-2017</id>
        <link href="https://blog.justcloud.pl/tworzenie-szablonu-arm-visual-studio-2017"/>
        <updated>2017-04-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Jak tworzyć wdrożyć]]></summary>
        <content type="html"><![CDATA[<p>Ten wpis jest przeznaczony dla osób&nbsp;chcących&nbsp;nauczyć się tworzenia szablonów ARM'owych do deploy'owania w Azure. Visual Studio ma tylko nam pomóc w pracy z szablonem natomiast moim zdaniem przydaje się na początku pracy z ARM oraz przy rozbudowanych szablonach. Po pierwsze podczas edycji plików .json w VS zobaczymy strukturę całego szablonu co pomoże nam zrozumieć co potrzebujemy, żeby działał poprawnie. Po drugie gdy mamy bardzo duże szablony VS pomaga nam odnaleźć się w nim poprzez JSON Outline, w którym w wygodny sposób możemy sprawdzić wszystkie&nbsp;elementy: parameters, variables, resources.</p>
<p>Cel: Stworzyć czysty szablon ARM z wykorzystaniem Visual Studio 2017.</p>
<p>Do realizacji celu potrzebujemy:</p>
<ul>
<li class="">Visual Studio 2017 Community <strong>(FREE)</strong>:&nbsp;<a href="https://www.visualstudio.com/thank-you-downloading-visual-studio/?sku=Community&amp;rel=15" target="_blank" rel="noopener noreferrer" class="">https://www.visualstudio.com/thank-you-downloading-visual-studio/?sku=Community&amp;rel=15</a></li>
<li class="">Uwaga: podczas instalacji należy dodać moduł: <strong>"Azure development"</strong></li>
</ul>
<p>Utworzenie projektu nie jest niczym nadzwyczajnym poza wybraniem odpowiedniego template'a. Aby utworzyć projekt związany z szablonem ARM należy wybrać z grupy Cloud: Azure Resource Group.</p>
<p><img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/Screenshot-from-2017-04-02-00-06-17-bcec954697908c8253d60648d4044cfb.png" width="942" height="654" class="img_ev3q"></p>
<p>Następnie wybieramy template: Blank, który utworzy nam czysty szablon ARM.</p>
<p><img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/Screenshot-from-2017-04-02-00-07-52-d9a440b98d04e16bb9a5f2e1636169d9.png" width="787" height="594" class="img_ev3q"></p>
<p>Gdy szablon się utworzy w prawej części zobaczymy pliki *.json oraz *.ps1. Plik azuredeploy.json jest głównym plikiem związanym z tworzeniem zasobów w resouce group'ie, azuredeplyment.parameters.json jest plikiem definiującym parametry potrzebne do wykonania głównego pliku azuredeploy. Plik Deploy-AzureResourceGroup.ps1 odpowiada za sprawdzenie czy Resource Group'a jest utworzona&nbsp;i ewentualne utworzenie jej przed wykonaniem deploymentu,&nbsp;a końcu&nbsp;zdeploy'owanie projektu.</p>
<p><img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/Screenshot-from-2017-04-02-00-09-02-86de1e7464760f2bd0db14caae9c0702.png" width="354" height="214" class="img_ev3q"></p>
<p>Plik azuredeploy.json jest zbudowany z 4 sekcji: parameters, variables, resources, output. Sekcja parameters związana jest z zdefiniowaniem parametrów, które mają być użyte w dalszej części projektu. Sekcja variables to zmienne gdzie definiujemy na "sztywno", które są wykorzystywane w sekcji resources. Sekcja resources jest najważniejsza ponieważ w niej definiujemy wszystkie zasoby, które mają zostać utworzone w czasie deploy'mentu. Sekcja output nie jest wymagana natomiast w niej możemy zdefiniować jakie dane wyświetlić, które zobaczymy po utworzeniu deploy'mentu np. IP serwera, nazwa serwera, itp.</p>
<p><img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/Screenshot-from-2017-04-02-00-09-23-cedd2bca0aefd25c8f8b5d22305e59dd.png" width="796" height="213" class="img_ev3q"></p>
<p>Plik azuredeploy.parameters.json jest plikiem ze zmiennymi w celu modyfikacji parametrów głównego pliku z szablonem(azuredeploy.json). Tak naprawdę nie musimy z niego korzystać możemy tworzyć projekt w oparciu o zdefiniowane parametry w pliku z deploy'mentem. Jeśli chcemy tworzyć projekt, który będzie wykonywany często z VS możemy skupić się na tworzeniu tego pliku, aby móc w estetyczny sposób edytować parametry podczas deploy'mentu. Dokładnie zostanie to opisane w kolejnym wpisie na blogu.</p>
<p><img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/Screenshot-from-2017-04-02-00-12-21-290f8c13c8083f2871612e23eb022c8f.png" width="806" height="163" class="img_ev3q"></p>
<p>Po lewej stronie mamy zasoby szablonu w wizualnej formie. Możemy również dodawać nowe zasoby lub je usuwać za pośrednictwem widocznych dwóch ikonek z plusem i&nbsp;z&nbsp;x'ksem.</p>
<p><img decoding="async" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALMAAACYCAIAAAAgHU9RAAAAA3NCSVQICAjb4U/gAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAFelJREFUeJztnXlUVFeex3+3VpYCAdkKLSANJ2BnM6HAaDR0nBhPhBgTIOkTAcUeW9M9Qo70nMnoJAQ9ZOlWW8g5nagTVMD0RJYmCmZobZ1qEFssTNLJTKgE0sVaoCCLUFDrnT9eURRwawFfYQH3c/jj1V2Lqm/97n3vfd+96JFHVgKFMg2en1/g/X4PlPvAnTu3pqR888J/Wr7kEQtRFjaOhAPOHLwPynyEKoNChiqDQoYqg0KGd7/fAMUqdXUyy5dr18bPZe+EmIHx6qzTeSmhGADwmj3FxaeKi0+dPr1nDcamAuOJxcWn3k+RWNQqPJ21mtjOpPZJ1e1ibg2HJr9PanZBsnZtvCOCyMraU1cnS0lJtkxMSUmuq5NlZe2ZXde2YgYOTf5gF3yUuq0eIRya/MpTAPWA1+wp2hV8bv+20jaEseSVD3Lfh5w3S9sBAEClEu/MWlOfX4+stmmr+rTCePUbRYldb+0rbZtoELWVvbmtDMBqF4uQ/PwPAYARQWlpGQCkpCRnZe0pLS1jsmaBzXnGcrFYpeoAAADUVlZajzCWvLL58ZvHTF8VQu1n/3ABEreYw0njuQvizSmhmPyDtlt9LhGLQ5x6bAnzm57yN+tfM5H8/A9LS8uysvakpCTfuyzAjjKuym+KN/3qldCJlLBVMeIvb1y1KNN6vVEVvCxs/GVH6TnV5CqWWK8+aQgzHa9+o2inlLNsc95p4iBlOkjZM3VcC01+/3ThlBFwOipVl1OPLWG+NsuUe/zabPSSlbXn3mUBtpWB0LWj6TmNMbnFxaey1ox/xONRxAJxyPKJF1ePnlAl7rY6D7BX3YL6o+kn5MbOc/u3bcu/ZuU9ihND5Glp21M/ahQnblmDMcar3zj4eONbGWlp29OPwWZrGjXXd3K0MGMpDmfIgqGrSzXlYNbYOTdBqL30zR1nQ5M/OHgyCzKOdgCIxcsB2iaVUnV1WFa5dvSYtOilNWePklq0V32GqKr+VA+A4Kr85q7EZWEAsEwMYmne6c0AAGCUywHIkxhTfSdHC0vManBEFsyJieXpSV2dzPZs1DyIwOQ5x2wIDnHorBW1lf2h6vGDsWvg6vVGVW7sU1BfP54XtipG3H2udXKFq5VVm3PfeOrE1IZaHat+r3z5UWpBPbIzRRWLQ8xfpzOOiTgeKswisCsIhulzi3sSh9iNNJo8JX1C9eX1VsBrkscHfsmqGLGqqwOh9rPnvnxiVyYzfmO8+o2Dm6CqcsrXwEwtxbt2PjG5YZvVO7pU48PKU9IpFWdAa6cKHrc7iMDczjOczXRZWE5IZ9Piza5JMQPj1W8U7XwCVFVvFbQhBFc7Q4pOFnM4AGCUH9tW2g4AqP7DdNhTUnL6dQAAkH+07U3SOaopzCROS7dSnRFNyeuni18Ho7zxJlMYXbtxc+freacT5cfSiWPT9H7RtaNvLfvgYG7x5vG3bXWOsnAoLS2bHhvy8z+c/WwGjaH4+OfoXXhXxsHRZEb4+QXa9WfQ+yauzhxfFDdDlUEhQ5VBIUOVQSFD78JTTMRf3Yex3vySxgwKGaoMChmqDAoZqgwKGaoMCpm5OTfBFuY8S98Gdey5LvZjxvYzr20/8xrP22N2HQQHB/n7+wMAAEYI+fr68vl8AERl4eLMeDThcnkPP/xTLtfBYINHR0c9PDxEIk8ulxsUFDg6OqrX6z09Z6kzypxh6wvefuY183HqR1sA4NTWTw8ezPH39+/t7T1//vy1aw322keDg0MYY19fXx8fn4GBAR6PJxaL+Xy+Tqfr6+u7e/cuxpjGDxdkxjGDGRr8/f0zMjJycv7jsccesVcDa7VaAOBwOFqt1tPTk8/nAwCfzw8ODg4LC/Py8po8+aC4BNzw8IjR0RFi3reXWv5e3fRoYjQAnPlN5dd/+g5r9C+8MOHG8fb2XrnysZ6ebpWq20r72NPTMyAgYHh4eGRkxM/P79atWx4eHjyeKVZxuVyRSKTX6zUaDY0cc4a7u+f0L93d3RPAaH5pazTRD6nNx3gEXk3cvHbt2olcvb6uru7ixcurVkkBviK24O3t7ePjo1arh4eHDQaDwWBYunRpV1dXaGgoj8fDGA8NDfX393t5ec3m/6M4E1sxg+Grim++qvjGqNH5+vqUl1d6erqHhIQ0NDScOFEoEPB27Nj+2GOPnT9fTaqKAwMDNRpNX19fWFiYj4+PVqsdGRlxd3cfGBhACHV3dyOEgoODRSJRX18fjRlzxr3GDDPHj3/EHHR3d1dWVn766WcrVjz461/vDg4Otl2xs7MTY4wxZoaPoKCg4eHh27dv63S63t7e5cuXCwSCGfxDlDlkZjPQ4ODg3bt3I4R277YvCwBkNOIpD4mJRKIHHngAAH7yk59QWbgys7k6PvXbpixEHFKGwWCYdS6DbTFRqbkgDikjL+89pVJJzFIqlXl579lrALW1tY2NjRHzxsbG2tra6PTT1XBoBtrR0fnee7999tlnXnzxRfPkQKvVfv7555cuXXHkF6/RaNva2nx9fZcuXcrhmORoNBr7+vr6+/upLFwQR++1YowvXrx88+bX6elbAeC7774rKjrT19c3k75Qf3//8PBwUFAQAKjV6p6eHp1OR2XhmtyXZ9TMMYZq4v5AfEbNzy9weHjip35fvONUEPMA6umikKHKoJChyqCQocqgkOEBwNiY2m45ymKDxgwKGaoMChmqDAoZqgwKGaoMChknKsPNP0T6+/Mxhyq5HiLn9UJxEiwrgyNw43mYjOA+j64GAMTl+q1cx6QIfAO57p7s9khxEmzeUeMI3B7cneuxLOJ2/QXd3cGg+C1Meshzr3L4QqG/OGD1c+qOlu8/fttAr6C4PGzGDK6bm8fyCI5AGPSzl5a/sJ3v7cOk85cslWz5ReDaTYjLcwsORZyFea81KrOs4XACAOCEQ3L5Dbn8RnlmFAAkHL7OHMwv2FSGbmjgdv0Xtsv01n+hV9t6vGXuwTjhcENZZtQ9eVFxVOa78X9N21uFccKRHMiJkcbEvKNMzcuMwlV702XxeffY/tzD8jxD0zuxrYbmzu3OCyWdF0o0d26bE3XDQ+z26CJEb3waZDUKhCDxmXW1V6oRQqj6eAnEb4xGSJFfqEz95bQ12F0b1pTB9RD5P7kxeH0S81Jz5/a3eTtVFz9TXfzs27ydZnEExW8JXp/k5k/YJ8b0203ILG+4bg7FAJBw+DoTnE2xGiccbig7fLisoeFQAsbEXHMjhxNwVGaZZWwHABxlym1oOJSAE47ceDueE5Z+Rm5qYVIuntxdVGa5qbvDCdjinUdtjAdZTRMAREeEt7c2M+lNLUpJWCQAQHNbe3hE1LyyyLOmjJUHSsJf/ReBr2nD8d6/1WCj6WkDbDT0/q2GOeZ7+yx/YfvD+49ZaUaSugP2xcbFbC2GVFMErs5eJZXGxsS8U7suYzwmS8Jb98fF/aYaIWKuqZEcWXyu/F3YL5XGxuTIJKk7mW/6SPHTsrQ4qTQ2Nhd2ZDXvjT0gM7YWbZXGZVdPy4227K4qcWeq8oBUGiuVxmZXW86WIsMkypYm659OU4tSEho5u0/2PsHauQnich0vjK0+otJesi9fgRBSFBTWbl0fCaAAnHCoMTceAIzG1vEtctplNU2Ma5CYyzQCVVdkOeGtTMmqK7U5GRHRABARDpL4M/J0AAAwyq5M6j+amDveXXNbe87b5ZnNSQUKx/9ZAABobm3PiIgGmGm9+wdryvg2b5fPo6uD4rcwpyT+T27s/ksZEzYQh+v/5EammG6wr+vPn935qtZ2axhHRYQDAOCozIocyImRVkF0VkXe1GI2c61TmxOTXT2xW0+Cg7lIUZAUVxCVWSaXh8lypJPDhommFqWEUfSkkSUyTKK83DSfLLCsjSZjvV3dl8t7ZJXMS6FfwMP7T4g3vCre8OrD+08I/QKY9O4rlbfrvzCoh600I4nfGA0AEL0xXlJ7uQogMlTS3tZsSplW3HYukaYWJawbHyZmmAsAAIqC5K1FreERlmWaW9vHE5rb2tc9wwxbv0w1TT4gOiKceZ/zB5a943yRt/lY6BewbFPqlAJCf7HNBtqVYXlyeRgAyHKk1QhB1YmSHUVnGtOMrbLa6Vvl2c4lgVD13rSIiuIieToHAIyyd+Kyqy/Xvp17Rp4qeycue2pu7N6JuhYjlyw3tgnG4wpCihoZvLsxukChQIqCl3MPNTbKcwFkOdICBQIAiAyVKK8o7G3t5lKg+PjnurqUrLTF8/B85O2TXKG7jTLYoP8mb5e2n/CEC8YJR25ktKYlmT7NeQWOyqx4F/a9nD/968c4KqsiD/a50P8VEhJu93kTNq9nYCMe627DBv2tugvtlZ/oBk3d6IYGOs6f6rlSYdCMqjtaDGOudaWLFZCiYJ/s6eIjhIsWiUeKUpUnXUcWDsLmaGIYU39/LIfr5smEBKNOE5byKwDokVV2Xy4HANWls9iIF+pNE0VBchwpvTp7FXFFIheH5WughtER80hx56ta5ux04O+m3Q/16hEbskCoOjsued79thYqTnx60aAebvzNFue1T3Eq1NNFIUOVQSHjLGXweDx3d3ehcNIabXw+z9NzYplYiivD/pfE4/FEIk+hUMjhcJhVdfR6AwB4eHgsWeINAFqttq/vDuv9UtiF/Zih1+sHBgZ7em5ptToOh+Ph4QEA7u7ubm5ug4NDIyPqkRF2zlpxVGa5FccN0Ywza4fOAjNrOYgT5xl3794FAKFQyONxPT09+vv71Wr10NCQtaXcZgpSFCQ5/yx34Zm1HMSJytBqtczqwb6+vgMDg/N0aceFZ9ZyEOeem2g0GgAYG9Po9XrbJTGOyiy/bjZK4YRDDeWZUVYsW+MOq4nRYUoxE5FZU+xhE91NNW4tIrOWgzhXGczOJlyu/V4QUuQX1q5bb/r9Ja5fV1uYr7Bi2TI5rCyq23J2WdjDGAjGrcVk1nIQ5ypDKBQCgKPri1ddqR13NqwPP3O8CmB80tfY+M66iXLtJtODBcRiFvYw0y/cRHREOEjSz8jl8huNufGSsEhobmtf9/asppMWzoyFhTOfXnQTjo1pjEYjl8vlOuAFRKj6eEn4jqzo6KyMcFmNAiGzZSsmJrXEuv3CdjGzPWwytTkxUiZIxGVXI0VBUtyqfZA3ZTSxZGIEmWbWshVU5i3OUgZCSCAQqNVqrVYHFmED2XSvNNX8FeJ3/jJeWZjfBOCwZYtcbJo9bKIbsnFrkZi1HMRZlyO9vLyGh4cBQKvVuLkJhULh6OioQCDg8/kjI9b9GU01MihKVR7IZgTkoGWLXGyaPWw8Fky3dcVefmbxmLUchE1Pl0Ag8Pb2GhlR83hcjUbLTD/5fJ6/v7/RaBwcHBQIhEND8+xJpPll1nKQufZ08fl8Pp/v47MEY9NZCQDodHqdTsfhcEQiEXPta36x8MxaDsJmzGDmFnq9fvqOJwKBwKwVyn3HkZjB5jwDY8xc2poOlcW8g/ozKGSoMihknGii4Xgt9Xw6mesnHrnyqa7je+d1RHEGTlEG4gvdYze5xz2PeAIAWPLzfRrFjRHZZ8ahXmd0R3EGbCsDIbcVT3o8/QpH5GuZLIyKFUSsHGusUf/tPNaRZ6kUl4LNeQbiCZb8fL9o064pshjP5buvSvT959/yQ+bxvcnF4+9i9elFvXb44ild23fWChhHBkfqKnSqH1nsdC5ZVP4u1pSBuLzozN+5i0SDZz8YqiwwDEy6kIIN+tGGC/2f/Bun9esX9+asfD6JrX7nkkXl72JPGRyO6IHo6MzfPrA1G99u7T+5b0R2FmtHAUD7g3yg8N/VdeVrk9P+9ZOyJ9dv8BB5TW9hygJcdm1X5gITKRYuL/Px1Gatt0P9XZawPwNdKv2Z76OrVX8p67lSofm/q1yfAF1n84p1Gzbt+LV/YKC9+pLw1vS4bAWGRMZ2VaBAOOFQRVZ0VcvOVOUBaRLz8DDCOOFI8VZlblxSNcJRmRXF5ZnNSflWfRLmZqOzKoriZelS03JKyOzvstaRRSP21s1palFKnomcTysu2cIpV7o4AuGy57c+9ObHHgEh3MFbvzj0SfqbuQ7IAib8WnZtV9ER4WByXRBcW1ab3RgvqS20VBD1d1nBiVe6hH4BXpEPgYATuWLFrBqYtF4WArBcI2svm24ZWx0t7MW4bOCqV8ft2q6aWpRgMhTjqMwd65j40dzaPh48Ep9ZB9NoqpG1T26W+rus4KKPmNq1XSGk2JsWUVHcIM/lGI2tJWlJ1QghUOQX1jbmyuW5YJTJpq8fiJAi/+UDYTdMzcpypNnV1N9FhjV/BkKcyJ05S1Y8YZnYWXUK2psyf3/CMnFocKjkvf3t3zTee6dzzILxd82ppwtj4w/Hc344njt2q2MidfInqNPpZNWVh3a8NB9lAYvM38XyaDL4nXxQcTNwbWLIxtd4HhOb3GCMv228ceHjQwOqDhvVXZ8FthiXDZwwzzAab/31XJ/88rLntxp1WjDoO1qV548dbfu6gf2+KE6DTR8oZb4w195xykKCKoNChiqDQobNGahI5PnThx6yljswMPi9YmHcbFoUsKmMJUt8N2x4bvpjSADA4XB+/PEf80UZUZllxWEn47KrzZsTtBalJhUoEg5f39GaPvNtb+Yl7J+1niws7OnpmZKYnPIKi4s9zm5XAwdrmYxbL1dhSDxi2lYn8ciNvMyapPy96REVeZk18+NC5z3ilHmGiLdEwHEjdCZwEwYQ9tZzKRaVccsGbCrj9u1bp06eunPnjo9w6fOSrZ68iV1wLv/l0sU/12CjISxpt2RzhrUWHLNpTdotkbhjowO1qHHLDqxF+Ef8VgMAjIKflwQANMbRZ5enXOw4y5FIvB9cyZQRA6g7fwz+2UtGnbbzizNTWnDYplW1NxYsxoUEZkmutNi4puisiuK8zBoHaiUeosYt27AWM4zYYPmHMTatZIKN2KC1+NMDAPknNzObliXWl+SyBjVu2YM1Zfxvf8MPI18NeHR9P/zlkK5PyHW/1FWq1t8dVjapLpVpbl7Wfnml+38+F4VHqy6Xdf331IDBClaW5CJAF+ayC5vzjICAwO0Z2/38/HpHu79oLxnRTSyvs/6fnt3w3EaEOP/4Y0FndTG5/uxsWgCkJbkcqUWNW7Zg/6w1IiJiwH9wSqK3t5daPWrUaYh76zGM+7js27QQmtgtMXYvTF+Sy34tatyyB5v3WpctW749Y7u13JaWH//rj5+y0pElrO/YuGCMWzaY6zV3VKqu/KO/t5ZLvDbqgiBFwT5ZWfGRlrjsqV6cxCNFqcoDcfNcFg7CpjKMRuPw8ELYcXPxGLds4KLeccdBqDo7rnqBPOPhStC78BQyVBkUMlQZFDJUGRQyVBkUMlQZFDJUGRQyVBkUMlQZFDJUGRQyVBkUMlQZFDJUGRQyVBkUMlQZFDJUGRQyVBkUMlQZFDJUGRQyVBkUMlQZFDJUGRQyVBkUMlQZFDJUGRQyVBkUMlQZFDL/D3LIiZmocFKtAAAAAElFTkSuQmCC" width="179" height="152" class="img_ev3q"></p>
<p>Po wybraniu ikony z dodaniem zasobu możemy wybrać spośród gotowej grupy interesujący nas zasób i go dodać. Po wybraniu w zależności od wybranego zasobu należy podać dane typu Name.</p>
<p><img decoding="async" loading="lazy" src="https://blog.justcloud.pl/assets/images/Screenshot-from-2017-04-02-00-14-46-7bf30002072cd6ee49a85fe6ac3c06be.png" width="794" height="600" class="img_ev3q"></p>
<p>W ten oto sposób utworzyłeś nowy projekt, który po dodaniu zasobów jest gotowy do deploy'owania. W kolejnym wpisie utworzymy przykładowy plik szablonu.</p>]]></content>
        <author>
            <name>Piotr Rogala</name>
            <uri>https://github.com/RogalaPiotr</uri>
        </author>
        <category label="arm" term="arm"/>
        <category label="azure" term="azure"/>
        <category label="devops" term="devops"/>
        <category label="json" term="json"/>
        <category label="microsoft" term="microsoft"/>
        <category label="template" term="template"/>
        <category label="visual-studio" term="visual-studio"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Azure Resource Manager - JSON Automation]]></title>
        <id>https://blog.justcloud.pl/azure-resource-manager-json-automation</id>
        <link href="https://blog.justcloud.pl/azure-resource-manager-json-automation"/>
        <updated>2016-12-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Nagranie z North Poland 2016 - super techniczna sesja dostępna online!]]></summary>
        <content type="html"><![CDATA[<p>Jeśli nie mogliście być na AzureDay North Poland 2016 zapraszam do obejrzenia mojej sesji która została umieszczona na 9channel. Podczas sesji dowiecie się jak działa ARM w Azure oraz jakimi sposobami można deployować własne środowiska.</p>
<p>Podczas sesji zauważycie trochę error-ów, które są spowodowane błędnymi nazwami używanymi w konsoli. Jeśli masz problem z deploymentami, zapraszam do dyskusji w komentarzach. Dziękuję wszystkim który przybyli na moją sesję i do zobaczenia na meetupach, które organizuje we Wrocławiu więcej informacji tutaj: <a href="http://www.meetup.com/Microsoft-Azure-Users-Group-Poland/" target="_blank" rel="noopener noreferrer" class="">http://www.meetup.com/Microsoft-Azure-Users-Group-Poland/</a> .</p>
<p>(<a href="https://channel9.msdn.com/Events/Azure-Day-Poland/AzureDay-North-Poland-2016/Azure-Resource-Manager-JSON-Automation/player" target="_blank" rel="noopener noreferrer" class="">https://channel9.msdn.com/Events/Azure-Day-Poland/AzureDay-North-Poland-2016/Azure-Resource-Manager-JSON-Automation/player</a>)</p>]]></content>
        <author>
            <name>Piotr Rogala</name>
            <uri>https://github.com/RogalaPiotr</uri>
        </author>
        <category label="9channel" term="9channel"/>
        <category label="arm" term="arm"/>
        <category label="azure" term="azure"/>
        <category label="cloud" term="cloud"/>
        <category label="microsoft" term="microsoft"/>
        <category label="resource-manager" term="resource-manager"/>
    </entry>
</feed>