"use strict";(self.webpackChunkjustcloudblog=self.webpackChunkjustcloudblog||[]).push([[7935],{3905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return d}});var o=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,o,n=function(e,t){if(null==e)return{};var a,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=o.createContext({}),p=function(e){var t=o.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},c=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=p(a),d=n,g=m["".concat(l,".").concat(d)]||m[d]||u[d]||r;return a?o.createElement(g,s(s({ref:t},c),{},{components:a})):o.createElement(g,s({ref:t},c))}));function d(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,s=new Array(r);s[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:n,s[1]=i;for(var p=2;p<r;p++)s[p]=a[p];return o.createElement.apply(null,s)}return o.createElement.apply(null,a)}m.displayName="MDXCreateElement"},930:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return i},contentTitle:function(){return l},metadata:function(){return p},assets:function(){return c},toc:function(){return u},default:function(){return d}});var o=a(7462),n=a(3366),r=(a(7294),a(3905)),s=["components"],i={slug:"how to deploy azure pipelines agent",title:"Jak wdro\u017cy\u0107 Azure Pipelines agenta? (How to deploy Azure Pipelines agent?)",description:"Potrzebujesz stworzy\u0107 w\u0142asny serwer z agentem do deployment\xf3w w Azure DevOps? W tym artykule opisa\u0142em ca\u0142y proces oraz skrypty umo\u017cliwiaj\u0105ce bardzo szybkie wdro\u017cenie.",authors:["progala"],date:"2022-01-31",tags:["deploy","azure","devops","agent","agents","pipelines"],keywords:["azure","devops","agent","pipelines"]},l=void 0,p={permalink:"/how to deploy azure pipelines agent",source:"@site/blog/2022-01-31-how-to-deploy-azure-devops-agent/index.md",title:"Jak wdro\u017cy\u0107 Azure Pipelines agenta? (How to deploy Azure Pipelines agent?)",description:"Potrzebujesz stworzy\u0107 w\u0142asny serwer z agentem do deployment\xf3w w Azure DevOps? W tym artykule opisa\u0142em ca\u0142y proces oraz skrypty umo\u017cliwiaj\u0105ce bardzo szybkie wdro\u017cenie.",date:"2022-01-31T00:00:00.000Z",formattedDate:"January 31, 2022",tags:[{label:"deploy",permalink:"/tags/deploy"},{label:"azure",permalink:"/tags/azure"},{label:"devops",permalink:"/tags/devops"},{label:"agent",permalink:"/tags/agent"},{label:"agents",permalink:"/tags/agents"},{label:"pipelines",permalink:"/tags/pipelines"}],readingTime:5.33,truncated:!0,authors:[{name:"Piotr Rogala",title:"MVP Azure & owner JustCloud.pl",url:"https://github.com/RogalaPiotr",imageURL:"https://avatars.githubusercontent.com/u/31566956?v=4",key:"progala"}],frontMatter:{slug:"how to deploy azure pipelines agent",title:"Jak wdro\u017cy\u0107 Azure Pipelines agenta? (How to deploy Azure Pipelines agent?)",description:"Potrzebujesz stworzy\u0107 w\u0142asny serwer z agentem do deployment\xf3w w Azure DevOps? W tym artykule opisa\u0142em ca\u0142y proces oraz skrypty umo\u017cliwiaj\u0105ce bardzo szybkie wdro\u017cenie.",authors:["progala"],date:"2022-01-31",tags:["deploy","azure","devops","agent","agents","pipelines"],keywords:["azure","devops","agent","pipelines"]},prevItem:{title:"Push protection w GitHub przed opublikowaniem hase\u0142",permalink:"/github push protection leak credentials"},nextItem:{title:"Nowa ods\u0142ona",permalink:"/welcome"}},c={authorsImageUrls:[void 0]},u=[],m={toc:u};function d(e){var t=e.components,i=(0,n.Z)(e,s);return(0,r.kt)("wrapper",(0,o.Z)({},m,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Azure DevOps pozwala na wdra\u017canie rozwi\u0105za\u0144 za po\u015brednictwem agent\xf3w tak zwanych ",(0,r.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/azure/devops/pipelines/agents/agents?view=azure-devops&tabs=browser&WT.mc_id=AZ-MVP-5002690#microsoft-hosted-agents"},'"Microsoft-hosted"')," przez 1800 minut (30 godzin) na miesi\u0105c. W momencie przekroczenia tego czasu nie mo\u017cemy wykonywa\u0107 deployment'\xf3w. Jedyna opcja to dokupi\u0107 unlimited access do agenta za $40 na miesi\u0105c minuty albo korzysta\u0107 ze swojego serwera, laptopa po zainstalowaniu agenta - ta opcja wdra\u017cania zwana jest w dokumentacji ",(0,r.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/azure/devops/pipelines/agents/agents?view=azure-devops&tabs=browser&WT.mc_id=AZ-MVP-5002690#install"},'"Self-Hosted"'),". Dodam tylko, \u017ce wykorzystywanie w\u0142asnego laptopa do wdra\u017cania nie jest rozwi\u0105zaniem produkcyjnym \ud83d\ude43."),(0,r.kt)("p",null,"Pricing page Azure DevOps: ",(0,r.kt)("a",{parentName:"p",href:"https://azure.microsoft.com/pricing/details/devops/azure-devops-services/?WT.mc_id=AZ-MVP-5002690"},"https://azure.microsoft.com/pricing/details/devops/azure-devops-services/?WT.mc_id=AZ-MVP-5002690")),(0,r.kt)("p",null,"Bardzo cz\u0119sto s\u0142ysz\u0119 pytanie, a po co mi w\u0142asny serwer do wdra\u017cania?"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=OO3FANjwKHY"},(0,r.kt)("img",{parentName:"a",src:"https://img.youtube.com/vi/OO3FANjwKHY/0.jpg",alt:null}))),(0,r.kt)("p",null,'Klasyczna odpowied\u017a: to zale\u017cy... Robi\u0105c prace dyplomow\u0105 na uczelnie albo projekt PoC dla znajomego, mo\u017cecie wybra\u0107 opcje postawienia agenta na swoim laptopie. Je\u015bli pracujecie w grupie paru os\xf3b najlepiej by\u0142oby skorzysta\u0107 z w\u0142asnego serwera. Je\u015bli jeste\u015bcie firm\u0105 i dostarczacie rozwi\u0105zania to napewno powinni\u015bcie rozwa\u017cy\u0107 w\u0142asny serwer lub dokupienie "Microsoft-hosted" za $40 - je\u015bli czas wdra\u017cania przekracza 1800 minut na miesi\u0105c.\nAle jest jeszcze jedna sytuacja kiedy wybierzecie w\u0142asny serwer z agentami. Wiele firm korzysta z prywatnych kontrolowanych wewn\u0119trznych sieci z ograniczonym dost\u0119pem z zewn\u0105trz. Wdro\u017cenie w\u0142asnego serwera w waszej sieci pozwoli wam na \u0142atw\u0105 komunikacje z wdro\u017conymi rozwi\u0105zaniami na platformie Microsoft Azure, ale zwi\u0119kszycie te\u017c bezpiecze\u0144stwo procesowanych danych. Pami\u0119tajmy \u017ce agent ',(0,r.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/azure/devops/pipelines/agents/agents?view=azure-devops&tabs=browser&WT.mc_id=AZ-MVP-5002690#microsoft-hosted-agents"},'"Microsoft-hosted"'),' to agent "publiczny" odizolowany od waszej sieci. ',(0,r.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/azure/devops/pipelines/agents/agents?view=azure-devops&tabs=browser&WT.mc_id=AZ-MVP-5002690#install"},'"Self-Hosted"')," mo\u017ce zosta\u0107 wdro\u017cony tak samo jako agent odizolowany, ale te\u017c mo\u017cecie go po\u0142\u0105czy\u0107 lub wdro\u017cy\u0107 we w\u0142asnej sieci."),(0,r.kt)("p",null,"Poni\u017cej odsy\u0142am was do dokumentacji gdzie mo\u017cecie szczeg\xf3\u0142owo dowiedzie\u0107 si\u0119 co Microsoft oferuje w kwestii Azure Pipelines agent."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/azure/devops/pipelines/agents/agents?view=azure-devops&tabs=browser&WT.mc_id=AZ-MVP-5002690"},"MS Docs - Azure Pipelines agents")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://docs.microsoft.com/en-us/azure/devops/pipelines/agents/media/agent-connections-devops.png?view=azure-devops",alt:"Communication to deploy to target servers\n"})),(0,r.kt)("p",null,"Przechodzimy zatem do wdro\u017cenia w\u0142asnego serwera z agentem."),(0,r.kt)("p",null,"Przygotowa\u0142em ilustracje zwi\u0105zan\u0105 z ca\u0142ym projektem dla wdro\u017cenia Azure Pipelines agent w oparciu o ten post oraz potrzebne materia\u0142y do jego wdro\u017cenia."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"steps",src:a(4407).Z,width:"2384",height:"1677"})),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Linki - za pomoc\u0105 tych link\xf3w macie dost\u0119p do mojego przyk\u0142adowego wdro\u017cenia")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Azure Repos: ",(0,r.kt)("a",{parentName:"li",href:"https://dev.azure.com/justcloudpublic/_git/How%20to%20deploy%20ADO%20agent?path=/vm-azure-devops-self-hosted-agents"},"https://dev.azure.com/justcloudpublic/_git/How%20to%20deploy%20ADO%20agent?path=/vm-azure-devops-self-hosted-agents")),(0,r.kt)("li",{parentName:"ul"},"Azure Pipeline: ",(0,r.kt)("a",{parentName:"li",href:"https://dev.azure.com/justcloudpublic/How%20to%20deploy%20ADO%20agent/_build?definitionId=2"},"https://dev.azure.com/justcloudpublic/How%20to%20deploy%20ADO%20agent/_build?definitionId=2"))),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://dev.azure.com/justcloudpublic/How%20to%20deploy%20ADO%20agent/_build/latest?definitionId=2&branchName=main"},(0,r.kt)("img",{parentName:"a",src:"https://dev.azure.com/justcloudpublic/How%20to%20deploy%20ADO%20agent/_apis/build/status/vm-azure-devops-self-hosted-agents?branchName=main",alt:"Build Status"}))),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Scripts"),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Parametry"),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://dev.azure.com/justcloudpublic/_git/How%20to%20deploy%20ADO%20agent?path=/vm-azure-devops-self-hosted-agents/scripts/azuredeploy.param.json&version=GBmain&_a=contents"},"azuredeploy.param.json")," - te parametry mo\u017cesz przerobi lub zmieni\u0107 tak, aby odpowiada\u0142y temu co zostanie wdro\u017cone. Wa\u017cne - te dane test\xf3w s\u0105\xa0nadpisywane podczas deployment'u - sprawd\u017a to w pliku: ",(0,r.kt)("a",{parentName:"p",href:"https://dev.azure.com/justcloudpublic/_git/How%20to%20deploy%20ADO%20agent?path=/vm-azure-devops-self-hosted-agents/pipelines/vm-azure-devops-self-hosted-agents-ci.yml&version=GBmain&_a=contents"},"vm-azure-devops-self-hosted-agents-ci.yml"),' "overrideParameters".'),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"Opis zmiennych",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"adminUsername ","[User name]"),(0,r.kt)("li",{parentName:"ol"},"adminPassword ","[Password for user]"),(0,r.kt)("li",{parentName:"ol"},"dnsLabelPrefix (default set: generated based on ResourceGroup.Id) ","[Public DNS for connection RDP]"),(0,r.kt)("li",{parentName:"ol"},"vmName ","[VM Name for resource]"),(0,r.kt)("li",{parentName:"ol"},"AccessIPNSG ","[IP will be added to NSG rule for RDP access]"),(0,r.kt)("li",{parentName:"ol"},"tag ",'[default set: "Project: AzureDevOpsAgent"]'),(0,r.kt)("li",{parentName:"ol"},"DiskForVM ","[StorageAccount or Managed - choose disk for deployment VM]")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'"parameters": {\n    "adminUsername": {\n        "value": "test-user"\n    },\n    "adminPassword": {\n        "value": "test-P@ssw0rd12345"\n    },\n    "vmName": {\n        "value": "ado-agents"\n    },\n    "AccessIPNSG": {\n        "value": "192.168.1.1"\n    },\n    "tag": {\n        "value": "AzureDevOpsAgent"\n    },\n    "DiskForVM": {\n        "value": "StorageAccount"\n    }\n}\n'))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://dev.azure.com/justcloudpublic/_git/How%20to%20deploy%20ADO%20agent?path=/vm-azure-devops-self-hosted-agents/scripts/createresourcegroup-adoagent.param.json&version=GBmain&_a=contents"},"createresourcegroup-adoagent.param.json")," - parametry definiuj\u0105 resource group\u0119."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'"parameters": {\n    "ResourceGroupLocation": {\n        "value": "westeurope"\n    },\n    "ResourceGroupName": {\n        "value": "vm-azure-devops-self-hosted-agents"\n    },\n    "tag": {\n        "value": {\n            "key1": "Project",\n            "value1": "AzureDevOpsAgent"\n        }\n    }\n}\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://dev.azure.com/justcloudpublic/_git/How%20to%20deploy%20ADO%20agent?path=/vm-azure-devops-self-hosted-agents/scripts/script-post-configuration.ps1&version=GBmain&_a=contents"},"script-post-configuration.ps1")," - skrypt odpowiada za instalacj\u0119\xa0agenta oraz przygotowanie potrzebnych paczek. Je\u015bli potrzebujesz doinstalowa\u0107 dodatkowe paczki dadaj je w sekcji: # Install Packages - najpro\u015bciej jest skorzysta\u0107 z paczek choco: ",(0,r.kt)("a",{parentName:"p",href:"https://docs.chocolatey.org/en-us/choco/commands/list"},"https://docs.chocolatey.org/en-us/choco/commands/list")),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Opis zmiennych"),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"urlProjectADO ","[URL for your ADO project]"),(0,r.kt)("li",{parentName:"ol"},"auth (default set: PAT) ","[Authentication method for your ADO]"),(0,r.kt)("li",{parentName:"ol"},"token ","[Security token for your ADO]"),(0,r.kt)("li",{parentName:"ol"},"pool (default set: default) ","[Pool name for agent in ADO]"),(0,r.kt)("li",{parentName:"ol"},"agentname ","[default is same as VM name]"),(0,r.kt)("li",{parentName:"ol"},"numberagents ","[default is 1 - you can deploy from 1 to 20 agent on one server]"),(0,r.kt)("li",{parentName:"ol"},"instalAddtionalPackages ","[default is $true and is installing all what is needed for simple deployment to Azure - if you need .NET etc. please add manually]")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'param(\n    [Parameter(Mandatory = $true)][string] $urlProjectADO,\n    [Parameter(Mandatory = $false)][string] $auth = "pat",\n    [Parameter(Mandatory = $true)][string] $token,\n    [Parameter(Mandatory = $false)][string] $pool,\n    [Parameter(Mandatory = $false)][string] $agentname,\n    [Parameter(Mandatory = $false)][ValidateRange(1, 20)][int] $numberagents = 1,\n    [Parameter(Mandatory = $false)][bool] $instalAddtionalPackages = $true\n)\nbegin {\n}\nprocess {\n    try {\n        if (!(Test-Path "c:\\temp")) { $null = mkdir "c:\\temp" }\n        $log | % {\n            # Install Additional Packages\n            if ($instalAddtionalPackages) {\n                try {\n\n                    # Install Packages\n                    [Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12\n                    Install-PackageProvider -Name "Nuget" -Force\n                    # FIX: WARNING: Not setting tab completion: Profile file does not exist at \'C:\\Users\\USER\\Documents\\WindowsPowerShell\\Microsoft.PowerShellISE_profile.ps1\'.\n                    if (!(Test-Path -Path $PROFILE)) {\n                        New-Item -ItemType File -Path $PROFILE -Force\n                    }\n                    Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString(\'https://chocolatey.org/install.ps1\'))\n                    choco feature enable -n allowGlobalConfirmation\n                    choco install -y powershell-core\n                    Start-Sleep 3\n                    choco install -y azure-cli\n                    Start-Sleep 3\n                    choco install -y az.powershell\n                    Start-Sleep 3\n                    choco install -y azcopy\n                    Start-Sleep 3\n                    choco install -y iiscrypto\n                    Start-Sleep 3\n                    #Install AzureRM in Powershell 5.1\n                    C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\powershell.exe -Command "Install-Module -Name AzureRM -AllowClobber -Force -Confirm:`$false"\n                    # END Install Packages\n\n                }\n                catch {\n                    throw $_\n                    break\n                }\n            }\n            # Get latest version install agent\n            $getLatestVersion = Invoke-WebRequest https://api.github.com/repos/Microsoft/azure-pipelines-agent/releases/latest -UseBasicParsing\n            $tag = ($getLatestVersion | ConvertFrom-Json)[0].tag_name\n            $tag = $tag.Substring(1)\n            $downloadInstallURL = "https://vstsagentpackage.azureedge.net/agent/$tag/vsts-agent-win-x64-$tag.zip"\n\n            # Creating Pool in Azure DevOps\n            $encodedPat = [System.Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes( ":$token"))\n            $body = "{name:`"$pool`", autoProvision: `"true`"}"\n            if (!($pool -match "default" -or $pool -match "Azure Pipelines" -or $((Invoke-WebRequest -Method GET -Uri "$urlProjectADO/_apis/distributedtask/pools?api-version=5.1" -UseBasicParsing -Headers @{Authorization = "Basic $encodedPat" }).content | ? { $_ -like "*$pool*" }))) {\n                $tmp = $(Invoke-WebRequest -Method POST -Uri "$urlProjectADO/_apis/distributedtask/pools?api-version=5.0-preview.1" -UseBasicParsing -Headers @{Authorization = "Basic $encodedPat" } -Body $body -ContentType "application/json") 2>$null\n            }\n\n            # Install agenets\n            $filename = $urlProjectADO.Split(\'/\')[-1]\n            if (!(Test-Path "c:\\temp\\$filename")) { Invoke-WebRequest -Uri $downloadInstallURL -OutFile "c:\\temp\\$filename" }\n\n            for ($i = 1; $i -le $numberagents; $i++) {\n                if (!(Test-Path "c:\\agent-$i")) { mkdir "c:\\agent-$i" }else { rm c:\\agent-$i -recurse -force; mkdir "c:\\agent-$i" }\n                Add-Type -AssemblyName System.IO.Compression.FileSystem ; [System.IO.Compression.ZipFile]::ExtractToDirectory("c:\\temp\\$filename", "c:\\agent-$i")\n                ."c:\\agent-$i\\config.cmd" --unattended --url $urlProjectADO --auth $auth --token $token --pool $pool --agent "$agentname-$i" --runAsService\n            }\n        } | Out-File "c:\\temp\\ADOagent-$((Get-Date).ToString("s").Replace(":","-")).log"\n        Remove-Item -Recurse -Force c:\\temp -Exclude *.log\n    }\n    catch {\n        throw $_\n        break\n    }\n    Write-Verbose "Successfully installed Azure DevOps Job Agents"\n}\n'))))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Pipelines"),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://dev.azure.com/justcloudpublic/_git/How%20to%20deploy%20ADO%20agent?path=/vm-azure-devops-self-hosted-agents/pipelines/vm-azure-devops-self-hosted-agents-ci.yml&version=GBmain&_a=contents"},"vm-azure-devops-self-hosted-agents-ci.yml")," - w tym pliku zdefiniuj dok\u0142adnie dane potrzebne do instalacji agent\xf3w - adres Twojego projektu ADO, nazw\u0119 pool, ilo\u015b\u0107 agent\xf3w. Group oznacza grup\u0119 Library w Azure DevOps gdzie przekazujemy bezpiecznie poufne dane.",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"variables:\n- name: SPNName\n  value: 'Subscription-JustCloudPublic'\n* name: location\n  value: 'westeurope'\n* name: urlProjectADO\n  value: 'https://justcloudpublic.visualstudio.com'\n* name: pool\n  value: 'Default'\n* name: numberagents\n  value: 3\n* group: 'justcloudpublickeyvault'\n"))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Requirements - potrzebujesz zanim zaczniesz wdra\u017ca\u0107"),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"Azure Subskrypcja"),(0,r.kt)("li",{parentName:"ol"},"PAT - Personal Access Token - ",(0,r.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/azure/devops/organizations/accounts/use-personal-access-tokens-to-authenticate?view=azure-devops&tabs=Windows&WT.mc_id=AZ-MVP-5002690#create-a-pat"},"https://docs.microsoft.com/azure/devops/organizations/accounts/use-personal-access-tokens-to-authenticate?view=azure-devops&tabs=Windows&WT.mc_id=AZ-MVP-5002690#create-a-pat")),(0,r.kt)("li",{parentName:"ol"},"Key Vault - ",(0,r.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/azure/devops/pipelines/release/azure-key-vault?view=azure-devops&WT.mc_id=AZ-MVP-5002690"},"https://docs.microsoft.com/azure/devops/pipelines/release/azure-key-vault?view=azure-devops&WT.mc_id=AZ-MVP-5002690"))))))),(0,r.kt)("p",null,"Po wdro\u017ceniu:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Azure DevOps agents\n",(0,r.kt)("img",{src:a(3775).Z,width:"1920",height:"553"})),(0,r.kt)("li",{parentName:"ol"},"Azure Portal\n",(0,r.kt)("img",{src:a(3934).Z,width:"2240",height:"1394"}))),(0,r.kt)("p",null,"Je\u015bli masz jakie\u015b\xa0pytania zapraszam do komentowania \ud83d\ude42."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=bjtgALglU2o"},(0,r.kt)("img",{parentName:"a",src:"https://img.youtube.com/vi/bjtgALglU2o/0.jpg",alt:null}))),(0,r.kt)("p",null,"Artyku\u0142 dost\u0119pny r\xf3wnie\u017c na Medium i LinkedIn:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"(EN) ",(0,r.kt)("a",{parentName:"li",href:"https://piotr-rogala.medium.com/7223953d2e1f"},"https://piotr-rogala.medium.com/7223953d2e1f")),(0,r.kt)("li",{parentName:"ul"},"(PL) ",(0,r.kt)("a",{parentName:"li",href:"https://www.linkedin.com/pulse/jak-wdro%25C5%25BCy%25C4%2587-azure-pipelines-agenta-piotr-rogala/"},"https://www.linkedin.com/pulse/jak-wdro%25C5%25BCy%25C4%2587-azure-pipelines-agenta-piotr-rogala/"))))}d.isMDXComponent=!0},3775:function(e,t,a){t.Z=a.p+"assets/images/2022-02-26_20-11-11-8336992a7ceb667eb0794480828457e2.jpg"},3934:function(e,t,a){t.Z=a.p+"assets/images/2022-02-27_21-35-04-e358992489d465be62c5d0c4e66934de.jpg"},4407:function(e,t,a){t.Z=a.p+"assets/images/image1-3a6b83b3327d3fd6856c50caffe8972a.jpg"}}]);