"use strict";(globalThis.webpackChunkdocusaurus_site=globalThis.webpackChunkdocusaurus_site||[]).push([[1864],{20190:(e,a,n)=>{n.d(a,{A:()=>t});const t=n.p+"assets/images/2022-02-27_21-35-04-e358992489d465be62c5d0c4e66934de.jpg"},28453:(e,a,n)=>{n.d(a,{R:()=>i,x:()=>r});var t=n(96540);const o={},s=t.createContext(o);function i(e){const a=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function r(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),t.createElement(s.Provider,{value:a},e.children)}},30464:e=>{e.exports=JSON.parse('{"permalink":"/how to deploy azure pipelines agent","editUrl":"https://github.com/RogalaPiotr/JustCloudBlog/tree/main/website/blog/2022-01-31-how-to-deploy-azure-devops-agent/index.md","source":"@site/blog/2022-01-31-how-to-deploy-azure-devops-agent/index.md","title":"Jak wdro\u017cy\u0107 Azure Pipeline agenta?","description":"Praktyczny przewodnik - jak wdro\u017cy\u0107 w\u0142asnego Azure Pipelines agenta na serwerze lub VM krok po kroku, ze skryptami, konfiguracj\u0105 i wskaz\xf3wkami bezpiecze\u0144stwa.","date":"2022-01-31T00:00:00.000Z","tags":[{"inline":true,"label":"deploy","permalink":"/tags/deploy"},{"inline":true,"label":"Azure","permalink":"/tags/azure"},{"inline":true,"label":"DevOps","permalink":"/tags/dev-ops"},{"inline":true,"label":"agent","permalink":"/tags/agent"},{"inline":true,"label":"pipelines","permalink":"/tags/pipelines"}],"readingTime":7.63,"hasTruncateMarker":true,"authors":[{"name":"Piotr Rogala","title":"MVP Azure & owner JustCloud.pl","url":"https://github.com/RogalaPiotr","page":{"permalink":"/authors/progala"},"socials":{"x":"https://x.com/RogalaPiotr","linkedin":"https://www.linkedin.com/in/rogalapiotr/","github":"https://github.com/RogalaPiotr","newsletter":"https://subscribepage.io/wroclaw-newsletter-workshops"},"imageURL":"https://avatars.githubusercontent.com/u/31566956?v=4","key":"progala"}],"frontMatter":{"authors":["progala"],"date":"2022-01-31","description":"Praktyczny przewodnik - jak wdro\u017cy\u0107 w\u0142asnego Azure Pipelines agenta na serwerze lub VM krok po kroku, ze skryptami, konfiguracj\u0105 i wskaz\xf3wkami bezpiecze\u0144stwa.","keywords":["Azure DevOps","Azure","agent","pipelines","self-hosted","deployment","wdro\u017cenie","automatyzacja","skrypty","bezpiecze\u0144stwo"],"slug":"how to deploy azure pipelines agent","tags":["deploy","Azure","DevOps","agent","pipelines"],"title":"Jak wdro\u017cy\u0107 Azure Pipeline agenta?"},"unlisted":false,"prevItem":{"title":"Push protection w GitHub przed opublikowaniem hase\u0142","permalink":"/github push protection leak credentials"},"nextItem":{"title":"Nowa ods\u0142ona bloga JustCloud","permalink":"/welcome"}}')},46353:(e,a,n)=>{n.d(a,{A:()=>t});const t=n.p+"assets/images/image1-3a6b83b3327d3fd6856c50caffe8972a.jpg"},49299:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>t,toc:()=>d});var t=n(30464),o=n(74848),s=n(28453),i=n(89487);const r={authors:["progala"],date:"2022-01-31",description:"Praktyczny przewodnik - jak wdro\u017cy\u0107 w\u0142asnego Azure Pipelines agenta na serwerze lub VM krok po kroku, ze skryptami, konfiguracj\u0105 i wskaz\xf3wkami bezpiecze\u0144stwa.",keywords:["Azure DevOps","Azure","agent","pipelines","self-hosted","deployment","wdro\u017cenie","automatyzacja","skrypty","bezpiecze\u0144stwo"],slug:"how to deploy azure pipelines agent",tags:["deploy","Azure","DevOps","agent","pipelines"],title:"Jak wdro\u017cy\u0107 Azure Pipeline agenta?"},l=void 0,c={authorsImageUrls:[void 0]},d=[{value:"Instrukta\u017c video",id:"instrukta\u017c-video",level:2}];function p(e){const a={a:"a",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a.p,{children:["Azure DevOps pozwala na wdra\u017canie rozwi\u0105za\u0144 za po\u015brednictwem agent\xf3w tzw. ",(0,o.jsx)(a.a,{href:"https://docs.microsoft.com/azure/devops/pipelines/agents/agents?view=azure-devops&tabs=browser&WT.mc_id=AZ-MVP-5002690#microsoft-hosted-agents",children:'"Microsoft-hosted"'})," przez 1800 minut (30 godzin) miesi\u0119cznie. Po przekroczeniu tego czasu nie mo\u017cemy wykonywa\u0107 deployment\xf3w."]}),"\n",(0,o.jsxs)(a.p,{children:["Mo\u017cna jednak dokupi\u0107 nielimitowany dost\u0119p do agenta za $40 miesi\u0119cznie lub korzysta\u0107 ze swojego serwera, np. laptopa, instaluj\u0105c agenta \u2014 ta opcja wdra\u017cania jest znana w dokumentacji jako ",(0,o.jsx)(a.a,{href:"https://docs.microsoft.com/azure/devops/pipelines/agents/agents?view=azure-devops&tabs=browser&WT.mc_id=AZ-MVP-5002690#install",children:'"Self-Hosted"'}),". Dodam tylko, \u017ce wykorzystywanie w\u0142asnego laptopa do wdra\u017cania nie jest rozwi\u0105zaniem produkcyjnym \ud83d\ude43."]}),"\n",(0,o.jsxs)(a.p,{children:["Strona z cenami Azure DevOps: (",(0,o.jsx)(a.a,{href:"https://azure.microsoft.com/pricing/details/devops/azure-devops-services/?WT.mc_id=AZ-MVP-5002690",children:"https://azure.microsoft.com/pricing/details/devops/azure-devops-services/?WT.mc_id=AZ-MVP-5002690"}),")"]}),"\n",(0,o.jsx)(a.p,{children:"Bardzo cz\u0119sto s\u0142ysz\u0119 pytanie: po co mi w\u0142asny serwer do wdra\u017cania?"}),"\n",(0,o.jsx)(i.A,{controls:!0,src:"https://www.youtube.com/watch?v=OO3FANjwKHY",width:"65%",height:"auto",style:{display:"block",margin:"0 auto 20px auto",aspectRatio:"16/9"}}),"\n",(0,o.jsxs)(a.p,{children:['Klasyczna odpowied\u017a: to zale\u017cy... Przy pracy nad prac\u0105 dyplomow\u0105 lub projektem PoC dla znajomego mo\u017cna postawi\u0107 agenta na swoim laptopie. Je\u015bli pracujecie w grupie kilku os\xf3b, najlepiej by\u0142oby skorzysta\u0107 z w\u0142asnego serwera. Je\u015bli jeste\u015bcie firm\u0105 dostarczaj\u0105c\u0105 rozwi\u0105zania, zdecydowanie warto rozwa\u017cy\u0107 w\u0142asny serwer lub zakup agent\xf3w "Microsoft-hosted" za $40, je\u015bli czas wdra\u017cania przekracza 1800 minut miesi\u0119cznie. Jest jeszcze jedna sytuacja, kiedy warto wybra\u0107 w\u0142asny serwer z agentami: wiele firm korzysta z prywatnych, kontrolowanych wewn\u0119trznych sieci z ograniczonym dost\u0119pem z zewn\u0105trz. Wdro\u017cenie w\u0142asnego serwera w takiej sieci pozwoli na \u0142atw\u0105 komunikacj\u0119 z wdro\u017conymi rozwi\u0105zaniami na platformie Microsoft Azure oraz zwi\u0119kszy bezpiecze\u0144stwo procesowanych danych. Pami\u0119tajmy, \u017ce agent ',(0,o.jsx)(a.a,{href:"https://docs.microsoft.com/azure/devops/pipelines/agents/agents?view=azure-devops&tabs=browser&WT.mc_id=AZ-MVP-5002690#microsoft-hosted-agents",children:'"Microsoft-hosted"'}),' to agent "publiczny", odizolowany od waszej sieci. ',(0,o.jsx)(a.a,{href:"https://docs.microsoft.com/azure/devops/pipelines/agents/agents?view=azure-devops&tabs=browser&WT.mc_id=AZ-MVP-5002690#install",children:'"Self-Hosted"'})," mo\u017ce zosta\u0107 wdro\u017cony jako agent odizolowany, ale mo\u017cna go r\xf3wnie\u017c zintegrowa\u0107 z w\u0142asn\u0105 sieci\u0105."]}),"\n",(0,o.jsx)(a.p,{children:"Poni\u017cej odsy\u0142am was do dokumentacji, w kt\xf3rej mo\u017cna dowiedzie\u0107 si\u0119 wi\u0119cej o mo\u017cliwo\u015bciach oferowanych przez Microsoft w zakresie agent\xf3w Azure Pipelines."}),"\n",(0,o.jsx)(a.p,{children:(0,o.jsx)(a.a,{href:"https://docs.microsoft.com/azure/devops/pipelines/agents/agents?view=azure-devops&tabs=browser&WT.mc_id=AZ-MVP-5002690",children:"MS Docs - Azure Pipelines agents"})}),"\n",(0,o.jsx)(a.p,{children:(0,o.jsx)(a.img,{src:"https://docs.microsoft.com/en-us/azure/devops/pipelines/agents/media/agent-connections-devops.png?view=azure-devops",alt:"Communication to deploy to target servers"})}),"\n",(0,o.jsx)(a.p,{children:"Przechodzimy zatem do wdro\u017cenia w\u0142asnego serwera z agentem."}),"\n",(0,o.jsx)(a.p,{children:"Przygotowa\u0142em ilustracje zwi\u0105zane z ca\u0142ym projektem dla wdro\u017cenia Azure Pipelines agent w oparciu o ten post oraz potrzebne materia\u0142y do jego wdro\u017cenia."}),"\n",(0,o.jsx)(a.p,{children:(0,o.jsx)(a.img,{alt:"steps",src:n(46353).A+"",width:"2384",height:"1677"})}),"\n",(0,o.jsxs)(a.ol,{children:["\n",(0,o.jsxs)(a.li,{children:["Linki - za pomoc\u0105 tych link\xf3w macie dost\u0119p do mojego przyk\u0142adowego wdro\u017cenia","\n",(0,o.jsxs)(a.ol,{children:["\n",(0,o.jsxs)(a.li,{children:["Azure Repos: (",(0,o.jsx)(a.a,{href:"https://dev.azure.com/justcloudpublic/_git/How%20to%20deploy%20ADO%20agent?path=/vm-azure-devops-self-hosted-agents",children:"https://dev.azure.com/justcloudpublic/_git/How%20to%20deploy%20ADO%20agent?path=/vm-azure-devops-self-hosted-agents"}),")"]}),"\n",(0,o.jsxs)(a.li,{children:["Azure Pipeline: (",(0,o.jsx)(a.a,{href:"https://dev.azure.com/justcloudpublic/How%20to%20deploy%20ADO%20agent/_build?definitionId=2",children:"https://dev.azure.com/justcloudpublic/How%20to%20deploy%20ADO%20agent/_build?definitionId=2"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(a.p,{children:(0,o.jsx)(a.a,{href:"https://dev.azure.com/justcloudpublic/How%20to%20deploy%20ADO%20agent/_build/latest?definitionId=2&branchName=main",children:(0,o.jsx)(a.img,{src:"https://dev.azure.com/justcloudpublic/How%20to%20deploy%20ADO%20agent/_apis/build/status/vm-azure-devops-self-hosted-agents?branchName=main",alt:"Build Status"})})}),"\n",(0,o.jsxs)(a.ol,{start:"2",children:["\n",(0,o.jsxs)(a.li,{children:["\n",(0,o.jsx)(a.p,{children:"Skrypty"}),"\n",(0,o.jsxs)(a.ol,{children:["\n",(0,o.jsx)(a.li,{children:"Parametry"}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.a,{href:"https://dev.azure.com/justcloudpublic/_git/How%20to%20deploy%20ADO%20agent?path=/vm-azure-devops-self-hosted-agents/scripts/azuredeploy.param.json&version=GBmain&_a=contents",children:"azuredeploy.param.json"})," - te parametry mo\u017cesz przerobi\u0107 lub zmieni\u0107 tak, aby odpowiada\u0142y potrzebom wdro\u017cenia. Wa\u017cne: te dane testowe s\u0105 nadpisywane podczas deploymentu \u2014 sprawd\u017a to w pliku: ",(0,o.jsx)(a.a,{href:"https://dev.azure.com/justcloudpublic/_git/How%20to%20deploy%20ADO%20agent?path=/vm-azure-devops-self-hosted-agents/pipelines/vm-azure-devops-self-hosted-agents-ci.yml&version=GBmain&_a=contents",children:"vm-azure-devops-self-hosted-agents-ci.yml"}),' "overrideParameters".']}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(a.li,{children:["\n",(0,o.jsx)(a.p,{children:"Opis zmiennych"}),"\n",(0,o.jsxs)(a.ol,{children:["\n",(0,o.jsx)(a.li,{children:"adminUsername [nazwa u\u017cytkownika]"}),"\n",(0,o.jsx)(a.li,{children:"adminPassword [has\u0142o u\u017cytkownika]"}),"\n",(0,o.jsx)(a.li,{children:"dnsLabelPrefix (domy\u015blnie ustawiany: generowany na podstawie ResourceGroup.Id) [publiczny DNS do po\u0142\u0105czenia RDP]"}),"\n",(0,o.jsx)(a.li,{children:"vmName [nazwa maszyny wirtualnej]"}),"\n",(0,o.jsx)(a.li,{children:"AccessIPNSG [IP, kt\xf3re zostanie dodane do regu\u0142y NSG dla dost\u0119pu RDP]"}),"\n",(0,o.jsx)(a.li,{children:'tag [domy\u015blnie ustawiony: "Project: AzureDevOpsAgent"]'}),"\n",(0,o.jsx)(a.li,{children:"DiskForVM [StorageAccount lub Managed - wyb\xf3r dysku dla wdro\u017cenia maszyny wirtualnej]"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-json",children:'"parameters": {\n    "adminUsername": {\n        "value": "test-user"\n    },\n    "adminPassword": {\n        "value": "test-P@ssw0rd12345"\n    },\n    "vmName": {\n        "value": "ado-agents"\n    },\n    "AccessIPNSG": {\n        "value": "192.168.1.1"\n    },\n    "tag": {\n        "value": "AzureDevOpsAgent"\n    },\n    "DiskForVM": {\n        "value": "StorageAccount"\n    }\n}\n\n'})}),"\n",(0,o.jsxs)(a.ol,{start:"4",children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.a,{href:"https://dev.azure.com/justcloudpublic/_git/How%20to%20deploy%20ADO%20agent?path=/vm-azure-devops-self-hosted-agents/scripts/createresourcegroup-adoagent.param.json&version=GBmain&_a=contents",children:"createresourcegroup-adoagent.param.json"})," - parametry definiuj\u0105ce grup\u0119 zasob\xf3w."]}),"\n"]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-json",children:'"parameters": {\n    "ResourceGroupLocation": {\n        "value": "westeurope"\n    },\n    "ResourceGroupName": {\n        "value": "vm-azure-devops-self-hosted-agents"\n    },\n    "tag": {\n        "value": {\n            "key1": "Project",\n            "value1": "AzureDevOpsAgent"\n        }\n    }\n}\n\n'})}),"\n",(0,o.jsxs)(a.ol,{start:"5",children:["\n",(0,o.jsxs)(a.li,{children:["\n",(0,o.jsxs)(a.p,{children:[(0,o.jsx)(a.a,{href:"https://dev.azure.com/justcloudpublic/_git/How%20to%20deploy%20ADO%20agent?path=/vm-azure-devops-self-hosted-agents/scripts/script-post-configuration.ps1&version=GBmain&_a=contents",children:"script-post-configuration.ps1"})," - skrypt odpowiada za instalacj\u0119 agenta oraz przygotowanie potrzebnych paczek. Je\u015bli potrzebujesz doinstalowa\u0107 dodatkowe paczki, dodaj je w sekcji: # Install Packages - najpro\u015bciej jest skorzysta\u0107 z paczek choco: (",(0,o.jsx)(a.a,{href:"https://docs.chocolatey.org/en-us/choco/commands/list",children:"https://docs.chocolatey.org/en-us/choco/commands/list"}),")"]}),"\n"]}),"\n",(0,o.jsxs)(a.li,{children:["\n",(0,o.jsx)(a.p,{children:"Opis zmiennych"}),"\n",(0,o.jsxs)(a.ol,{children:["\n",(0,o.jsx)(a.li,{children:"urlProjectADO [URL do projektu ADO]"}),"\n",(0,o.jsx)(a.li,{children:"auth (domy\u015blnie ustawione: PAT) [metoda uwierzytelniania dla projektu ADO]"}),"\n",(0,o.jsx)(a.li,{children:"token [token bezpiecze\u0144stwa dla projektu ADO]"}),"\n",(0,o.jsx)(a.li,{children:"pool (domy\u015blnie ustawione: default) [nazwa puli dla agenta w ADO]"}),"\n",(0,o.jsx)(a.li,{children:"agentname [domy\u015blnie taka sama jak nazwa maszyny wirtualnej]"}),"\n",(0,o.jsx)(a.li,{children:"numberagents [domy\u015blnie 1 - mo\u017cna wdro\u017cy\u0107 od 1 do 20 agent\xf3w na jednym serwerze]"}),"\n",(0,o.jsx)(a.li,{children:"instalAddtionalPackages [domy\u015blnie $true; instaluje wszystko, co potrzebne do prostego wdro\u017cenia w Azure; je\u015bli potrzeba .NET itp., nale\u017cy doda\u0107 r\u0119cznie]"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-powershell",children:'param(\n    [Parameter(Mandatory = $true)][string] $urlProjectADO,\n    [Parameter(Mandatory = $false)][string] $auth = "pat",\n    [Parameter(Mandatory = $true)][string] $token,\n    [Parameter(Mandatory = $false)][string] $pool,\n    [Parameter(Mandatory = $false)][string] $agentname,\n    [Parameter(Mandatory = $false)][ValidateRange(1, 20)][int] $numberagents = 1,\n    [Parameter(Mandatory = $false)][bool] $instalAddtionalPackages = $true\n)\nbegin {\n}\nprocess {\n    try {\n        if (!(Test-Path "c:\\temp")) { $null = mkdir "c:\\temp" }\n        $log | % {\n            # Install Additional Packages\n            if ($instalAddtionalPackages) {\n                try {\n\n                    # Install Packages\n                    [Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12\n                    Install-PackageProvider -Name "Nuget" -Force\n                    # FIX: WARNING: Not setting tab completion: Profile file does not exist at \'C:\\Users\\USER\\Documents\\WindowsPowerShell\\Microsoft.PowerShellISE_profile.ps1\'.\n                    if (!(Test-Path -Path $PROFILE)) {\n                        New-Item -ItemType File -Path $PROFILE -Force\n                    }\n                    Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString(\'https://chocolatey.org/install.ps1\'))\n                    choco feature enable -n allowGlobalConfirmation\n                    choco install -y powershell-core\n                    Start-Sleep 3\n                    choco install -y azure-cli\n                    Start-Sleep 3\n                    choco install -y az.powershell\n                    Start-Sleep 3\n                    choco install -y azcopy\n                    Start-Sleep 3\n                    choco install -y iiscrypto\n                    Start-Sleep 3\n                    #Install AzureRM in Powershell 5.1\n                    C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\powershell.exe -Command "Install-Module -Name AzureRM -AllowClobber -Force -Confirm:`$false"\n                    # END Install Packages\n\n                }\n                catch {\n                    throw $_\n                    break\n                }\n            }\n            # Get latest version install agent\n            $getLatestVersion = Invoke-WebRequest https://api.github.com/repos/Microsoft/azure-pipelines-agent/releases/latest -UseBasicParsing\n            $tag = ($getLatestVersion | ConvertFrom-Json)[0].tag_name\n            $tag = $tag.Substring(1)\n            $downloadInstallURL = "https://vstsagentpackage.azureedge.net/agent/$tag/vsts-agent-win-x64-$tag.zip"\n\n            # Creating Pool in Azure DevOps\n            $encodedPat = [System.Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes( ":$token"))\n            $body = "{name:`"$pool`", autoProvision: `"true`"}"\n            if (!($pool -match "default" -or $pool -match "Azure Pipelines" -or $((Invoke-WebRequest -Method GET -Uri "$urlProjectADO/_apis/distributedtask/pools?api-version=5.1" -UseBasicParsing -Headers @{Authorization = "Basic $encodedPat" }).content | ? { $_ -like "*$pool*" }))) {\n                $tmp = $(Invoke-WebRequest -Method POST -Uri "$urlProjectADO/_apis/distributedtask/pools?api-version=5.0-preview.1" -UseBasicParsing -Headers @{Authorization = "Basic $encodedPat" } -Body $body -ContentType "application/json") 2>$null\n            }\n\n            # Install agents\n            $filename = $urlProjectADO.Split(\'/\')[-1]\n            if (!(Test-Path "c:\\temp\\$filename")) { Invoke-WebRequest -Uri $downloadInstallURL -OutFile "c:\\temp\\$filename" }\n\n            for ($i = 1; $i -le $numberagents; $i++) {\n                if (!(Test-Path "c:\\agent-$i")) { mkdir "c:\\agent-$i" }else { rm c:\\agent-$i -recurse -force; mkdir "c:\\agent-$i" }\n                Add-Type -AssemblyName System.IO.Compression.FileSystem ; [System.IO.Compression.ZipFile]::ExtractToDirectory("c:\\temp\\$filename", "c:\\agent-$i")\n                ."c:\\agent-$i\\config.cmd" --unattended --url $urlProjectADO --auth $auth --token $token --pool $pool --agent "$agentname-$i" --runAsService\n            }\n        } | Out-File "c:\\temp\\ADOagent-$((Get-Date).ToString("s").Replace(":","-")).log"\n        Remove-Item -Recurse -Force c:\\temp -Exclude *.log\n    }\n    catch {\n        throw $_\n        break\n    }\n    Write-Verbose "Successfully installed Azure DevOps Job Agents"\n}\n\n'})}),"\n",(0,o.jsxs)(a.ol,{start:"7",children:["\n",(0,o.jsxs)(a.li,{children:["Pipelines","\n",(0,o.jsxs)(a.ol,{children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.a,{href:"https://dev.azure.com/justcloudpublic/_git/How%20to%20deploy%20ADO%20agent?path=/vm-azure-devops-self-hosted-agents/pipelines/vm-azure-devops-self-hosted-agents-ci.yml&version=GBmain&_a=contents",children:"vm-azure-devops-self-hosted-agents-ci.yml"})," - w tym pliku zdefiniuj dok\u0142adnie dane potrzebne do instalacji agent\xf3w \u2014 adres Twojego projektu ADO, nazw\u0119 puli oraz liczb\u0119 agent\xf3w. Grupa oznacza grup\u0119 Library w Azure DevOps, w kt\xf3rej bezpiecznie przekazujemy poufne dane."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-yaml",children:"variables:\n- name: SPNName\n  value: 'Subscription-JustCloudPublic'\n- name: location\n    value: 'westeurope'\n- name: urlProjectADO\n    value: 'https://justcloudpublic.visualstudio.com'\n- name: pool\n    value: 'Default'\n- name: numberagents\n    value: 3\n- group: 'justcloudpublickeyvault'\n\n"})}),"\n",(0,o.jsxs)(a.ol,{start:"8",children:["\n",(0,o.jsxs)(a.li,{children:["\n",(0,o.jsx)(a.p,{children:"Wymagania - co potrzebujesz wiedzie\u0107, zanim zaczniesz wdra\u017ca\u0107:"}),"\n",(0,o.jsxs)(a.ol,{children:["\n",(0,o.jsx)(a.li,{children:"Subskrypcja Azure"}),"\n",(0,o.jsxs)(a.li,{children:["PAT \u2014 Personal Access Token \u2014 (",(0,o.jsx)(a.a,{href:"https://docs.microsoft.com/azure/devops/organizations/accounts/use-personal-access-tokens-to-authenticate?view=azure-devops&tabs=Windows&WT.mc_id=AZ-MVP-5002690#create-a-pat",children:"https://docs.microsoft.com/azure/devops/organizations/accounts/use-personal-access-tokens-to-authenticate?view=azure-devops&tabs=Windows&WT.mc_id=AZ-MVP-5002690#create-a-pat"}),")"]}),"\n",(0,o.jsxs)(a.li,{children:["Key Vault \u2014 (",(0,o.jsx)(a.a,{href:"https://docs.microsoft.com/azure/devops/pipelines/release/azure-key-vault?view=azure-devops&WT.mc_id=AZ-MVP-5002690",children:"https://docs.microsoft.com/azure/devops/pipelines/release/azure-key-vault?view=azure-devops&WT.mc_id=AZ-MVP-5002690"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(a.p,{children:"Po wdro\u017ceniu:"}),"\n",(0,o.jsxs)(a.ol,{children:["\n",(0,o.jsxs)(a.li,{children:["Azure DevOps agents\n",(0,o.jsx)(a.img,{src:n(87952).A+"",width:"1920",height:"553"})]}),"\n",(0,o.jsxs)(a.li,{children:["Azure Portal\n",(0,o.jsx)(a.img,{src:n(20190).A+"",width:"2240",height:"1394"})]}),"\n"]}),"\n",(0,o.jsx)(a.h2,{id:"instrukta\u017c-video",children:"Instrukta\u017c video"}),"\n",(0,o.jsx)(i.A,{controls:!0,src:"https://www.youtube.com/watch?v=bjtgALglU2o",width:"65%",height:"auto",style:{display:"block",margin:"0 auto 20px auto",aspectRatio:"16/9"}}),"\n",(0,o.jsx)(a.p,{children:"Je\u015bli masz jakie\u015b pytania, zapraszam do komentowania \ud83d\ude42."}),"\n",(0,o.jsx)(a.p,{children:"Artyku\u0142 dost\u0119pny r\xf3wnie\u017c na Medium i LinkedIn:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:["(EN) ",(0,o.jsx)(a.a,{href:"https://piotr-rogala.medium.com/7223953d2e1f",children:"https://piotr-rogala.medium.com/7223953d2e1f"})]}),"\n",(0,o.jsxs)(a.li,{children:["(PL) ",(0,o.jsx)(a.a,{href:"https://www.linkedin.com/pulse/jak-wdro%25C5%25BCy%25C4%2587-azure-pipelines-agenta-piotr-rogala/",children:"https://www.linkedin.com/pulse/jak-wdro%25C5%25BCy%25C4%2587-azure-pipelines-agenta-piotr-rogala/"})]}),"\n"]})]})}function u(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,o.jsx)(a,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},87952:(e,a,n)=>{n.d(a,{A:()=>t});const t=n.p+"assets/images/2022-02-26_20-11-11-8336992a7ceb667eb0794480828457e2.jpg"},89487:(e,a,n)=>{n.d(a,{A:()=>x});var t=n(96540);const o=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,s=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,i=/\.(m3u8)($|\?)/i,r=/\.(mpd)($|\?)/i,l=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,c=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,d=/vimeo\.com\/(?!progressive_redirect).+/,p=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,u=/open\.spotify\.com\/(\w+)\/(\w+)/i,m=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+|(videos?\/|\?video=)\d+)($|\?)/,h=/tiktok\.com\/(?:player\/v1\/|share\/video\/|@[^/]+\/video\/)([0-9]+)/,y=(e,a)=>{if(Array.isArray(e)){for(const n of e){if("string"==typeof n&&y(n,a))return!0;if(y(n.src,a))return!0}return!1}return a(e)},g={html:e=>y(e,e=>o.test(e)||s.test(e)),hls:e=>y(e,e=>i.test(e)),dash:e=>y(e,e=>r.test(e)),mux:e=>l.test(e),youtube:e=>c.test(e),vimeo:e=>d.test(e)&&!s.test(e)&&!i.test(e),wistia:e=>p.test(e),spotify:e=>u.test(e),twitch:e=>m.test(e),tiktok:e=>h.test(e)};var w=t.forwardRef((e,a)=>{const n=o.test(`${e.src}`)?"audio":"video";return t.createElement(n,{...e,ref:a},e.children)});var z=[{key:"hls",name:"hls.js",canPlay:g.hls,canEnablePIP:()=>!0,player:(0,t.lazy)(()=>Promise.all([n.e(9758),n.e(4945),n.e(2262)]).then(n.bind(n,31833)))},{key:"dash",name:"dash.js",canPlay:g.dash,canEnablePIP:()=>!0,player:(0,t.lazy)(()=>Promise.all([n.e(9758),n.e(6395)]).then(n.bind(n,19380)))},{key:"mux",name:"Mux",canPlay:g.mux,canEnablePIP:()=>!0,player:(0,t.lazy)(()=>Promise.all([n.e(9758),n.e(4945),n.e(2723)]).then(n.bind(n,31933)))},{key:"youtube",name:"YouTube",canPlay:g.youtube,player:(0,t.lazy)(()=>n.e(8446).then(n.bind(n,30126)))},{key:"vimeo",name:"Vimeo",canPlay:g.vimeo,player:(0,t.lazy)(()=>n.e(6173).then(n.bind(n,91682)))},{key:"wistia",name:"Wistia",canPlay:g.wistia,canEnablePIP:()=>!0,player:(0,t.lazy)(()=>n.e(9340).then(n.bind(n,89971)))},{key:"spotify",name:"Spotify",canPlay:g.spotify,canEnablePIP:()=>!1,player:(0,t.lazy)(()=>n.e(2771).then(n.bind(n,99422)))},{key:"twitch",name:"Twitch",canPlay:g.twitch,canEnablePIP:()=>!1,player:(0,t.lazy)(()=>n.e(2042).then(n.bind(n,45946)))},{key:"tiktok",name:"TikTok",canPlay:g.tiktok,canEnablePIP:()=>!1,player:(0,t.lazy)(()=>n.e(8085).then(n.bind(n,23173)))},{key:"html",name:"html",canPlay:g.html,canEnablePIP:()=>!0,player:w}];const j={width:"320px",height:"180px",volume:1,playbackRate:1,previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}"},v=t.forwardRef((e,a)=>{const{playing:n,pip:o}=e,s=e.activePlayer,i=(0,t.useRef)(null),r=(0,t.useRef)(!0);(0,t.useEffect)(()=>{var a,t;i.current&&(i.current.paused&&!0===n&&i.current.play(),i.current.paused||!1!==n||i.current.pause(),i.current.playbackRate=null!=(a=e.playbackRate)?a:1,i.current.volume=null!=(t=e.volume)?t:1)}),(0,t.useEffect)(()=>{var e,a,n,t,s;if(i.current&&globalThis.document){if(o&&!document.pictureInPictureElement)try{null==(a=(e=i.current).requestPictureInPicture)||a.call(e)}catch(r){}if(!o&&document.pictureInPictureElement)try{null==(t=(n=i.current).exitPictureInPicture)||t.call(n),null==(s=document.exitPictureInPicture)||s.call(document)}catch(r){}}},[o]);if(!s)return null;const l={},c=["onReady","onStart"];for(const t in e)t.startsWith("on")&&!c.includes(t)&&(l[t]=e[t]);return t.createElement(s,{...l,style:e.style,className:e.className,slot:e.slot,ref:(0,t.useCallback)(e=>{i.current=e,"function"==typeof a?a(e):null!==a&&(a.current=e)},[a]),src:e.src,crossOrigin:e.crossOrigin,preload:e.preload,controls:e.controls,muted:e.muted,autoPlay:e.autoPlay,loop:e.loop,playsInline:e.playsInline,config:e.config,onLoadStart:a=>{var n,t;r.current=!0,null==(n=e.onReady)||n.call(e),null==(t=e.onLoadStart)||t.call(e,a)},onPlay:a=>{var n,t;r.current&&(r.current=!1,null==(n=e.onStart)||n.call(e,a)),null==(t=e.onPlay)||t.call(e,a)}},e.children)});v.displayName="Player";var k=v;const b=(0,t.lazy)(()=>n.e(6353).then(n.bind(n,21924))),f=[],P=({children:e})=>e;var x=((e,a)=>{const n=t.forwardRef((n,o)=>{const s={...j,...n},{src:i,slot:r,className:l,style:c,width:d,height:p,fallback:u,wrapper:m}=s,[h,y]=(0,t.useState)(!!s.light);(0,t.useEffect)(()=>{s.light?y(!0):y(!1)},[s.light]);const g=e=>{var a;y(!1),null==(a=s.onClickPreview)||a.call(s,e)},w=null==m?P:m,z=!1===u?P:t.Suspense;return t.createElement(w,{slot:r,className:l,style:{width:d,height:p,...c}},t.createElement(z,{fallback:u},h?(e=>{if(!e)return null;const{light:a,playIcon:n,previewTabIndex:o,oEmbedUrl:i,previewAriaLabel:r}=s;return t.createElement(b,{src:e,light:a,playIcon:n,previewTabIndex:o,previewAriaLabel:r,oEmbedUrl:i,onClickPreview:g})})(i):(n=>{var i,c;const d=(n=>{for(const a of[...f,...e])if(n&&a.canPlay(n))return a;return a||null})(n);if(!d)return null;const{style:p,width:u,height:m,wrapper:h}=s,y=null==(i=s.config)?void 0:i[d.key];return t.createElement(k,{...s,ref:o,activePlayer:null!=(c=d.player)?c:d,slot:h?void 0:r,className:h?void 0:l,style:h?{display:"block",width:"100%",height:"100%"}:{display:"block",width:u,height:m,...p},config:y})})(i)))});return n.displayName="ReactPlayer",n.addCustomPlayer=e=>{f.push(e)},n.removeCustomPlayers=()=>{f.length=0},n.canPlay=a=>{if(a)for(const n of[...f,...e])if(n.canPlay(a))return!0;return!1},n.canEnablePIP=a=>{var n;if(a)for(const t of[...f,...e])if(t.canPlay(a)&&(null==(n=t.canEnablePIP)?void 0:n.call(t)))return!0;return!1},n})(z,z[z.length-1])}}]);